(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * @author dmarcos / https://github.com/dmarcos
 * @author mrdoob / http://mrdoob.com
 */

THREE.VRControls = function ( object, onError ) {

	var scope = this;

	var vrDisplay, vrDisplays;

	var standingMatrix = new THREE.Matrix4();

	var frameData = null;

	if ( 'VRFrameData' in window ) {

		frameData = new VRFrameData();

	}

	function gotVRDisplays( displays ) {

		vrDisplays = displays;

		if ( displays.length > 0 ) {

			vrDisplay = displays[ 0 ];

		} else {

			if ( onError ) onError( 'VR input not available.' );

		}

	}

	if ( navigator.getVRDisplays ) {

		navigator.getVRDisplays().then( gotVRDisplays ).catch ( function () {

			console.warn( 'THREE.VRControls: Unable to get VR Displays' );

		} );

	}

	// the Rift SDK returns the position in meters
	// this scale factor allows the user to define how meters
	// are converted to scene units.

	this.scale = 1;

	// If true will use "standing space" coordinate system where y=0 is the
	// floor and x=0, z=0 is the center of the room.
	this.standing = false;

	// Distance from the users eyes to the floor in meters. Used when
	// standing=true but the VRDisplay doesn't provide stageParameters.
	this.userHeight = 1.6;

	this.getVRDisplay = function () {

		return vrDisplay;

	};

	this.setVRDisplay = function ( value ) {

		vrDisplay = value;

	};

	this.getVRDisplays = function () {

		console.warn( 'THREE.VRControls: getVRDisplays() is being deprecated.' );
		return vrDisplays;

	};

	this.getStandingMatrix = function () {

		return standingMatrix;

	};

	this.update = function () {

		if ( vrDisplay ) {

			var pose;

			if ( vrDisplay.getFrameData ) {

				vrDisplay.getFrameData( frameData );
				pose = frameData.pose;

			} else if ( vrDisplay.getPose ) {

				pose = vrDisplay.getPose();

			}

			if ( pose.orientation !== null ) {

				object.quaternion.fromArray( pose.orientation );

			}

			if ( pose.position !== null ) {

				object.position.fromArray( pose.position );

			} else {

				object.position.set( 0, 0, 0 );

			}

			if ( this.standing ) {

				if ( vrDisplay.stageParameters ) {

					object.updateMatrix();

					standingMatrix.fromArray( vrDisplay.stageParameters.sittingToStandingTransform );
					object.applyMatrix( standingMatrix );

				} else {

					object.position.setY( object.position.y + this.userHeight );

				}

			}

			object.position.multiplyScalar( scope.scale );

		}

	};

	this.resetPose = function () {

		if ( vrDisplay ) {

			vrDisplay.resetPose();

		}

	};

	this.resetSensor = function () {

		console.warn( 'THREE.VRControls: .resetSensor() is now .resetPose().' );
		this.resetPose();

	};

	this.zeroSensor = function () {

		console.warn( 'THREE.VRControls: .zeroSensor() is now .resetPose().' );
		this.resetPose();

	};

	this.dispose = function () {

		vrDisplay = null;

	};

};

},{}],2:[function(require,module,exports){
/**
 * @author dmarcos / https://github.com/dmarcos
 * @author mrdoob / http://mrdoob.com
 *
 * WebVR Spec: http://mozvr.github.io/webvr-spec/webvr.html
 *
 * Firefox: http://mozvr.com/downloads/
 * Chromium: https://webvr.info/get-chrome
 *
 */

THREE.VREffect = function( renderer, onError ) {

	var vrDisplay, vrDisplays;
	var eyeTranslationL = new THREE.Vector3();
	var eyeTranslationR = new THREE.Vector3();
	var renderRectL, renderRectR;

	var frameData = null;

	if ( 'VRFrameData' in window ) {

		frameData = new window.VRFrameData();

	}

	function gotVRDisplays( displays ) {

		vrDisplays = displays;

		if ( displays.length > 0 ) {

			vrDisplay = displays[ 0 ];

		} else {

			if ( onError ) onError( 'HMD not available' );

		}

	}

	if ( navigator.getVRDisplays ) {

		navigator.getVRDisplays().then( gotVRDisplays ).catch( function() {

			console.warn( 'THREE.VREffect: Unable to get VR Displays' );

		} );

	}

	//

	this.isPresenting = false;
	this.scale = 1;

	var scope = this;

	var rendererSize = renderer.getSize();
	var rendererUpdateStyle = false;
	var rendererPixelRatio = renderer.getPixelRatio();

	this.getVRDisplay = function() {

		return vrDisplay;

	};

	this.setVRDisplay = function( value ) {

		vrDisplay = value;

	};

	this.getVRDisplays = function() {

		console.warn( 'THREE.VREffect: getVRDisplays() is being deprecated.' );
		return vrDisplays;

	};

	this.setSize = function( width, height, updateStyle ) {

		rendererSize = { width: width, height: height };
		rendererUpdateStyle = updateStyle;

		if ( scope.isPresenting ) {

			var eyeParamsL = vrDisplay.getEyeParameters( 'left' );
			renderer.setPixelRatio( 1 );
			renderer.setSize( eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false );

		} else {

			renderer.setPixelRatio( rendererPixelRatio );
			renderer.setSize( width, height, updateStyle );

		}

	};

	// VR presentation

	var canvas = renderer.domElement;
	var defaultLeftBounds = [ 0.0, 0.0, 0.5, 1.0 ];
	var defaultRightBounds = [ 0.5, 0.0, 0.5, 1.0 ];

	function onVRDisplayPresentChange() {

		var wasPresenting = scope.isPresenting;
		scope.isPresenting = vrDisplay !== undefined && vrDisplay.isPresenting;

		if ( scope.isPresenting ) {

			var eyeParamsL = vrDisplay.getEyeParameters( 'left' );
			var eyeWidth = eyeParamsL.renderWidth;
			var eyeHeight = eyeParamsL.renderHeight;

			if ( ! wasPresenting ) {

				rendererPixelRatio = renderer.getPixelRatio();
				rendererSize = renderer.getSize();

				renderer.setPixelRatio( 1 );
				renderer.setSize( eyeWidth * 2, eyeHeight, false );

			}

		} else if ( wasPresenting ) {

			renderer.setPixelRatio( rendererPixelRatio );
			renderer.setSize( rendererSize.width, rendererSize.height, rendererUpdateStyle );

		}

	}

	window.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );

	this.setFullScreen = function( boolean ) {

		return new Promise( function( resolve, reject ) {

			if ( vrDisplay === undefined ) {

				reject( new Error( 'No VR hardware found.' ) );
				return;

			}

			if ( scope.isPresenting === boolean ) {

				resolve();
				return;

			}

			if ( boolean ) {

				resolve( vrDisplay.requestPresent( [ { source: canvas } ] ) );

			} else {

				resolve( vrDisplay.exitPresent() );

			}

		} );

	};

	this.requestPresent = function() {

		return this.setFullScreen( true );

	};

	this.exitPresent = function() {

		return this.setFullScreen( false );

	};

	this.requestAnimationFrame = function( f ) {

		if ( vrDisplay !== undefined ) {

			return vrDisplay.requestAnimationFrame( f );

		} else {

			return window.requestAnimationFrame( f );

		}

	};

	this.cancelAnimationFrame = function( h ) {

		if ( vrDisplay !== undefined ) {

			vrDisplay.cancelAnimationFrame( h );

		} else {

			window.cancelAnimationFrame( h );

		}

	};

	this.submitFrame = function() {

		if ( vrDisplay !== undefined && scope.isPresenting ) {

			vrDisplay.submitFrame();

		}

	};

	this.autoSubmitFrame = true;

	// render

	var cameraL = new THREE.PerspectiveCamera();
	cameraL.layers.enable( 1 );

	var cameraR = new THREE.PerspectiveCamera();
	cameraR.layers.enable( 2 );

	this.render = function( scene, camera, renderTarget, forceClear ) {

		if ( vrDisplay && scope.isPresenting ) {

			var autoUpdate = scene.autoUpdate;

			if ( autoUpdate ) {

				scene.updateMatrixWorld();
				scene.autoUpdate = false;

			}

			var eyeParamsL = vrDisplay.getEyeParameters( 'left' );
			var eyeParamsR = vrDisplay.getEyeParameters( 'right' );

			eyeTranslationL.fromArray( eyeParamsL.offset );
			eyeTranslationR.fromArray( eyeParamsR.offset );

			if ( Array.isArray( scene ) ) {

				console.warn( 'THREE.VREffect.render() no longer supports arrays. Use object.layers instead.' );
				scene = scene[ 0 ];

			}

			// When rendering we don't care what the recommended size is, only what the actual size
			// of the backbuffer is.
			var size = renderer.getSize();
			var layers = vrDisplay.getLayers();
			var leftBounds;
			var rightBounds;

			if ( layers.length ) {

				var layer = layers[ 0 ];

				leftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : defaultLeftBounds;
				rightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : defaultRightBounds;

			} else {

				leftBounds = defaultLeftBounds;
				rightBounds = defaultRightBounds;

			}

			renderRectL = {
				x: Math.round( size.width * leftBounds[ 0 ] ),
				y: Math.round( size.height * leftBounds[ 1 ] ),
				width: Math.round( size.width * leftBounds[ 2 ] ),
				height: Math.round( size.height * leftBounds[ 3 ] )
			};
			renderRectR = {
				x: Math.round( size.width * rightBounds[ 0 ] ),
				y: Math.round( size.height * rightBounds[ 1 ] ),
				width: Math.round( size.width * rightBounds[ 2 ] ),
				height: Math.round( size.height * rightBounds[ 3 ] )
			};

			if ( renderTarget ) {

				renderer.setRenderTarget( renderTarget );
				renderTarget.scissorTest = true;

			} else {

				renderer.setRenderTarget( null );
				renderer.setScissorTest( true );

			}

			if ( renderer.autoClear || forceClear ) renderer.clear();

			if ( camera.parent === null ) camera.updateMatrixWorld();

			camera.matrixWorld.decompose( cameraL.position, cameraL.quaternion, cameraL.scale );
			camera.matrixWorld.decompose( cameraR.position, cameraR.quaternion, cameraR.scale );

			var scale = this.scale;
			cameraL.translateOnAxis( eyeTranslationL, scale );
			cameraR.translateOnAxis( eyeTranslationR, scale );

			if ( vrDisplay.getFrameData ) {

				vrDisplay.depthNear = camera.near;
				vrDisplay.depthFar = camera.far;

				vrDisplay.getFrameData( frameData );

				cameraL.projectionMatrix.elements = frameData.leftProjectionMatrix;
				cameraR.projectionMatrix.elements = frameData.rightProjectionMatrix;

			} else {

				cameraL.projectionMatrix = fovToProjection( eyeParamsL.fieldOfView, true, camera.near, camera.far );
				cameraR.projectionMatrix = fovToProjection( eyeParamsR.fieldOfView, true, camera.near, camera.far );

			}

			// render left eye
			if ( renderTarget ) {

				renderTarget.viewport.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );
				renderTarget.scissor.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );

			} else {

				renderer.setViewport( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );
				renderer.setScissor( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );

			}
			renderer.render( scene, cameraL, renderTarget, forceClear );

			// render right eye
			if ( renderTarget ) {

				renderTarget.viewport.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );
				renderTarget.scissor.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );

			} else {

				renderer.setViewport( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );
				renderer.setScissor( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );

			}
			renderer.render( scene, cameraR, renderTarget, forceClear );

			if ( renderTarget ) {

				renderTarget.viewport.set( 0, 0, size.width, size.height );
				renderTarget.scissor.set( 0, 0, size.width, size.height );
				renderTarget.scissorTest = false;
				renderer.setRenderTarget( null );

			} else {

				renderer.setViewport( 0, 0, size.width, size.height );
				renderer.setScissorTest( false );

			}

			if ( autoUpdate ) {

				scene.autoUpdate = true;

			}

			if ( scope.autoSubmitFrame ) {

				scope.submitFrame();

			}

			return;

		}

		// Regular render mode if not HMD

		renderer.render( scene, camera, renderTarget, forceClear );

	};

	this.dispose = function() {

		window.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );

	};

	//

	function fovToNDCScaleOffset( fov ) {

		var pxscale = 2.0 / ( fov.leftTan + fov.rightTan );
		var pxoffset = ( fov.leftTan - fov.rightTan ) * pxscale * 0.5;
		var pyscale = 2.0 / ( fov.upTan + fov.downTan );
		var pyoffset = ( fov.upTan - fov.downTan ) * pyscale * 0.5;
		return { scale: [ pxscale, pyscale ], offset: [ pxoffset, pyoffset ] };

	}

	function fovPortToProjection( fov, rightHanded, zNear, zFar ) {

		rightHanded = rightHanded === undefined ? true : rightHanded;
		zNear = zNear === undefined ? 0.01 : zNear;
		zFar = zFar === undefined ? 10000.0 : zFar;

		var handednessScale = rightHanded ? - 1.0 : 1.0;

		// start with an identity matrix
		var mobj = new THREE.Matrix4();
		var m = mobj.elements;

		// and with scale/offset info for normalized device coords
		var scaleAndOffset = fovToNDCScaleOffset( fov );

		// X result, map clip edges to [-w,+w]
		m[ 0 * 4 + 0 ] = scaleAndOffset.scale[ 0 ];
		m[ 0 * 4 + 1 ] = 0.0;
		m[ 0 * 4 + 2 ] = scaleAndOffset.offset[ 0 ] * handednessScale;
		m[ 0 * 4 + 3 ] = 0.0;

		// Y result, map clip edges to [-w,+w]
		// Y offset is negated because this proj matrix transforms from world coords with Y=up,
		// but the NDC scaling has Y=down (thanks D3D?)
		m[ 1 * 4 + 0 ] = 0.0;
		m[ 1 * 4 + 1 ] = scaleAndOffset.scale[ 1 ];
		m[ 1 * 4 + 2 ] = - scaleAndOffset.offset[ 1 ] * handednessScale;
		m[ 1 * 4 + 3 ] = 0.0;

		// Z result (up to the app)
		m[ 2 * 4 + 0 ] = 0.0;
		m[ 2 * 4 + 1 ] = 0.0;
		m[ 2 * 4 + 2 ] = zFar / ( zNear - zFar ) * - handednessScale;
		m[ 2 * 4 + 3 ] = ( zFar * zNear ) / ( zNear - zFar );

		// W result (= Z in)
		m[ 3 * 4 + 0 ] = 0.0;
		m[ 3 * 4 + 1 ] = 0.0;
		m[ 3 * 4 + 2 ] = handednessScale;
		m[ 3 * 4 + 3 ] = 0.0;

		mobj.transpose();

		return mobj;

	}

	function fovToProjection( fov, rightHanded, zNear, zFar ) {

		var DEG2RAD = Math.PI / 180.0;

		var fovPort = {
			upTan: Math.tan( fov.upDegrees * DEG2RAD ),
			downTan: Math.tan( fov.downDegrees * DEG2RAD ),
			leftTan: Math.tan( fov.leftDegrees * DEG2RAD ),
			rightTan: Math.tan( fov.rightDegrees * DEG2RAD )
		};

		return fovPortToProjection( fovPort, rightHanded, zNear, zFar );

	}

};

},{}],3:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 */

THREE.OBJLoader = function ( manager ) {

	this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;

	this.materials = null;

	this.regexp = {
		// v float float float
		vertex_pattern           : /^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
		// vn float float float
		normal_pattern           : /^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
		// vt float float
		uv_pattern               : /^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
		// f vertex vertex vertex
		face_vertex              : /^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,
		// f vertex/uv vertex/uv vertex/uv
		face_vertex_uv           : /^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,
		// f vertex/uv/normal vertex/uv/normal vertex/uv/normal
		face_vertex_uv_normal    : /^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,
		// f vertex//normal vertex//normal vertex//normal
		face_vertex_normal       : /^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,
		// o object_name | g group_name
		object_pattern           : /^[og]\s*(.+)?/,
		// s boolean
		smoothing_pattern        : /^s\s+(\d+|on|off)/,
		// mtllib file_reference
		material_library_pattern : /^mtllib /,
		// usemtl material_name
		material_use_pattern     : /^usemtl /
	};

};

THREE.OBJLoader.prototype = {

	constructor: THREE.OBJLoader,

	load: function ( url, onLoad, onProgress, onError ) {

		var scope = this;

		var loader = new THREE.FileLoader( scope.manager );
		loader.setPath( this.path );
		loader.load( url, function ( text ) {

			onLoad( scope.parse( text ) );

		}, onProgress, onError );

	},

	setPath: function ( value ) {

		this.path = value;

	},

	setMaterials: function ( materials ) {

		this.materials = materials;

	},

	_createParserState : function () {

		var state = {
			objects  : [],
			object   : {},

			vertices : [],
			normals  : [],
			uvs      : [],

			materialLibraries : [],

			startObject: function ( name, fromDeclaration ) {

				// If the current object (initial from reset) is not from a g/o declaration in the parsed
				// file. We need to use it for the first parsed g/o to keep things in sync.
				if ( this.object && this.object.fromDeclaration === false ) {

					this.object.name = name;
					this.object.fromDeclaration = ( fromDeclaration !== false );
					return;

				}

				var previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );

				if ( this.object && typeof this.object._finalize === 'function' ) {

					this.object._finalize( true );

				}

				this.object = {
					name : name || '',
					fromDeclaration : ( fromDeclaration !== false ),

					geometry : {
						vertices : [],
						normals  : [],
						uvs      : []
					},
					materials : [],
					smooth : true,

					startMaterial : function( name, libraries ) {

						var previous = this._finalize( false );

						// New usemtl declaration overwrites an inherited material, except if faces were declared
						// after the material, then it must be preserved for proper MultiMaterial continuation.
						if ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {

							this.materials.splice( previous.index, 1 );

						}

						var material = {
							index      : this.materials.length,
							name       : name || '',
							mtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),
							smooth     : ( previous !== undefined ? previous.smooth : this.smooth ),
							groupStart : ( previous !== undefined ? previous.groupEnd : 0 ),
							groupEnd   : -1,
							groupCount : -1,
							inherited  : false,

							clone : function( index ) {
								var cloned = {
									index      : ( typeof index === 'number' ? index : this.index ),
									name       : this.name,
									mtllib     : this.mtllib,
									smooth     : this.smooth,
									groupStart : 0,
									groupEnd   : -1,
									groupCount : -1,
									inherited  : false
								};
								cloned.clone = this.clone.bind(cloned);
								return cloned;
							}
						};

						this.materials.push( material );

						return material;

					},

					currentMaterial : function() {

						if ( this.materials.length > 0 ) {
							return this.materials[ this.materials.length - 1 ];
						}

						return undefined;

					},

					_finalize : function( end ) {

						var lastMultiMaterial = this.currentMaterial();
						if ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {

							lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;
							lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;
							lastMultiMaterial.inherited = false;

						}

						// Ignore objects tail materials if no face declarations followed them before a new o/g started.
						if ( end && this.materials.length > 1 ) {

							for ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {
								if ( this.materials[mi].groupCount <= 0 ) {
									this.materials.splice( mi, 1 );
								}
							}

						}

						// Guarantee at least one empty material, this makes the creation later more straight forward.
						if ( end && this.materials.length === 0 ) {

							this.materials.push({
								name   : '',
								smooth : this.smooth
							});

						}

						return lastMultiMaterial;

					}
				};

				// Inherit previous objects material.
				// Spec tells us that a declared material must be set to all objects until a new material is declared.
				// If a usemtl declaration is encountered while this new object is being parsed, it will
				// overwrite the inherited material. Exception being that there was already face declarations
				// to the inherited material, then it will be preserved for proper MultiMaterial continuation.

				if ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === "function" ) {

					var declared = previousMaterial.clone( 0 );
					declared.inherited = true;
					this.object.materials.push( declared );

				}

				this.objects.push( this.object );

			},

			finalize : function() {

				if ( this.object && typeof this.object._finalize === 'function' ) {

					this.object._finalize( true );

				}

			},

			parseVertexIndex: function ( value, len ) {

				var index = parseInt( value, 10 );
				return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;

			},

			parseNormalIndex: function ( value, len ) {

				var index = parseInt( value, 10 );
				return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;

			},

			parseUVIndex: function ( value, len ) {

				var index = parseInt( value, 10 );
				return ( index >= 0 ? index - 1 : index + len / 2 ) * 2;

			},

			addVertex: function ( a, b, c ) {

				var src = this.vertices;
				var dst = this.object.geometry.vertices;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ a + 2 ] );
				dst.push( src[ b + 0 ] );
				dst.push( src[ b + 1 ] );
				dst.push( src[ b + 2 ] );
				dst.push( src[ c + 0 ] );
				dst.push( src[ c + 1 ] );
				dst.push( src[ c + 2 ] );

			},

			addVertexLine: function ( a ) {

				var src = this.vertices;
				var dst = this.object.geometry.vertices;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ a + 2 ] );

			},

			addNormal : function ( a, b, c ) {

				var src = this.normals;
				var dst = this.object.geometry.normals;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ a + 2 ] );
				dst.push( src[ b + 0 ] );
				dst.push( src[ b + 1 ] );
				dst.push( src[ b + 2 ] );
				dst.push( src[ c + 0 ] );
				dst.push( src[ c + 1 ] );
				dst.push( src[ c + 2 ] );

			},

			addUV: function ( a, b, c ) {

				var src = this.uvs;
				var dst = this.object.geometry.uvs;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ b + 0 ] );
				dst.push( src[ b + 1 ] );
				dst.push( src[ c + 0 ] );
				dst.push( src[ c + 1 ] );

			},

			addUVLine: function ( a ) {

				var src = this.uvs;
				var dst = this.object.geometry.uvs;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );

			},

			addFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {

				var vLen = this.vertices.length;

				var ia = this.parseVertexIndex( a, vLen );
				var ib = this.parseVertexIndex( b, vLen );
				var ic = this.parseVertexIndex( c, vLen );
				var id;

				if ( d === undefined ) {

					this.addVertex( ia, ib, ic );

				} else {

					id = this.parseVertexIndex( d, vLen );

					this.addVertex( ia, ib, id );
					this.addVertex( ib, ic, id );

				}

				if ( ua !== undefined ) {

					var uvLen = this.uvs.length;

					ia = this.parseUVIndex( ua, uvLen );
					ib = this.parseUVIndex( ub, uvLen );
					ic = this.parseUVIndex( uc, uvLen );

					if ( d === undefined ) {

						this.addUV( ia, ib, ic );

					} else {

						id = this.parseUVIndex( ud, uvLen );

						this.addUV( ia, ib, id );
						this.addUV( ib, ic, id );

					}

				}

				if ( na !== undefined ) {

					// Normals are many times the same. If so, skip function call and parseInt.
					var nLen = this.normals.length;
					ia = this.parseNormalIndex( na, nLen );

					ib = na === nb ? ia : this.parseNormalIndex( nb, nLen );
					ic = na === nc ? ia : this.parseNormalIndex( nc, nLen );

					if ( d === undefined ) {

						this.addNormal( ia, ib, ic );

					} else {

						id = this.parseNormalIndex( nd, nLen );

						this.addNormal( ia, ib, id );
						this.addNormal( ib, ic, id );

					}

				}

			},

			addLineGeometry: function ( vertices, uvs ) {

				this.object.geometry.type = 'Line';

				var vLen = this.vertices.length;
				var uvLen = this.uvs.length;

				for ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {

					this.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );

				}

				for ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {

					this.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );

				}

			}

		};

		state.startObject( '', false );

		return state;

	},

	parse: function ( text ) {

		console.time( 'OBJLoader' );

		var state = this._createParserState();

		if ( text.indexOf( '\r\n' ) !== - 1 ) {

			// This is faster than String.split with regex that splits on both
			text = text.replace( /\r\n/g, '\n' );

		}

		if ( text.indexOf( '\\\n' ) !== - 1) {

			// join lines separated by a line continuation character (\)
			text = text.replace( /\\\n/g, '' );

		}

		var lines = text.split( '\n' );
		var line = '', lineFirstChar = '', lineSecondChar = '';
		var lineLength = 0;
		var result = [];

		// Faster to just trim left side of the line. Use if available.
		var trimLeft = ( typeof ''.trimLeft === 'function' );

		for ( var i = 0, l = lines.length; i < l; i ++ ) {

			line = lines[ i ];

			line = trimLeft ? line.trimLeft() : line.trim();

			lineLength = line.length;

			if ( lineLength === 0 ) continue;

			lineFirstChar = line.charAt( 0 );

			// @todo invoke passed in handler if any
			if ( lineFirstChar === '#' ) continue;

			if ( lineFirstChar === 'v' ) {

				lineSecondChar = line.charAt( 1 );

				if ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {

					// 0                  1      2      3
					// ["v 1.0 2.0 3.0", "1.0", "2.0", "3.0"]

					state.vertices.push(
						parseFloat( result[ 1 ] ),
						parseFloat( result[ 2 ] ),
						parseFloat( result[ 3 ] )
					);

				} else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {

					// 0                   1      2      3
					// ["vn 1.0 2.0 3.0", "1.0", "2.0", "3.0"]

					state.normals.push(
						parseFloat( result[ 1 ] ),
						parseFloat( result[ 2 ] ),
						parseFloat( result[ 3 ] )
					);

				} else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {

					// 0               1      2
					// ["vt 0.1 0.2", "0.1", "0.2"]

					state.uvs.push(
						parseFloat( result[ 1 ] ),
						parseFloat( result[ 2 ] )
					);

				} else {

					throw new Error( "Unexpected vertex/normal/uv line: '" + line  + "'" );

				}

			} else if ( lineFirstChar === "f" ) {

				if ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {

					// f vertex/uv/normal vertex/uv/normal vertex/uv/normal
					// 0                        1    2    3    4    5    6    7    8    9   10         11         12
					// ["f 1/1/1 2/2/2 3/3/3", "1", "1", "1", "2", "2", "2", "3", "3", "3", undefined, undefined, undefined]

					state.addFace(
						result[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],
						result[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],
						result[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]
					);

				} else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {

					// f vertex/uv vertex/uv vertex/uv
					// 0                  1    2    3    4    5    6   7          8
					// ["f 1/1 2/2 3/3", "1", "1", "2", "2", "3", "3", undefined, undefined]

					state.addFace(
						result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
						result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
					);

				} else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {

					// f vertex//normal vertex//normal vertex//normal
					// 0                     1    2    3    4    5    6   7          8
					// ["f 1//1 2//2 3//3", "1", "1", "2", "2", "3", "3", undefined, undefined]

					state.addFace(
						result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
						undefined, undefined, undefined, undefined,
						result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
					);

				} else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {

					// f vertex vertex vertex
					// 0            1    2    3   4
					// ["f 1 2 3", "1", "2", "3", undefined]

					state.addFace(
						result[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]
					);

				} else {

					throw new Error( "Unexpected face line: '" + line  + "'" );

				}

			} else if ( lineFirstChar === "l" ) {

				var lineParts = line.substring( 1 ).trim().split( " " );
				var lineVertices = [], lineUVs = [];

				if ( line.indexOf( "/" ) === - 1 ) {

					lineVertices = lineParts;

				} else {

					for ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {

						var parts = lineParts[ li ].split( "/" );

						if ( parts[ 0 ] !== "" ) lineVertices.push( parts[ 0 ] );
						if ( parts[ 1 ] !== "" ) lineUVs.push( parts[ 1 ] );

					}

				}
				state.addLineGeometry( lineVertices, lineUVs );

			} else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {

				// o object_name
				// or
				// g group_name

				// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869
				// var name = result[ 0 ].substr( 1 ).trim();
				var name = ( " " + result[ 0 ].substr( 1 ).trim() ).substr( 1 );

				state.startObject( name );

			} else if ( this.regexp.material_use_pattern.test( line ) ) {

				// material

				state.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );

			} else if ( this.regexp.material_library_pattern.test( line ) ) {

				// mtl file

				state.materialLibraries.push( line.substring( 7 ).trim() );

			} else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {

				// smooth shading

				// @todo Handle files that have varying smooth values for a set of faces inside one geometry,
				// but does not define a usemtl for each face set.
				// This should be detected and a dummy material created (later MultiMaterial and geometry groups).
				// This requires some care to not create extra material on each smooth value for "normal" obj files.
				// where explicit usemtl defines geometry groups.
				// Example asset: examples/models/obj/cerberus/Cerberus.obj

				var value = result[ 1 ].trim().toLowerCase();
				state.object.smooth = ( value === '1' || value === 'on' );

				var material = state.object.currentMaterial();
				if ( material ) {

					material.smooth = state.object.smooth;

				}

			} else {

				// Handle null terminated files without exception
				if ( line === '\0' ) continue;

				throw new Error( "Unexpected line: '" + line  + "'" );

			}

		}

		state.finalize();

		var container = new THREE.Group();
		container.materialLibraries = [].concat( state.materialLibraries );

		for ( var i = 0, l = state.objects.length; i < l; i ++ ) {

			var object = state.objects[ i ];
			var geometry = object.geometry;
			var materials = object.materials;
			var isLine = ( geometry.type === 'Line' );

			// Skip o/g line declarations that did not follow with any faces
			if ( geometry.vertices.length === 0 ) continue;

			var buffergeometry = new THREE.BufferGeometry();

			buffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );

			if ( geometry.normals.length > 0 ) {

				buffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );

			} else {

				buffergeometry.computeVertexNormals();

			}

			if ( geometry.uvs.length > 0 ) {

				buffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );

			}

			// Create materials

			var createdMaterials = [];

			for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {

				var sourceMaterial = materials[mi];
				var material = undefined;

				if ( this.materials !== null ) {

					material = this.materials.create( sourceMaterial.name );

					// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.
					if ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {

						var materialLine = new THREE.LineBasicMaterial();
						materialLine.copy( material );
						material = materialLine;

					}

				}

				if ( ! material ) {

					material = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );
					material.name = sourceMaterial.name;

				}

				material.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;

				createdMaterials.push(material);

			}

			// Create mesh

			var mesh;

			if ( createdMaterials.length > 1 ) {

				for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {

					var sourceMaterial = materials[mi];
					buffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );

				}

				var multiMaterial = new THREE.MultiMaterial( createdMaterials );
				mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, multiMaterial ) : new THREE.LineSegments( buffergeometry, multiMaterial ) );

			} else {

				mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );
			}

			mesh.name = object.name;

			container.add( mesh );

		}

		console.timeEnd( 'OBJLoader' );

		return container;

	}

};

},{}],4:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com
 * @author stewdio / http://stewd.io
 */

THREE.ViveController = function ( id ) {

	THREE.Object3D.call( this );

	var scope = this;
	var gamepad;

	var axes = [ 0, 0 ];
	var thumbpadIsPressed = false;
	var triggerIsPressed = false;
	var gripsArePressed = false;
	var menuIsPressed = false;

	function findGamepad( id ) {

		// Iterate across gamepads as Vive Controllers may not be
		// in position 0 and 1.

		var gamepads = navigator.getGamepads();

		for ( var i = 0, j = 0; i < 4; i ++ ) {

			var gamepad = gamepads[ i ];

			if ( gamepad && gamepad.id === 'OpenVR Gamepad' ) {

				if ( j === id ) return gamepad;

				j ++;

			}

		}

	}

	this.matrixAutoUpdate = false;
	this.standingMatrix = new THREE.Matrix4();

	this.getGamepad = function () {

		return gamepad;

	};

	this.getButtonState = function ( button ) {

		if ( button === 'thumbpad' ) return thumbpadIsPressed;
		if ( button === 'trigger' ) return triggerIsPressed;
		if ( button === 'grips' ) return gripsArePressed;
		if ( button === 'menu' ) return menuIsPressed;

	};

	this.update = function () {

		gamepad = findGamepad( id );

		if ( gamepad !== undefined && gamepad.pose !== undefined ) {

			if ( gamepad.pose === null ) return; // No user action yet

			//  Position and orientation.

			var pose = gamepad.pose;

			if ( pose.position !== null ) scope.position.fromArray( pose.position );
			if ( pose.orientation !== null ) scope.quaternion.fromArray( pose.orientation );
			scope.matrix.compose( scope.position, scope.quaternion, scope.scale );
			scope.matrix.multiplyMatrices( scope.standingMatrix, scope.matrix );
			scope.matrixWorldNeedsUpdate = true;
			scope.visible = true;

			//  Thumbpad and Buttons.

			if ( axes[ 0 ] !== gamepad.axes[ 0 ] || axes[ 1 ] !== gamepad.axes[ 1 ] ) {

				axes[ 0 ] = gamepad.axes[ 0 ]; //  X axis: -1 = Left, +1 = Right.
				axes[ 1 ] = gamepad.axes[ 1 ]; //  Y axis: -1 = Bottom, +1 = Top.
				scope.dispatchEvent( { type: 'axischanged', axes: axes } );

			}

			if ( thumbpadIsPressed !== gamepad.buttons[ 0 ].pressed ) {

				thumbpadIsPressed = gamepad.buttons[ 0 ].pressed;
				scope.dispatchEvent( { type: thumbpadIsPressed ? 'thumbpaddown' : 'thumbpadup' } );

			}

			if ( triggerIsPressed !== gamepad.buttons[ 1 ].pressed ) {

				triggerIsPressed = gamepad.buttons[ 1 ].pressed;
				scope.dispatchEvent( { type: triggerIsPressed ? 'triggerdown' : 'triggerup' } );

			}

			if ( gripsArePressed !== gamepad.buttons[ 2 ].pressed ) {

				gripsArePressed = gamepad.buttons[ 2 ].pressed;
				scope.dispatchEvent( { type: gripsArePressed ? 'gripsdown' : 'gripsup' } );

			}

			if ( menuIsPressed !== gamepad.buttons[ 3 ].pressed ) {

				menuIsPressed = gamepad.buttons[ 3 ].pressed;
				scope.dispatchEvent( { type: menuIsPressed ? 'menudown' : 'menuup' } );

			}

		} else {

			scope.visible = false;

		}

	};

};

THREE.ViveController.prototype = Object.create( THREE.Object3D.prototype );
THREE.ViveController.prototype.constructor = THREE.ViveController;

},{}],5:[function(require,module,exports){
(function (global){
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.WebVRManager = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Emitter = _dereq_('./emitter.js');
var Modes = _dereq_('./modes.js');
var Util = _dereq_('./util.js');

/**
 * Everything having to do with the WebVR button.
 * Emits a 'click' event when it's clicked.
 */
function ButtonManager(opt_root) {
  var root = opt_root || document.body;
  this.loadIcons_();

  // Make the fullscreen button.
  var fsButton = this.createButton();
  fsButton.src = this.ICONS.fullscreen;
  fsButton.title = 'Fullscreen mode';
  var s = fsButton.style;
  s.bottom = 0;
  s.right = 0;
  fsButton.addEventListener('click', this.createClickHandler_('fs'));
  root.appendChild(fsButton);
  this.fsButton = fsButton;

  // Make the VR button.
  var vrButton = this.createButton();
  vrButton.src = this.ICONS.cardboard;
  vrButton.title = 'Virtual reality mode';
  var s = vrButton.style;
  s.bottom = 0;
  s.right = '48px';
  vrButton.addEventListener('click', this.createClickHandler_('vr'));
  root.appendChild(vrButton);
  this.vrButton = vrButton;

  this.isVisible = true;

}
ButtonManager.prototype = new Emitter();

ButtonManager.prototype.createButton = function() {
  var button = document.createElement('img');
  button.className = 'webvr-button';
  var s = button.style;
  s.position = 'absolute';
  s.width = '24px'
  s.height = '24px';
  s.backgroundSize = 'cover';
  s.backgroundColor = 'transparent';
  s.border = 0;
  s.userSelect = 'none';
  s.webkitUserSelect = 'none';
  s.MozUserSelect = 'none';
  s.cursor = 'pointer';
  s.padding = '12px';
  s.zIndex = 1;
  s.display = 'none';
  s.boxSizing = 'content-box';

  // Prevent button from being selected and dragged.
  button.draggable = false;
  button.addEventListener('dragstart', function(e) {
    e.preventDefault();
  });

  // Style it on hover.
  button.addEventListener('mouseenter', function(e) {
    s.filter = s.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';
  });
  button.addEventListener('mouseleave', function(e) {
    s.filter = s.webkitFilter = '';
  });
  return button;
};

ButtonManager.prototype.setMode = function(mode, isVRCompatible) {
  isVRCompatible = isVRCompatible || WebVRConfig.FORCE_ENABLE_VR;
  if (!this.isVisible) {
    return;
  }
  switch (mode) {
    case Modes.NORMAL:
      this.fsButton.style.display = 'block';
      this.fsButton.src = this.ICONS.fullscreen;
      this.vrButton.style.display = (isVRCompatible ? 'block' : 'none');
      break;
    case Modes.MAGIC_WINDOW:
      this.fsButton.style.display = 'block';
      this.fsButton.src = this.ICONS.exitFullscreen;
      this.vrButton.style.display = 'none';
      break;
    case Modes.VR:
      this.fsButton.style.display = 'none';
      this.vrButton.style.display = 'none';
      break;
  }

  // Hack for Safari Mac/iOS to force relayout (svg-specific issue)
  // http://goo.gl/hjgR6r
  var oldValue = this.fsButton.style.display;
  this.fsButton.style.display = 'inline-block';
  this.fsButton.offsetHeight;
  this.fsButton.style.display = oldValue;
};

ButtonManager.prototype.setVisibility = function(isVisible) {
  this.isVisible = isVisible;
  this.fsButton.style.display = isVisible ? 'block' : 'none';
  this.vrButton.style.display = isVisible ? 'block' : 'none';
};

ButtonManager.prototype.createClickHandler_ = function(eventName) {
  return function(e) {
    e.stopPropagation();
    e.preventDefault();
    this.emit(eventName);
  }.bind(this);
};

ButtonManager.prototype.loadIcons_ = function() {
  // Preload some hard-coded SVG.
  this.ICONS = {};
  this.ICONS.cardboard = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo=');
  this.ICONS.fullscreen = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNyAxNEg1djVoNXYtMkg3di0zem0tMi00aDJWN2gzVjVINXY1em0xMiA3aC0zdjJoNXYtNWgtMnYzek0xNCA1djJoM3YzaDJWNWgtNXoiLz4KPC9zdmc+Cg==');
  this.ICONS.exitFullscreen = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNSAxNmgzdjNoMnYtNUg1djJ6bTMtOEg1djJoNVY1SDh2M3ptNiAxMWgydi0zaDN2LTJoLTV2NXptMi0xMVY1aC0ydjVoNVY4aC0zeiIvPgo8L3N2Zz4K');
  this.ICONS.settings = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVDMTQuNDYgMi4xOCAxNC4yNSAyIDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==');
};

module.exports = ButtonManager;

},{"./emitter.js":2,"./modes.js":3,"./util.js":4}],2:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function Emitter() {
  this.callbacks = {};
}

Emitter.prototype.emit = function(eventName) {
  var callbacks = this.callbacks[eventName];
  if (!callbacks) {
    //console.log('No valid callback specified.');
    return;
  }
  var args = [].slice.call(arguments);
  // Eliminate the first param (the callback).
  args.shift();
  for (var i = 0; i < callbacks.length; i++) {
    callbacks[i].apply(this, args);
  }
};

Emitter.prototype.on = function(eventName, callback) {
  if (eventName in this.callbacks) {
    this.callbacks[eventName].push(callback);
  } else {
    this.callbacks[eventName] = [callback];
  }
};

module.exports = Emitter;

},{}],3:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Modes = {
  UNKNOWN: 0,
  // Not fullscreen, just tracking.
  NORMAL: 1,
  // Magic window immersive mode.
  MAGIC_WINDOW: 2,
  // Full screen split screen VR mode.
  VR: 3,
};

module.exports = Modes;

},{}],4:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = {};

Util.base64 = function(mimeType, base64) {
  return 'data:' + mimeType + ';base64,' + base64;
};

Util.isMobile = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

Util.isFirefox = function() {
  return /firefox/i.test(navigator.userAgent);
};

Util.isIOS = function() {
  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
};

Util.isIFrame = function() {
  try {
    return window.self !== window.top;
  } catch (e) {
    return true;
  }
};

Util.appendQueryParameter = function(url, key, value) {
  // Determine delimiter based on if the URL already GET parameters in it.
  var delimiter = (url.indexOf('?') < 0 ? '?' : '&');
  url += delimiter + key + '=' + value;
  return url;
};

// From http://goo.gl/4WX3tg
Util.getQueryParameter = function(name) {
  var name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
      results = regex.exec(location.search);
  return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
};

Util.isLandscapeMode = function() {
  return (window.orientation == 90 || window.orientation == -90);
};

Util.getScreenWidth = function() {
  return Math.max(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.getScreenHeight = function() {
  return Math.min(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

module.exports = Util;

},{}],5:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var ButtonManager = _dereq_('./button-manager.js');
var Emitter = _dereq_('./emitter.js');
var Modes = _dereq_('./modes.js');
var Util = _dereq_('./util.js');

/**
 * Helper for getting in and out of VR mode.
 */
function WebVRManager(renderer, effect, params) {
  this.params = params || {};

  this.mode = Modes.UNKNOWN;

  // Set option to hide the button.
  this.hideButton = this.params.hideButton || false;
  // Whether or not the FOV should be distorted or un-distorted. By default, it
  // should be distorted, but in the case of vertex shader based distortion,
  // ensure that we use undistorted parameters.
  this.predistorted = !!this.params.predistorted;

  // Save the THREE.js renderer and effect for later.
  this.renderer = renderer;
  this.effect = effect;
  var polyfillWrapper = document.querySelector('.webvr-polyfill-fullscreen-wrapper');
  this.button = new ButtonManager(polyfillWrapper);

  this.isFullscreenDisabled = !!Util.getQueryParameter('no_fullscreen');
  this.startMode = Modes.NORMAL;
  var startModeParam = parseInt(Util.getQueryParameter('start_mode'));
  if (!isNaN(startModeParam)) {
    this.startMode = startModeParam;
  }

  if (this.hideButton) {
    this.button.setVisibility(false);
  }

  // Check if the browser is compatible with WebVR.
  this.getDeviceByType_(VRDisplay).then(function(hmd) {
    this.hmd = hmd;

    // Only enable VR mode if there's a VR device attached or we are running the
    // polyfill on mobile.
    if (!this.isVRCompatibleOverride) {
      this.isVRCompatible =  !hmd.isPolyfilled || Util.isMobile();
    }

    switch (this.startMode) {
      case Modes.MAGIC_WINDOW:
        this.setMode_(Modes.MAGIC_WINDOW);
        break;
      case Modes.VR:
        this.enterVRMode_();
        this.setMode_(Modes.VR);
        break;
      default:
        this.setMode_(Modes.NORMAL);
    }

    this.emit('initialized');
  }.bind(this));

  // Hook up button listeners.
  this.button.on('fs', this.onFSClick_.bind(this));
  this.button.on('vr', this.onVRClick_.bind(this));

  // Bind to fullscreen events.
  document.addEventListener('webkitfullscreenchange',
      this.onFullscreenChange_.bind(this));
  document.addEventListener('mozfullscreenchange',
      this.onFullscreenChange_.bind(this));
  document.addEventListener('msfullscreenchange',
      this.onFullscreenChange_.bind(this));

  // Bind to VR* specific events.
  window.addEventListener('vrdisplaypresentchange',
      this.onVRDisplayPresentChange_.bind(this));
  window.addEventListener('vrdisplaydeviceparamschange',
      this.onVRDisplayDeviceParamsChange_.bind(this));
}

WebVRManager.prototype = new Emitter();

// Expose these values externally.
WebVRManager.Modes = Modes;

WebVRManager.prototype.render = function(scene, camera, timestamp) {
  // Scene may be an array of two scenes, one for each eye.
  if (scene instanceof Array) {
    this.effect.render(scene[0], camera);
  } else {
    this.effect.render(scene, camera);
  }
};

WebVRManager.prototype.setVRCompatibleOverride = function(isVRCompatible) {
  this.isVRCompatible = isVRCompatible;
  this.isVRCompatibleOverride = true;

  // Don't actually change modes, just update the buttons.
  this.button.setMode(this.mode, this.isVRCompatible);
};

WebVRManager.prototype.setFullscreenCallback = function(callback) {
  this.fullscreenCallback = callback;
};

WebVRManager.prototype.setVRCallback = function(callback) {
  this.vrCallback = callback;
};

WebVRManager.prototype.setExitFullscreenCallback = function(callback) {
  this.exitFullscreenCallback = callback;
}

/**
 * Promise returns true if there is at least one HMD device available.
 */
WebVRManager.prototype.getDeviceByType_ = function(type) {
  return new Promise(function(resolve, reject) {
    navigator.getVRDisplays().then(function(displays) {
      // Promise succeeds, but check if there are any displays actually.
      for (var i = 0; i < displays.length; i++) {
        if (displays[i] instanceof type) {
          resolve(displays[i]);
          break;
        }
      }
      resolve(null);
    }, function() {
      // No displays are found.
      resolve(null);
    });
  });
};

/**
 * Helper for entering VR mode.
 */
WebVRManager.prototype.enterVRMode_ = function() {
  this.hmd.requestPresent([{
    source: this.renderer.domElement,
    predistorted: this.predistorted
  }]);
};

WebVRManager.prototype.setMode_ = function(mode) {
  var oldMode = this.mode;
  if (mode == this.mode) {
    console.warn('Not changing modes, already in %s', mode);
    return;
  }
  // console.log('Mode change: %s => %s', this.mode, mode);
  this.mode = mode;
  this.button.setMode(mode, this.isVRCompatible);

  // Emit an event indicating the mode changed.
  this.emit('modechange', mode, oldMode);
};

/**
 * Main button was clicked.
 */
WebVRManager.prototype.onFSClick_ = function() {
  switch (this.mode) {
    case Modes.NORMAL:
      // TODO: Remove this hack if/when iOS gets real fullscreen mode.
      // If this is an iframe on iOS, break out and open in no_fullscreen mode.
      if (Util.isIOS() && Util.isIFrame()) {
        if (this.fullscreenCallback) {
          this.fullscreenCallback();
        } else {
          var url = window.location.href;
          url = Util.appendQueryParameter(url, 'no_fullscreen', 'true');
          url = Util.appendQueryParameter(url, 'start_mode', Modes.MAGIC_WINDOW);
          top.location.href = url;
          return;
        }
      }
      this.setMode_(Modes.MAGIC_WINDOW);
      this.requestFullscreen_();
      break;
    case Modes.MAGIC_WINDOW:
      if (this.isFullscreenDisabled) {
        window.history.back();
        return;
      }
      if (this.exitFullscreenCallback) {
        this.exitFullscreenCallback();
      }
      this.setMode_(Modes.NORMAL);
      this.exitFullscreen_();
      break;
  }
};

/**
 * The VR button was clicked.
 */
WebVRManager.prototype.onVRClick_ = function() {
  // TODO: Remove this hack when iOS has fullscreen mode.
  // If this is an iframe on iOS, break out and open in no_fullscreen mode.
  if (this.mode == Modes.NORMAL && Util.isIOS() && Util.isIFrame()) {
    if (this.vrCallback) {
      this.vrCallback();
    } else {
      var url = window.location.href;
      url = Util.appendQueryParameter(url, 'no_fullscreen', 'true');
      url = Util.appendQueryParameter(url, 'start_mode', Modes.VR);
      top.location.href = url;
      return;
    }
  }
  this.enterVRMode_();
};

WebVRManager.prototype.requestFullscreen_ = function() {
  var canvas = document.body;
  //var canvas = this.renderer.domElement;
  if (canvas.requestFullscreen) {
    canvas.requestFullscreen();
  } else if (canvas.mozRequestFullScreen) {
    canvas.mozRequestFullScreen();
  } else if (canvas.webkitRequestFullscreen) {
    canvas.webkitRequestFullscreen();
  } else if (canvas.msRequestFullscreen) {
    canvas.msRequestFullscreen();
  }
};

WebVRManager.prototype.exitFullscreen_ = function() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  }
};

WebVRManager.prototype.onVRDisplayPresentChange_ = function(e) {
  console.log('onVRDisplayPresentChange_', e);
  if (this.hmd.isPresenting) {
    this.setMode_(Modes.VR);
  } else {
    this.setMode_(Modes.NORMAL);
  }
};

WebVRManager.prototype.onVRDisplayDeviceParamsChange_ = function(e) {
  console.log('onVRDisplayDeviceParamsChange_', e);
};

WebVRManager.prototype.onFullscreenChange_ = function(e) {
  // If we leave full-screen, go back to normal mode.
  if (document.webkitFullscreenElement === null ||
      document.mozFullScreenElement === null) {
    this.setMode_(Modes.NORMAL);
  }
};

module.exports = WebVRManager;

},{"./button-manager.js":1,"./emitter.js":2,"./modes.js":3,"./util.js":4}]},{},[5])(5)
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],6:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

var _curve = require('./curve');

var _curve2 = _interopRequireDefault(_curve);

var _fire = require('./fire');

var _fire2 = _interopRequireDefault(_fire);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Balloon = function () {
  function Balloon(scene, loader) {
    _classCallCheck(this, Balloon);

    this.scene = scene;
    this.loader = loader;

    this.balloon = undefined;
    this.line = undefined;
    this.handle = undefined;
    this.rope = new THREE.Group();
    this.toIntersect = [];
    this.flyingObjects = [];
    this.fire = new _fire2.default();

    this.load();
  }

  Balloon.prototype.load = function load() {
    var _this = this;

    this.loader.load('assets/models/balloon/balloon3.json', function (balloon) {
      console.log(balloon);
      _this.balloon = balloon;
      _this.balloon.children[0].geometry.computeFlatVertexNormals();
      _this.balloon.position.set(0, 5, 0);
      _this.scene.add(_this.balloon);
      _this.flyingObjects.push(_this.balloon);
    });
    this.createRope();
    this.createFire();
  };

  Balloon.prototype.createRope = function createRope() {
    var path = new _curve2.default(10);
    var tube = new THREE.TubeGeometry(path, 30, 3, 8, true);
    var material = new THREE.MeshLambertMaterial({ color: 0x000000 });
    var torus = new THREE.TorusGeometry(0.2, 0.05, 64, 32);

    this.line = new THREE.Mesh(tube, material);
    this.line.scale.setScalar(0.01);

    this.handle = new THREE.Mesh(torus, material);
    this.handle.scale.setScalar(0.5);
    this.handle.position.y = -0.1;

    this.rope.add(this.line, this.handle);
    this.rope.position.set(0, 7, 15);

    this.scene.add(this.rope);
    this.toIntersect.push(this.line);
    this.toIntersect.push(this.handle);
    this.flyingObjects.push(this.rope);
  };

  Balloon.prototype.createFire = function createFire() {
    this.fire.init();
    this.fire.position.set(-1, 7, 0);
    this.scene.add(this.fire);
    this.flyingObjects.push(this.fire);
  };

  Balloon.prototype.update = function update(delta, elapsed, t) {
    this.fire.update(delta, elapsed);
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = this.flyingObjects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var object = _step.value;

        object.position.z = 20 * Math.sin(t) + 0;
        object.position.x = 20 * Math.cos(t) + 0;
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    this.rope.position.z = 20 * Math.sin(t) - 0.5;

    // this.fall(delta)
  };

  Balloon.prototype.flyHigher = function flyHigher(delta) {
    this.fire.scale.setScalar(2);
    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
      for (var _iterator2 = this.flyingObjects[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
        var object = _step2.value;

        object.position.y += delta;
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return) {
          _iterator2.return();
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }
  };

  Balloon.prototype.resetPosition = function resetPosition() {
    this.balloon.position.set(0, 5, 0);
    this.rope.position.set(0, 7, 0);
    this.fire.position.set(-1, 10, 0);
    var _iteratorNormalCompletion3 = true;
    var _didIteratorError3 = false;
    var _iteratorError3 = undefined;

    try {
      for (var _iterator3 = this.flyingObjects[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
        var object = _step3.value;

        object.position.y = 10;
      }
    } catch (err) {
      _didIteratorError3 = true;
      _iteratorError3 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion3 && _iterator3.return) {
          _iterator3.return();
        }
      } finally {
        if (_didIteratorError3) {
          throw _iteratorError3;
        }
      }
    }
  };

  Balloon.prototype.remove = function remove() {
    var _iteratorNormalCompletion4 = true;
    var _didIteratorError4 = false;
    var _iteratorError4 = undefined;

    try {
      for (var _iterator4 = this.flyingObjects[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
        var object = _step4.value;

        scene.remove(object);
      }
    } catch (err) {
      _didIteratorError4 = true;
      _iteratorError4 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion4 && _iterator4.return) {
          _iterator4.return();
        }
      } finally {
        if (_didIteratorError4) {
          throw _iteratorError4;
        }
      }
    }
  };

  Balloon.prototype.fall = function fall(delta) {
    this.fire.scale.setScalar(1);
    var _iteratorNormalCompletion5 = true;
    var _didIteratorError5 = false;
    var _iteratorError5 = undefined;

    try {
      for (var _iterator5 = this.flyingObjects[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
        var object = _step5.value;

        object.position.y += delta * -0.2;
      }
    } catch (err) {
      _didIteratorError5 = true;
      _iteratorError5 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion5 && _iterator5.return) {
          _iterator5.return();
        }
      } finally {
        if (_didIteratorError5) {
          throw _iteratorError5;
        }
      }
    }
  };

  Balloon.prototype.getFlyingObjects = function getFlyingObjects() {
    return this.flyingObjects;
  };

  Balloon.prototype.getRope = function getRope() {
    return this.toIntersect;
  };

  return Balloon;
}();

exports.default = Balloon;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./curve":8,"./fire":9}],7:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

var _VRControls2 = require('VRControls');

var _VRControls3 = _interopRequireDefault(_VRControls2);

var _ViveController2 = require('ViveController');

var _ViveController3 = _interopRequireDefault(_ViveController2);

var _OBJLoader2 = require('OBJLoader');

var _OBJLoader3 = _interopRequireDefault(_OBJLoader2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Controllers = function () {
  function Controllers(camera, body, loader, rope) {
    _classCallCheck(this, Controllers);

    this.body = body;
    this.camera = camera;
    this.loader = loader;

    this.textureLoader = new THREE.TextureLoader();
    this.raycaster = new THREE.Raycaster();

    this.viveController1 = undefined;
    this.viveController2 = undefined;

    this.vrControls = new THREE.VRControls(this.camera);
    this.vrControls.standing = true;
    this.tempMatrix = new THREE.Matrix4();

    this.intersected = [];
    this.rope = rope;
    this.isMovingUp = false;

    this.loadViveControllerModels = this.loadViveControllerModels.bind(this);
    this.onTriggerDown = this.onTriggerDown.bind(this);

    // this.init()
  }

  Controllers.prototype.loadViveControllerModels = function loadViveControllerModels() {
    var _this = this;

    this.loader.setPath('assets/models/vive-controller/');
    this.loader.load('vr_controller_vive_1_5.obj', function (object) {
      console.log('loaded controller OBJ');

      _this.textureLoader.setPath('assets/models/vive-controller/');

      var controller = object.children[0];
      controller.material.map = _this.textureLoader.load('onepointfive_texture.png');
      controller.material.specularMap = _this.textureLoader.load('onepointfive_spec.png');

      _this.viveController1.add(object.clone());
      _this.viveController2.add(object.clone());
    });
  };

  Controllers.prototype.init = function init() {

    this.viveController1 = new THREE.ViveController(0);
    this.viveController1.standingMatrix = this.vrControls.getStandingMatrix();
    this.viveController1.addEventListener('triggerdown', this.onTriggerDown);
    this.viveController1.addEventListener('triggerup', this.onTriggerUp);
    this.body.add(this.viveController1);

    this.viveController2 = new THREE.ViveController(1);
    this.viveController2.standingMatrix = this.vrControls.getStandingMatrix();
    this.viveController2.addEventListener('triggerdown', this.onTriggerDown);
    this.viveController2.addEventListener('triggerup', this.onTriggerUp);
    this.body.add(this.viveController2);

    this.loadViveControllerModels();

    // showControllerGuideRays()
  };

  Controllers.prototype.update = function update(delta, elapsed, t) {
    this.vrControls.update(delta);
    this.cleanIntersected();
    if (this.viveController1) {
      this.viveController1.update();
      this.intersectObjects(this.viveController1);
    }
    if (this.viveController2) {
      this.viveController2.update();
      this.intersectObjects(this.viveController2);
    }
  };

  Controllers.prototype.onTriggerDown = function onTriggerDown(event) {
    console.log('event trigger down', event);
    var controller = event.target;
    var intersections = this.getIntersections(controller);
    if (intersections.length > 0) {
      this.isMovingUp = true;
    }
  };

  Controllers.prototype.onTriggerUp = function onTriggerUp(event) {
    console.log('event trigger up');
    this.isMovingUp = false;
  };

  Controllers.prototype.getIntersections = function getIntersections(controller) {
    this.tempMatrix.identity().extractRotation(controller.matrixWorld);
    this.raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);
    this.raycaster.ray.direction.set(0, 0, -1).applyMatrix4(this.tempMatrix);
    return this.raycaster.intersectObjects(this.rope);
  };

  Controllers.prototype.intersectObjects = function intersectObjects(controller) {
    // Do not highlight when already selected
    if (controller.userData.selected !== undefined) return;
    var intersections = this.getIntersections(controller);
    if (intersections.length > 0) {
      var intersection = intersections[0];
      var object = intersection.object;
      object.material.emissive.r = 1;
      this.intersected.push(object);
    }
  };

  Controllers.prototype.cleanIntersected = function cleanIntersected() {
    while (this.intersected.length) {
      var object = this.intersected.pop();
      object.material.emissive.r = 0;
    }
  };

  Controllers.prototype.getMovingPosition = function getMovingPosition() {
    console.log('ismovingupstatus from controls', this.isMovingUp);
    return this.isMovingUp;
  };

  return Controllers;
}();

exports.default = Controllers;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"OBJLoader":3,"VRControls":1,"ViveController":4}],8:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Curve = function (_THREE$Curve) {
  _inherits(Curve, _THREE$Curve);

  function Curve() {
    _classCallCheck(this, Curve);

    return _possibleConstructorReturn(this, _THREE$Curve.call(this));
  }

  Curve.prototype.getPoint = function getPoint(t) {
    var tx = 0;
    var ty = t * 200;
    var tz = 0;
    return new THREE.Vector3(tx, ty, tz).multiplyScalar(1);
  };

  return Curve;
}(THREE.Curve);

exports.default = Curve;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],9:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Fire = function (_THREE$Object3D) {
  _inherits(Fire, _THREE$Object3D);

  function Fire() {
    _classCallCheck(this, Fire);

    var _this = _possibleConstructorReturn(this, _THREE$Object3D.call(this));

    _this.numParticles = 1000;

    _this.opts = {
      sparkLifecycle: 0.7,
      sparkStartSize: 10,
      sparkEndSize: 20,
      sparkDistanceScale: 1.5 * 1000 / window.innerHeight,

      flameMinHeight: 0.02,
      flameMaxHeight: 0.25,
      flamePeriod: 0.5,
      windStrength: 0.14,
      windFrequency: 0.5,

      color: 0xfcc648,
      endColor: 0xc0561c,

      opacity: 0.7,
      gravity: 0.2,

      // static - set at start
      baseWidth: 0.8 // angle - multiple of PI
    };

    var textureLoader = new THREE.TextureLoader();
    textureLoader.load('https://s3-us-west-2.amazonaws.com/s.cdpn.io/126747/snowflake_16x16.png', function (texture) {
      _this.texture = texture;
      _this.system.material.uniforms.texture.value = texture;
    });
    return _this;
  }

  Fire.prototype.init = function init() {
    // make sure gravity points in world Y
    // http://stackoverflow.com/questions/35641875/three-js-how-to-find-world-orientation-vector-of-objects-local-up-vector
    var v3 = new THREE.Vector3();
    v3.copy(this.up).applyQuaternion(this.getWorldQuaternion().inverse());

    var systemGeometry = new THREE.BufferGeometry();
    var systemMaterial = new THREE.ShaderMaterial({
      uniforms: {
        up: { type: 'v3', value: v3 },
        gravity: { type: 'f', value: this.opts.gravity },
        elapsedTime: { type: 'f', value: 0.0 },
        numParticles: { type: 'f', value: this.numParticles },
        color: { type: 'c', value: new THREE.Color(this.opts.color) },
        endColor: { type: 'c', value: new THREE.Color(this.opts.endColor) },
        flameMaxHeight: { type: 'f', value: this.opts.flameMaxHeight },
        flameMinHeight: { type: 'f', value: this.opts.flameMinHeight },
        flamePeriod: { type: 'f', value: this.opts.flamePeriod },
        windStrength: { type: 'f', value: this.opts.windStrength },
        windFrequency: { type: 'f', value: this.opts.windFrequency },
        sparkLifecycle: { type: 'f', value: this.opts.sparkLifecycle },
        sparkDistanceScale: { type: 'f', value: this.opts.sparkDistanceScale },
        sparkStartSize: { type: 'f', value: this.opts.sparkStartSize },
        sparkEndSize: { type: 'f', value: this.opts.sparkEndSize },
        opacity: { type: 'f', value: this.opts.opacity },
        texture: { type: 't', value: null }
      },
      transparent: true,
      // depthWrite: false,
      depthTest: false,
      // NOTE: don't use additive blending for light backgrounds
      // http://answers.unity3d.com/questions/573717/particle-effects-against-light-backgrounds.html
      // blending: THREE.AdditiveBlending,
      vertexShader: '\n        uniform float elapsedTime;\n        uniform float numParticles;\n        uniform float gravity;\n        uniform vec3 up;\n        uniform float sparkLifecycle;\n        uniform float sparkDistanceScale;\n        uniform float sparkStartSize;\n        uniform float sparkEndSize;\n        uniform float flameMaxHeight;\n        uniform float flameMinHeight;\n        uniform float flamePeriod;\n        uniform float windStrength;\n        uniform float windFrequency;\n        attribute vec3 direction;\n        attribute float uniqueness;\n        attribute float particleIndex;\n        #define PI 3.141592653589793238462643383279\n        varying float vTime;\n        void main( void ) {\n          // unique duration\n          float duration = sparkLifecycle + sparkLifecycle * uniqueness;\n          // make time loop\n          float particleOffset = (particleIndex / numParticles * duration);\n          float time = mod(elapsedTime + particleOffset, duration);\n          // store time as 0-1 for fragment shader\n          vTime = time / duration;\n          // apply "gravity" to fire\n          vec3 vGravity = up * gravity * pow(vTime, 2.0);\n          // move in direction based on elapsed time\n          float flameHeight = mix(flameMinHeight, flameMaxHeight, uniqueness);\n          vec3 vDistance = flameHeight * direction * vTime;\n          // close flame at top (0.5 is fully closed)\n          vDistance.xz *= cos(mix(0.0, PI * flamePeriod, vTime));\n          // apply some random horizonal wind\n          vec3 vWind = sin((elapsedTime + vTime * uniqueness) * windFrequency * uniqueness) * cross(up, direction) * windStrength * uniqueness * vTime;\n          // add all forces to get final position for this frame\n          vec3 pos = position + vDistance + vGravity + vWind;\n          // Set size based on frame and distance\n          vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n          gl_PointSize = mix(sparkStartSize, sparkEndSize, vTime);\n          gl_PointSize = gl_PointSize * (sparkDistanceScale / length(mvPosition.xyz));\n          // project position on screen\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n        }\n      ',
      fragmentShader: '\n        uniform vec3 color;\n        uniform vec3 endColor;\n        uniform float opacity;\n        uniform sampler2D texture;\n        varying float vTime;\n        void main() {\n          vec4 texColor = texture2D(texture, gl_PointCoord);\n          vec4 startColor = vec4(color, opacity);\n          vec4 endColor = vec4(endColor, 0.0);\n          gl_FragColor = texColor * mix(startColor, endColor, vTime);\n        }\n      '
    });

    // all flames start at 0,0,0
    var positions = new Float32Array(this.numParticles * 3);
    for (var i = 0; i < positions.length; i += 3) {
      positions[i] = 0;
    }

    var direction = new Float32Array(this.numParticles * 3);
    for (var _i = 0; _i < direction.length; _i += 3) {
      var phi = this.randCenter(Math.PI * this.opts.baseWidth);
      var theta = this.randCenter(Math.PI);
      // create normal vector in random direction
      var sphereCoord = THREE.Spherical(1, phi, theta);

      var v = new THREE.Vector3();
      v.setFromSpherical(sphereCoord);
      direction[_i] = v.x;
      direction[_i + 1] = v.y;
      direction[_i + 2] = v.z;
    }

    // push some uniqueness - because entropy...
    var uniqueness = new Float32Array(this.numParticles);
    for (var _i2 = 0; _i2 < this.numParticles; _i2++) {
      uniqueness[_i2] = Math.random();
    }

    // remember particle index
    var particleIndex = new Float32Array(this.numParticles);
    for (var _i3 = 0; _i3 < this.numParticles; _i3++) {
      particleIndex[_i3] = _i3;
    }

    systemGeometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));
    systemGeometry.addAttribute('direction', new THREE.BufferAttribute(direction, 3));
    systemGeometry.addAttribute('uniqueness', new THREE.BufferAttribute(uniqueness, 1));
    systemGeometry.addAttribute('particleIndex', new THREE.BufferAttribute(particleIndex, 1));

    systemGeometry.computeBoundingSphere();
    this.system = new THREE.Points(systemGeometry, systemMaterial);

    this.add(this.system);

    this.system.renderOrder = 2;
  };

  Fire.prototype.update = function update(delta, elapsed) {
    this.system.material.uniforms.elapsedTime.value = elapsed;

    var up = new THREE.Vector3();
    up.copy(this.up).applyQuaternion(this.getWorldQuaternion().inverse());
    this.system.material.uniforms.up.value = up;
  };

  Fire.prototype.updateOne = function updateOne(opt) {
    this.system.material.uniforms[opt].value = this.opts[opt];
  };

  Fire.prototype.updateColor = function updateColor(opt) {
    this.system.material.uniforms[opt].value = new THREE.Color(this.opts[opt]);
  };

  Fire.prototype.randCenter = function randCenter(v) {
    return v * (Math.random() - 0.5);
  };

  return Fire;
}(THREE.Object3D);

exports.default = Fire;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],10:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Flamingo = function () {
  function Flamingo(scene, loader) {
    _classCallCheck(this, Flamingo);

    this.scene = scene;
    this.loader = loader;

    this.flamingo = undefined;
    this.mesh = undefined;
    this.mixer = undefined;
    this.animationClip = undefined;
    this.animationAction = undefined;

    this.load();
  }

  Flamingo.prototype.load = function load() {
    var _this = this;

    this.loader.load('assets/models/flamingo/flamingo.js', function (geometry, materials) {
      _this.mesh = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({
        vertexColors: THREE.FaceColors,
        morphTargets: true
      }));
      _this.mesh.scale.setScalar(0.01);
      _this.mesh.castShadow = true;

      _this.flamingo = new THREE.Object3D();
      _this.flamingo.add(_this.mesh);
      _this.flamingo.position.y = 5;
      _this.flamingo.position.z = -30;
      _this.scene.add(_this.flamingo);

      _this.initAnimation(geometry);
    });
  };

  Flamingo.prototype.initAnimation = function initAnimation(geometry) {
    this.mixer = new THREE.AnimationMixer(this.mesh);
    this.animationClip = THREE.AnimationClip.CreateFromMorphTargetSequence('fly', geometry.morphTargets, 60);
    this.animationAction = this.mixer.clipAction(this.animationClip).setDuration(1).play();
  };

  Flamingo.prototype.update = function update(delta, elapsed, t) {
    if (!this.mixer) {
      return;
    }
    this.mixer.update(delta);
    this.flamingo.position.z += delta;

    if (this.flamingo.position.z >= 50) {
      this.flamingo.position.z = -30;
    }

    // this.flamingo.rotation.y += delta * -0.05
    // this.flamingo.position.z = 10*Math.sin(this.t) + 0
    // this.flamingo.position.x = 10*Math.cos(this.t) + 0
  };

  return Flamingo;
}();

exports.default = Flamingo;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],11:[function(require,module,exports){
(function (global){
'use strict';

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

var _query = require('./utils/query');

var _query2 = _interopRequireDefault(_query);

var _world = require('./world');

var _world2 = _interopRequireDefault(_world);

var _flamingo = require('./flamingo');

var _flamingo2 = _interopRequireDefault(_flamingo);

var _balloon = require('./balloon');

var _balloon2 = _interopRequireDefault(_balloon);

var _controllers = require('./controllers');

var _controllers2 = _interopRequireDefault(_controllers);

var _particleSystem = require('./particle-system');

var _particleSystem2 = _interopRequireDefault(_particleSystem);

var _OBJLoader2 = require('OBJLoader');

var _OBJLoader3 = _interopRequireDefault(_OBJLoader2);

var _VREffect2 = require('VREffect');

var _VREffect3 = _interopRequireDefault(_VREffect2);

var _webvrBoilerplate = require('webvr-boilerplate');

var _webvrBoilerplate2 = _interopRequireDefault(_webvrBoilerplate);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var clock = new THREE.Clock();

// Import WebVRManager npm module


// load shimmed plugins - access on THREE namespace


var scene = void 0,
    camera = void 0,
    HEIGHT = void 0,
    WIDTH = void 0,
    renderer = void 0,
    container = void 0;
var vrEffect = void 0,
    vrManager = void 0,
    vrDisplay = void 0;

var objectLoader = new THREE.ObjectLoader();
var OBJLoader = new THREE.OBJLoader();
var jsonLoader = new THREE.JSONLoader();
var body = void 0;
var world = void 0,
    balloon = void 0;
var viveControllers = void 0;
var mixer = void 0;
var t = 0;
var particleSystem = void 0;
var raycaster = new THREE.Raycaster();
var mouse = new THREE.Vector2();
var objects = [];
var intersected = [];
var isMovingUp = false;
var btnFly = void 0;
var tempMatrix = new THREE.Matrix4();
var controlsEnabled = false;

var updateObjects = [];

function createScene() {
  HEIGHT = window.innerHeight;
  WIDTH = window.innerWidth;

  // Create the scene
  scene = new THREE.Scene();

  // Create the camera
  var aspectRatio = WIDTH / HEIGHT;
  var fieldOfView = 60;
  var nearPlane = 0.1;
  var farPlane = 50;
  camera = new THREE.PerspectiveCamera(fieldOfView, aspectRatio, nearPlane, farPlane);

  body = new THREE.Object3D();
  body.add(camera);
  body.position.x = 0;
  body.position.y = 5;
  body.position.z = 0;
  scene.add(body);

  // Create the renderer
  renderer = new THREE.WebGLRenderer({
    // Allow transparency to show the gradient background
    // we defined in the CSS
    alpha: true,
    // Activate the anti-aliasing this is less performant,
    // but, as our project is low-poly based, it should be fine :)
    antialias: true
  });

  renderer.setPixelRatio(window.devicePixelRatio);

  // Define the size of the renderer in this case,
  // it will fill the entire screen
  renderer.setSize(WIDTH, HEIGHT);

  // Enable shadow rendering
  renderer.shadowMap.enabled = true;
  renderer.shadowMap.type = THREE.PCFSoftShadowMap;

  // Add the DOM element of the renderer to the
  // container we created in the HTML
  container = document.getElementById('world');
  container.appendChild(renderer.domElement);
}

function handleWindowResize() {
  // update height and width of the renderer and the camera
  HEIGHT = window.innerHeight;
  WIDTH = window.innerWidth;
  vrEffect.setSize(WIDTH, HEIGHT);
  renderer.setSize(WIDTH, HEIGHT);
  camera.aspect = WIDTH / HEIGHT;
  camera.updateProjectionMatrix();
}

function createLights() {
  // A directional light shines from a specific direction.
  // It acts like the sun, that means that all the rays produced are parallel.
  var shadowLight = new THREE.DirectionalLight(0xffffff, 0.5);

  // Set the direction of the light
  shadowLight.position.set(1, 2, -1);
  shadowLight.position.normalize();

  // Allow shadow casting
  shadowLight.castShadow = true;

  // define the visible area of the projected shadow
  shadowLight.shadow.camera.left = -10;
  shadowLight.shadow.camera.right = 10;
  shadowLight.shadow.camera.top = 10;
  shadowLight.shadow.camera.bottom = -10;
  shadowLight.shadow.camera.near = -10;
  shadowLight.shadow.camera.far = 10;

  // debug light
  if (_query2.default.debug) {
    scene.add(new THREE.CameraHelper(shadowLight.shadow.camera));
  }

  // define the resolution of the shadow the higher the better,
  // but also the more expensive and less performant
  shadowLight.shadow.mapSize.width = 1024 * 2;
  shadowLight.shadow.mapSize.height = 1024 * 2;

  // an ambient light modifies the global color of a scene and makes the shadows softer
  var ambientLightPink = new THREE.AmbientLight(0xffdaf8, 0.2);
  var ambientLight = new THREE.AmbientLight(0xffffff, 1);

  scene.add(shadowLight);
  scene.add(ambientLight);
}

function createShapes() {
  var geometries = [new THREE.BoxGeometry(0.2, 0.2, 0.2), new THREE.ConeGeometry(0.2, 0.2, 64), new THREE.CylinderGeometry(0.2, 0.2, 0.2, 64), new THREE.IcosahedronGeometry(0.2, 3), new THREE.TorusGeometry(0.2, 0.04, 64, 32)];
  for (var i = 0; i < 50; i++) {
    var geometry = geometries[Math.floor(Math.random() * geometries.length)];
    var material = new THREE.MeshStandardMaterial({
      color: Math.random() * 0xffffff,
      roughness: 0.7,
      metalness: 0.0
    });
    var object = new THREE.Mesh(geometry, material);
    object.position.x = Math.random() * 4 - 2;
    object.position.y = Math.random() * 2;
    object.position.z = Math.random() * 4 - 2;
    object.rotation.x = Math.random() * 2 * Math.PI;
    object.rotation.y = Math.random() * 2 * Math.PI;
    object.rotation.z = Math.random() * 2 * Math.PI;
    object.scale.setScalar(Math.random() + 0.5);
    object.castShadow = true;
    object.receiveShadow = true;
    scene.add(object);
  }
}

function createParticles() {
  particleSystem = new _particleSystem2.default();
  particleSystem.mesh.position.y = -2;
  scene.add(particleSystem.mesh);
}

function moveObjectsDown(delta) {}

function updateDayScene() {
  if (updateDayScene.done) return;
  scene.fog = new THREE.FogExp2(0xffffff, 0.035);
  updateDayScene.done = true;
}

function updateVRScene() {
  if (updateVRScene.done) return;
  renderer.setClearColor(0xceefff, 1);
  scene.fog = new THREE.FogExp2(0xceefff, 0.035);
  updateVRScene.done = true;
}

function loop() {
  var delta = clock.getDelta();
  var elapsed = clock.getElapsedTime();
  t += 0.001;

  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = updateObjects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var object = _step.value;

      object.update(delta, elapsed, t);
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  particleSystem.update(delta);

  body.position.z = 20 * Math.sin(t) + 0;
  body.position.x = 20 * Math.cos(t) + 0;

  if (vrEffect.isPresenting === false) {
    updateDayScene();
    body.position.y += delta * -0.2;
    balloon.fall(delta);
  }

  if (vrEffect.isPresenting === true && controlsEnabled === true) {
    updateVRScene();
    if (viveControllers.getMovingPosition() === false) {
      body.position.y += delta * -0.2;
      balloon.fall(delta);
    }
  }

  if (vrEffect.isPresenting === true && controlsEnabled === false) {
    updateVRScene();
    body.position.y = 15;
    body.position.x = 15;
    body.position.z = 15;
    balloon.resetPosition();
    // body.position.y += delta * -0.2
    // balloon.fall(delta)
  }

  if (isMovingUp === true || viveControllers.getMovingPosition() === true) {
    balloon.flyHigher(delta);
    body.position.y += delta;
  }

  // Render the scene through the vrManager.
  vrManager.render(scene, camera, delta);

  // call the loop function again
  vrDisplay.requestAnimationFrame(loop);
}

function init() {

  // set up the scene, the camera and the renderer
  createScene();

  // add the lights
  createLights();

  world = new _world2.default(scene, objectLoader);
  balloon = new _balloon2.default(scene, objectLoader);
  viveControllers = new _controllers2.default(camera, body, OBJLoader, balloon.getRope());
  updateObjects.push(world, balloon, viveControllers);
  updateObjects.push(new _flamingo2.default(scene, jsonLoader));

  //add objects
  createParticles();
  createShapes();

  // // Apply VR headset positional data to camera.

  // Apply VR stereo rendering to renderer.
  vrEffect = new THREE.VREffect(renderer);
  vrEffect.setSize(window.innerWidth, window.innerHeight);

  // Create a VR vrManager helper to enter and exit VR mode.
  var params = {
    hideButton: false, // Default: false.
    isUndistorted: false // Default: false.
  };
  vrManager = new _webvrBoilerplate2.default(renderer, vrEffect, params);

  btnFly = document.getElementById('js-btn-fly');

  addEventListeners();

  // For high end VR devices like Vive and Oculus, take into account the stage
  // parameters provided.
  setupStage();
}

function addEventListeners() {
  document.addEventListener('mousedown', onDocumentMouseDown, false);
  document.addEventListener('mouseup', onDocumentMouseUp, false);
  // Listen to the screen: if the user resizes it
  // we have to update the camera and the renderer size
  window.addEventListener('resize', handleWindowResize, false);
  window.addEventListener('vrdisplaypresentchange', handleWindowResize, true);
  window.addEventListener('gamepadconnected', initControllers, false);
  window.addEventListener('gamepaddisconnected', disconnect, false);
  btnFly.addEventListener('mousedown', moveBalloonUp, false);
}

function initControllers(event) {
  controlsEnabled = true;
  console.log('controllers initialized');
  viveControllers.init();
}

function disconnect() {
  console.log('gamepads disconnected');
}
// Add mouse events to test the balloon moving up
function onDocumentMouseDown(event) {
  event.preventDefault();

  mouse.x = event.clientX / renderer.domElement.clientWidth * 2 - 1;
  mouse.y = -(event.clientY / renderer.domElement.clientHeight) * 2 + 1;

  raycaster.setFromCamera(mouse, camera);
  var intersects = raycaster.intersectObjects(balloon.getFlyingObjects(), true);

  if (intersects.length > 0) {
    moveBalloonUp();
  }
}

function onDocumentMouseUp(event) {
  event.preventDefault();
  isMovingUp = false;
}

function moveBalloonUp() {
  isMovingUp = true;
}

// Get the HMD, and if we're dealing with something that specifies
// stageParameters, rearrange the scene.
function setupStage() {
  navigator.getVRDisplays().then(function (displays) {
    if (displays.length > 0) {
      vrDisplay = displays[0];
      if (vrDisplay.stageParameters) {
        setStageDimensions(vrDisplay.stageParameters);
      }
      // start a loop that will update the objects' positions
      // and render the scene on each frame
      vrDisplay.requestAnimationFrame(loop);
    }
  });
}

function setStageDimensions(stage) {
  // Size the skybox according to the size of the actual stage.
  // var geometry = new THREE.BoxGeometry(stage.sizeX, boxSize, stage.sizeZ);
}

window.addEventListener('load', init, false);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./balloon":6,"./controllers":7,"./flamingo":10,"./particle-system":12,"./utils/query":13,"./world":14,"OBJLoader":3,"VREffect":2,"webvr-boilerplate":5}],12:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// import particlesVS from './shaders/particles-vs.glsl'
// import particlesFS from './shaders/particles-fs.glsl'

var WHITE = {
  mainColor: 0xeeeeee,
  mainEmissive: 0,
  secondaryColor: 0xffffff,
  secondaryEmissive: 0,
  detailColor: 0x999999,
  detailEmissive: 0
};

var ParticleSystem = function () {
  function ParticleSystem() {
    _classCallCheck(this, ParticleSystem);

    this.time = 0.0;
    var triangles = 1;
    var instances = 7000;
    var geometry = new THREE.InstancedBufferGeometry();

    var vertices = new THREE.BufferAttribute(new Float32Array(triangles * 3 * 3), 3);
    var unit = 0.055;
    vertices.setXYZ(0, unit, -unit, 0);
    vertices.setXYZ(1, -unit, unit, 0);
    vertices.setXYZ(2, 0, 0, unit);
    geometry.addAttribute('position', vertices);

    var offsets = new THREE.InstancedBufferAttribute(new Float32Array(instances * 3), 3, 1);
    var dist = 180;
    for (var i = 0, ul = offsets.count; i < ul; i++) {
      offsets.setXYZ(i, (Math.random() - 0.5) * dist, (Math.random() - 0.5) * dist, (Math.random() - 0.5) * dist);
    }
    geometry.addAttribute('offset', offsets);

    var colors = new THREE.InstancedBufferAttribute(new Float32Array(instances * 4), 4, 1);

    var threeColor = new THREE.Color();
    for (var _i = 0, _ul = colors.count; _i < _ul; _i++) {
      var c = threeColor.setHex(WHITE.mainColor);
      colors.setXYZW(_i, c.r, c.g, c.b, 1);
    }
    geometry.addAttribute('color', colors);

    var timeOffsets = new THREE.InstancedBufferAttribute(new Float32Array(instances * 1), 1, 1);

    for (var _i2 = 0, _ul2 = timeOffsets.count; _i2 < _ul2; _i2++) {
      timeOffsets.setX(_i2, Math.random());
    }
    geometry.addAttribute('timeOffset', timeOffsets);

    var vector = new THREE.Vector4();
    var orientationsStart = new THREE.InstancedBufferAttribute(new Float32Array(instances * 4), 4, 1);
    for (var _i3 = 0, _ul3 = orientationsStart.count; _i3 < _ul3; _i3++) {
      vector.set(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1);
      vector.normalize();
      orientationsStart.setXYZW(_i3, vector.x, vector.y, vector.z, vector.w);
    }
    geometry.addAttribute('orientationStart', orientationsStart);

    var orientationsEnd = new THREE.InstancedBufferAttribute(new Float32Array(instances * 4), 4, 1);
    for (var _i4 = 0, _ul4 = orientationsEnd.count; _i4 < _ul4; _i4++) {
      vector.set(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1);
      vector.normalize();
      orientationsEnd.setXYZW(_i4, vector.x, vector.y, vector.z, vector.w);
    }
    geometry.addAttribute('orientationEnd', orientationsEnd);

    var material = new THREE.RawShaderMaterial({
      uniforms: {
        time: { value: 1.0 },
        sineTime: { value: 1.0 }
      },
      vertexShader: '\n        precision highp float;\n        uniform float time;\n        uniform mat4 modelViewMatrix;\n        uniform mat4 projectionMatrix;\n        attribute vec3 position;\n        attribute vec3 offset;\n        attribute vec4 color;\n        attribute vec4 orientationStart;\n        attribute vec4 orientationEnd;\n        attribute float timeOffset;\n        varying vec4 vColor;\n        varying float lifeProgress;\n\n        void main(){\n\n          vec3 vPosition = offset;\n\n          lifeProgress = mod(time+timeOffset,1.0);\n\n          vPosition = offset * lifeProgress + position;\n          vec4 orientation = normalize(mix(orientationStart, orientationEnd, lifeProgress));\n          vec3 vcV = cross(orientation.xyz, vPosition);\n          //orientation.w *= time*5.0;\n          vPosition = vcV * (2.0 * orientation.w) + (cross(orientation.xyz, vcV) * 2.0 + vPosition);\n          vColor = color;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( vPosition, 1.0 );\n        }\n        ',
      fragmentShader: '\n      precision highp float;\n      uniform float time;\n      varying vec4 vColor;\n      varying float lifeProgress;\n\n      void main() {\n        float depth = gl_FragCoord.z / gl_FragCoord.w / 5.0;\n        float opacity = clamp(0.2, 1.0, depth);\n        vec4 color = vColor;\n        color.a = sin(lifeProgress*100.0)*opacity;\n        gl_FragColor = color;\n      }\n      ',
      side: THREE.DoubleSide,
      transparent: true
    });

    var mesh = new THREE.Mesh(geometry, material);
    mesh.frustumCulled = false;
    this.mesh = mesh;
  }

  ParticleSystem.prototype.update = function update(dt) {
    this.time += 0.0001;
    /* if (this.time > 0.1) {
      this.time -= 0.1
    } */

    this.mesh.material.uniforms.time.value = Math.sin(this.time);
  };

  return ParticleSystem;
}();

exports.default = ParticleSystem;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],13:[function(require,module,exports){
'use strict';

module.exports = qs();

function qs() {
  var obj = {};
  var query = window.location.href.substring(window.location.href.indexOf('?') + 1, window.location.href.length);

  if (query.indexOf('#') !== -1) {
    query = query.substring(0, query.indexOf('#'));
  }

  var vars = query.split('&');
  for (var i = 0; i < vars.length; i++) {
    var pair = vars[i].split('=');
    var key = decodeURIComponent(pair[0]);
    var val = decodeURIComponent(pair[1]);
    obj[key] = val || true; // true so "?x"; if( query.x ){}
  }

  return obj;
}

},{}],14:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _three = (typeof window !== "undefined" ? window['THREE'] : typeof global !== "undefined" ? global['THREE'] : null);

var THREE = _interopRequireWildcard(_three);

var _curve = require('./curve');

var _curve2 = _interopRequireDefault(_curve);

var _fire = require('./fire');

var _fire2 = _interopRequireDefault(_fire);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var World = function () {
  function World(scene, loader) {
    _classCallCheck(this, World);

    this.scene = scene;
    this.loader = loader;
    this.wings = undefined;
    this.pivot = undefined;

    this.load();
  }

  World.prototype.load = function load() {
    var _this = this;

    this.loader.load('assets/models/island/skyisland3.json', function (island) {
      for (var i = 0; i < island.children.length; i++) {
        if (island.children[i].material) {
          if (island.children[i].material.materials) {
            island.children[i].material.materials.forEach(function (mat) {
              mat.side = THREE.DoubleSide;
            });
          } else {
            island.children[i].material.side = THREE.DoubleSide;
          }
        }
        if (island.children[i].geometry) {
          island.children[i].geometry.computeFlatVertexNormals();
        }
      }
      _this.scene.add(island);
    });

    this.loader.load('assets/models/windmill/mill2.json', function (windmill) {
      for (var i = 0; i < windmill.children.length; i++) {
        if (windmill.children[i].material) {
          if (windmill.children[i].material.materials) {
            windmill.children[i].material.materials.forEach(function (mat) {
              mat.side = THREE.DoubleSide;
            });
          }
        }
        if (windmill.children[i].geometry) {
          windmill.children[i].geometry.computeFlatVertexNormals();
        }
      }
      windmill.position.set(-5.5, 0, -4.8);
      _this.scene.add(windmill);
    });
    this.loader.load('../../../assets/models/windmill/wings4.json', function (wings) {
      _this.wings = wings;
      _this.wings.position.set(-5.8, 3.5, -4.8);
      _this.scene.add(_this.wings);
      for (var i = 0; i < _this.wings.children.length; i++) {
        if (_this.wings.children[i].geometry) {
          _this.wings.children[i].geometry.computeFlatVertexNormals();
        }
      }
    });
  };

  World.prototype.update = function update(delta, elapsed, t) {
    if (this.wings) this.wings.rotation.x += delta;
  };

  return World;
}();

exports.default = World;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./curve":8,"./fire":9}]},{},[11])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvdGhyZWUvZXhhbXBsZXMvanMvY29udHJvbHMvVlJDb250cm9scy5qcyIsIm5vZGVfbW9kdWxlcy90aHJlZS9leGFtcGxlcy9qcy9lZmZlY3RzL1ZSRWZmZWN0LmpzIiwibm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzL2xvYWRlcnMvT0JKTG9hZGVyLmpzIiwibm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzL3ZyL1ZpdmVDb250cm9sbGVyLmpzIiwibm9kZV9tb2R1bGVzL3dlYnZyLWJvaWxlcnBsYXRlL2J1aWxkL3dlYnZyLW1hbmFnZXIuanMiLCJzcmMvanMvYmFsbG9vbi5qcyIsInNyYy9qcy9jb250cm9sbGVycy5qcyIsInNyYy9qcy9jdXJ2ZS5qcyIsInNyYy9qcy9maXJlLmpzIiwic3JjL2pzL2ZsYW1pbmdvLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvcGFydGljbGUtc3lzdGVtLmpzIiwic3JjL2pzL3V0aWxzL3F1ZXJ5LmpzIiwic3JjL2pzL3dvcmxkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3ZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3Z1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QixHQUFsQixDQUFzQixDQUFDLEdBQXZCLEVBQTRCLENBQTVCLEVBQStCLENBQUMsR0FBaEM7QUFDQSxZQUFLLEtBQUwsQ0FBVyxHQUFYLENBQWUsUUFBZjtBQUNELEtBakJIO0FBbUJBLFNBQUssTUFBTCxDQUFZLElBQVosQ0FDRSw2Q0FERixFQUVFLFVBQUUsS0FBRixFQUFhO0FBQ1gsWUFBSyxLQUFMLEdBQWEsS0FBYjtBQUNBLFlBQUssS0FBTCxDQUFXLFFBQVgsQ0FBb0IsR0FBcEIsQ0FBd0IsQ0FBQyxHQUF6QixFQUE4QixHQUE5QixFQUFtQyxDQUFDLEdBQXBDO0FBQ0EsWUFBSyxLQUFMLENBQVcsR0FBWCxDQUFlLE1BQUssS0FBcEI7QUFDQSxXQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksTUFBSyxLQUFMLENBQVcsUUFBWCxDQUFvQixNQUF4QyxFQUFnRCxHQUFoRCxFQUFxRDtBQUNuRCxZQUFJLE1BQUssS0FBTCxDQUFXLFFBQVgsQ0FBb0IsQ0FBcEIsRUFBdUIsUUFBM0IsRUFBcUM7QUFDbkMsZ0JBQUssS0FBTCxDQUFXLFFBQVgsQ0FBb0IsQ0FBcEIsRUFBdUIsUUFBdkIsQ0FBZ0Msd0JBQWhDO0FBQ0Q7QUFDRjtBQUNGLEtBWEg7QUFhRCxHOztrQkFFRCxNLG1CQUFRLEssRUFBTyxPLEVBQVMsQyxFQUFHO0FBQ3pCLFFBQUcsS0FBSyxLQUFSLEVBQWUsS0FBSyxLQUFMLENBQVcsUUFBWCxDQUFvQixDQUFwQixJQUF5QixLQUF6QjtBQUNoQixHOzs7OztrQkF0RWtCLEsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBAYXV0aG9yIGRtYXJjb3MgLyBodHRwczovL2dpdGh1Yi5jb20vZG1hcmNvc1xuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbVxuICovXG5cblRIUkVFLlZSQ29udHJvbHMgPSBmdW5jdGlvbiAoIG9iamVjdCwgb25FcnJvciApIHtcblxuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdHZhciB2ckRpc3BsYXksIHZyRGlzcGxheXM7XG5cblx0dmFyIHN0YW5kaW5nTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcblxuXHR2YXIgZnJhbWVEYXRhID0gbnVsbDtcblxuXHRpZiAoICdWUkZyYW1lRGF0YScgaW4gd2luZG93ICkge1xuXG5cdFx0ZnJhbWVEYXRhID0gbmV3IFZSRnJhbWVEYXRhKCk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdvdFZSRGlzcGxheXMoIGRpc3BsYXlzICkge1xuXG5cdFx0dnJEaXNwbGF5cyA9IGRpc3BsYXlzO1xuXG5cdFx0aWYgKCBkaXNwbGF5cy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHR2ckRpc3BsYXkgPSBkaXNwbGF5c1sgMCBdO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0aWYgKCBvbkVycm9yICkgb25FcnJvciggJ1ZSIGlucHV0IG5vdCBhdmFpbGFibGUuJyApO1xuXG5cdFx0fVxuXG5cdH1cblxuXHRpZiAoIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzICkge1xuXG5cdFx0bmF2aWdhdG9yLmdldFZSRGlzcGxheXMoKS50aGVuKCBnb3RWUkRpc3BsYXlzICkuY2F0Y2ggKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSQ29udHJvbHM6IFVuYWJsZSB0byBnZXQgVlIgRGlzcGxheXMnICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8vIHRoZSBSaWZ0IFNESyByZXR1cm5zIHRoZSBwb3NpdGlvbiBpbiBtZXRlcnNcblx0Ly8gdGhpcyBzY2FsZSBmYWN0b3IgYWxsb3dzIHRoZSB1c2VyIHRvIGRlZmluZSBob3cgbWV0ZXJzXG5cdC8vIGFyZSBjb252ZXJ0ZWQgdG8gc2NlbmUgdW5pdHMuXG5cblx0dGhpcy5zY2FsZSA9IDE7XG5cblx0Ly8gSWYgdHJ1ZSB3aWxsIHVzZSBcInN0YW5kaW5nIHNwYWNlXCIgY29vcmRpbmF0ZSBzeXN0ZW0gd2hlcmUgeT0wIGlzIHRoZVxuXHQvLyBmbG9vciBhbmQgeD0wLCB6PTAgaXMgdGhlIGNlbnRlciBvZiB0aGUgcm9vbS5cblx0dGhpcy5zdGFuZGluZyA9IGZhbHNlO1xuXG5cdC8vIERpc3RhbmNlIGZyb20gdGhlIHVzZXJzIGV5ZXMgdG8gdGhlIGZsb29yIGluIG1ldGVycy4gVXNlZCB3aGVuXG5cdC8vIHN0YW5kaW5nPXRydWUgYnV0IHRoZSBWUkRpc3BsYXkgZG9lc24ndCBwcm92aWRlIHN0YWdlUGFyYW1ldGVycy5cblx0dGhpcy51c2VySGVpZ2h0ID0gMS42O1xuXG5cdHRoaXMuZ2V0VlJEaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIHZyRGlzcGxheTtcblxuXHR9O1xuXG5cdHRoaXMuc2V0VlJEaXNwbGF5ID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHZyRGlzcGxheSA9IHZhbHVlO1xuXG5cdH07XG5cblx0dGhpcy5nZXRWUkRpc3BsYXlzID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJDb250cm9sczogZ2V0VlJEaXNwbGF5cygpIGlzIGJlaW5nIGRlcHJlY2F0ZWQuJyApO1xuXHRcdHJldHVybiB2ckRpc3BsYXlzO1xuXG5cdH07XG5cblx0dGhpcy5nZXRTdGFuZGluZ01hdHJpeCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBzdGFuZGluZ01hdHJpeDtcblxuXHR9O1xuXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0aWYgKCB2ckRpc3BsYXkgKSB7XG5cblx0XHRcdHZhciBwb3NlO1xuXG5cdFx0XHRpZiAoIHZyRGlzcGxheS5nZXRGcmFtZURhdGEgKSB7XG5cblx0XHRcdFx0dnJEaXNwbGF5LmdldEZyYW1lRGF0YSggZnJhbWVEYXRhICk7XG5cdFx0XHRcdHBvc2UgPSBmcmFtZURhdGEucG9zZTtcblxuXHRcdFx0fSBlbHNlIGlmICggdnJEaXNwbGF5LmdldFBvc2UgKSB7XG5cblx0XHRcdFx0cG9zZSA9IHZyRGlzcGxheS5nZXRQb3NlKCk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBwb3NlLm9yaWVudGF0aW9uICE9PSBudWxsICkge1xuXG5cdFx0XHRcdG9iamVjdC5xdWF0ZXJuaW9uLmZyb21BcnJheSggcG9zZS5vcmllbnRhdGlvbiApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggcG9zZS5wb3NpdGlvbiAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRvYmplY3QucG9zaXRpb24uZnJvbUFycmF5KCBwb3NlLnBvc2l0aW9uICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0b2JqZWN0LnBvc2l0aW9uLnNldCggMCwgMCwgMCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggdGhpcy5zdGFuZGluZyApIHtcblxuXHRcdFx0XHRpZiAoIHZyRGlzcGxheS5zdGFnZVBhcmFtZXRlcnMgKSB7XG5cblx0XHRcdFx0XHRvYmplY3QudXBkYXRlTWF0cml4KCk7XG5cblx0XHRcdFx0XHRzdGFuZGluZ01hdHJpeC5mcm9tQXJyYXkoIHZyRGlzcGxheS5zdGFnZVBhcmFtZXRlcnMuc2l0dGluZ1RvU3RhbmRpbmdUcmFuc2Zvcm0gKTtcblx0XHRcdFx0XHRvYmplY3QuYXBwbHlNYXRyaXgoIHN0YW5kaW5nTWF0cml4ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdG9iamVjdC5wb3NpdGlvbi5zZXRZKCBvYmplY3QucG9zaXRpb24ueSArIHRoaXMudXNlckhlaWdodCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRvYmplY3QucG9zaXRpb24ubXVsdGlwbHlTY2FsYXIoIHNjb3BlLnNjYWxlICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnJlc2V0UG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGlmICggdnJEaXNwbGF5ICkge1xuXG5cdFx0XHR2ckRpc3BsYXkucmVzZXRQb3NlKCk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnJlc2V0U2Vuc29yID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJDb250cm9sczogLnJlc2V0U2Vuc29yKCkgaXMgbm93IC5yZXNldFBvc2UoKS4nICk7XG5cdFx0dGhpcy5yZXNldFBvc2UoKTtcblxuXHR9O1xuXG5cdHRoaXMuemVyb1NlbnNvciA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSQ29udHJvbHM6IC56ZXJvU2Vuc29yKCkgaXMgbm93IC5yZXNldFBvc2UoKS4nICk7XG5cdFx0dGhpcy5yZXNldFBvc2UoKTtcblxuXHR9O1xuXG5cdHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZyRGlzcGxheSA9IG51bGw7XG5cblx0fTtcblxufTtcbiIsIi8qKlxuICogQGF1dGhvciBkbWFyY29zIC8gaHR0cHM6Ly9naXRodWIuY29tL2RtYXJjb3NcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb21cbiAqXG4gKiBXZWJWUiBTcGVjOiBodHRwOi8vbW96dnIuZ2l0aHViLmlvL3dlYnZyLXNwZWMvd2VidnIuaHRtbFxuICpcbiAqIEZpcmVmb3g6IGh0dHA6Ly9tb3p2ci5jb20vZG93bmxvYWRzL1xuICogQ2hyb21pdW06IGh0dHBzOi8vd2VidnIuaW5mby9nZXQtY2hyb21lXG4gKlxuICovXG5cblRIUkVFLlZSRWZmZWN0ID0gZnVuY3Rpb24oIHJlbmRlcmVyLCBvbkVycm9yICkge1xuXG5cdHZhciB2ckRpc3BsYXksIHZyRGlzcGxheXM7XG5cdHZhciBleWVUcmFuc2xhdGlvbkwgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHR2YXIgZXllVHJhbnNsYXRpb25SID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0dmFyIHJlbmRlclJlY3RMLCByZW5kZXJSZWN0UjtcblxuXHR2YXIgZnJhbWVEYXRhID0gbnVsbDtcblxuXHRpZiAoICdWUkZyYW1lRGF0YScgaW4gd2luZG93ICkge1xuXG5cdFx0ZnJhbWVEYXRhID0gbmV3IHdpbmRvdy5WUkZyYW1lRGF0YSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnb3RWUkRpc3BsYXlzKCBkaXNwbGF5cyApIHtcblxuXHRcdHZyRGlzcGxheXMgPSBkaXNwbGF5cztcblxuXHRcdGlmICggZGlzcGxheXMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0dnJEaXNwbGF5ID0gZGlzcGxheXNbIDAgXTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGlmICggb25FcnJvciApIG9uRXJyb3IoICdITUQgbm90IGF2YWlsYWJsZScgKTtcblxuXHRcdH1cblxuXHR9XG5cblx0aWYgKCBuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cyApIHtcblxuXHRcdG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCkudGhlbiggZ290VlJEaXNwbGF5cyApLmNhdGNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJFZmZlY3Q6IFVuYWJsZSB0byBnZXQgVlIgRGlzcGxheXMnICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8vXG5cblx0dGhpcy5pc1ByZXNlbnRpbmcgPSBmYWxzZTtcblx0dGhpcy5zY2FsZSA9IDE7XG5cblx0dmFyIHNjb3BlID0gdGhpcztcblxuXHR2YXIgcmVuZGVyZXJTaXplID0gcmVuZGVyZXIuZ2V0U2l6ZSgpO1xuXHR2YXIgcmVuZGVyZXJVcGRhdGVTdHlsZSA9IGZhbHNlO1xuXHR2YXIgcmVuZGVyZXJQaXhlbFJhdGlvID0gcmVuZGVyZXIuZ2V0UGl4ZWxSYXRpbygpO1xuXG5cdHRoaXMuZ2V0VlJEaXNwbGF5ID0gZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4gdnJEaXNwbGF5O1xuXG5cdH07XG5cblx0dGhpcy5zZXRWUkRpc3BsYXkgPSBmdW5jdGlvbiggdmFsdWUgKSB7XG5cblx0XHR2ckRpc3BsYXkgPSB2YWx1ZTtcblxuXHR9O1xuXG5cdHRoaXMuZ2V0VlJEaXNwbGF5cyA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJFZmZlY3Q6IGdldFZSRGlzcGxheXMoKSBpcyBiZWluZyBkZXByZWNhdGVkLicgKTtcblx0XHRyZXR1cm4gdnJEaXNwbGF5cztcblxuXHR9O1xuXG5cdHRoaXMuc2V0U2l6ZSA9IGZ1bmN0aW9uKCB3aWR0aCwgaGVpZ2h0LCB1cGRhdGVTdHlsZSApIHtcblxuXHRcdHJlbmRlcmVyU2l6ZSA9IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xuXHRcdHJlbmRlcmVyVXBkYXRlU3R5bGUgPSB1cGRhdGVTdHlsZTtcblxuXHRcdGlmICggc2NvcGUuaXNQcmVzZW50aW5nICkge1xuXG5cdFx0XHR2YXIgZXllUGFyYW1zTCA9IHZyRGlzcGxheS5nZXRFeWVQYXJhbWV0ZXJzKCAnbGVmdCcgKTtcblx0XHRcdHJlbmRlcmVyLnNldFBpeGVsUmF0aW8oIDEgKTtcblx0XHRcdHJlbmRlcmVyLnNldFNpemUoIGV5ZVBhcmFtc0wucmVuZGVyV2lkdGggKiAyLCBleWVQYXJhbXNMLnJlbmRlckhlaWdodCwgZmFsc2UgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHJlbmRlcmVyLnNldFBpeGVsUmF0aW8oIHJlbmRlcmVyUGl4ZWxSYXRpbyApO1xuXHRcdFx0cmVuZGVyZXIuc2V0U2l6ZSggd2lkdGgsIGhlaWdodCwgdXBkYXRlU3R5bGUgKTtcblxuXHRcdH1cblxuXHR9O1xuXG5cdC8vIFZSIHByZXNlbnRhdGlvblxuXG5cdHZhciBjYW52YXMgPSByZW5kZXJlci5kb21FbGVtZW50O1xuXHR2YXIgZGVmYXVsdExlZnRCb3VuZHMgPSBbIDAuMCwgMC4wLCAwLjUsIDEuMCBdO1xuXHR2YXIgZGVmYXVsdFJpZ2h0Qm91bmRzID0gWyAwLjUsIDAuMCwgMC41LCAxLjAgXTtcblxuXHRmdW5jdGlvbiBvblZSRGlzcGxheVByZXNlbnRDaGFuZ2UoKSB7XG5cblx0XHR2YXIgd2FzUHJlc2VudGluZyA9IHNjb3BlLmlzUHJlc2VudGluZztcblx0XHRzY29wZS5pc1ByZXNlbnRpbmcgPSB2ckRpc3BsYXkgIT09IHVuZGVmaW5lZCAmJiB2ckRpc3BsYXkuaXNQcmVzZW50aW5nO1xuXG5cdFx0aWYgKCBzY29wZS5pc1ByZXNlbnRpbmcgKSB7XG5cblx0XHRcdHZhciBleWVQYXJhbXNMID0gdnJEaXNwbGF5LmdldEV5ZVBhcmFtZXRlcnMoICdsZWZ0JyApO1xuXHRcdFx0dmFyIGV5ZVdpZHRoID0gZXllUGFyYW1zTC5yZW5kZXJXaWR0aDtcblx0XHRcdHZhciBleWVIZWlnaHQgPSBleWVQYXJhbXNMLnJlbmRlckhlaWdodDtcblxuXHRcdFx0aWYgKCAhIHdhc1ByZXNlbnRpbmcgKSB7XG5cblx0XHRcdFx0cmVuZGVyZXJQaXhlbFJhdGlvID0gcmVuZGVyZXIuZ2V0UGl4ZWxSYXRpbygpO1xuXHRcdFx0XHRyZW5kZXJlclNpemUgPSByZW5kZXJlci5nZXRTaXplKCk7XG5cblx0XHRcdFx0cmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyggMSApO1xuXHRcdFx0XHRyZW5kZXJlci5zZXRTaXplKCBleWVXaWR0aCAqIDIsIGV5ZUhlaWdodCwgZmFsc2UgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIGlmICggd2FzUHJlc2VudGluZyApIHtcblxuXHRcdFx0cmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyggcmVuZGVyZXJQaXhlbFJhdGlvICk7XG5cdFx0XHRyZW5kZXJlci5zZXRTaXplKCByZW5kZXJlclNpemUud2lkdGgsIHJlbmRlcmVyU2l6ZS5oZWlnaHQsIHJlbmRlcmVyVXBkYXRlU3R5bGUgKTtcblxuXHRcdH1cblxuXHR9XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgb25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlLCBmYWxzZSApO1xuXG5cdHRoaXMuc2V0RnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCBib29sZWFuICkge1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCBmdW5jdGlvbiggcmVzb2x2ZSwgcmVqZWN0ICkge1xuXG5cdFx0XHRpZiAoIHZyRGlzcGxheSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHJlamVjdCggbmV3IEVycm9yKCAnTm8gVlIgaGFyZHdhcmUgZm91bmQuJyApICk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNjb3BlLmlzUHJlc2VudGluZyA9PT0gYm9vbGVhbiApIHtcblxuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJvb2xlYW4gKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSggdnJEaXNwbGF5LnJlcXVlc3RQcmVzZW50KCBbIHsgc291cmNlOiBjYW52YXMgfSBdICkgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRyZXNvbHZlKCB2ckRpc3BsYXkuZXhpdFByZXNlbnQoKSApO1xuXG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHR0aGlzLnJlcXVlc3RQcmVzZW50ID0gZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4gdGhpcy5zZXRGdWxsU2NyZWVuKCB0cnVlICk7XG5cblx0fTtcblxuXHR0aGlzLmV4aXRQcmVzZW50ID0gZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4gdGhpcy5zZXRGdWxsU2NyZWVuKCBmYWxzZSApO1xuXG5cdH07XG5cblx0dGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiggZiApIHtcblxuXHRcdGlmICggdnJEaXNwbGF5ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHJldHVybiB2ckRpc3BsYXkucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBmICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSggZiApO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0dGhpcy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKCBoICkge1xuXG5cdFx0aWYgKCB2ckRpc3BsYXkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0dnJEaXNwbGF5LmNhbmNlbEFuaW1hdGlvbkZyYW1lKCBoICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoIGggKTtcblxuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMuc3VibWl0RnJhbWUgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmICggdnJEaXNwbGF5ICE9PSB1bmRlZmluZWQgJiYgc2NvcGUuaXNQcmVzZW50aW5nICkge1xuXG5cdFx0XHR2ckRpc3BsYXkuc3VibWl0RnJhbWUoKTtcblxuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMuYXV0b1N1Ym1pdEZyYW1lID0gdHJ1ZTtcblxuXHQvLyByZW5kZXJcblxuXHR2YXIgY2FtZXJhTCA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSgpO1xuXHRjYW1lcmFMLmxheWVycy5lbmFibGUoIDEgKTtcblxuXHR2YXIgY2FtZXJhUiA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSgpO1xuXHRjYW1lcmFSLmxheWVycy5lbmFibGUoIDIgKTtcblxuXHR0aGlzLnJlbmRlciA9IGZ1bmN0aW9uKCBzY2VuZSwgY2FtZXJhLCByZW5kZXJUYXJnZXQsIGZvcmNlQ2xlYXIgKSB7XG5cblx0XHRpZiAoIHZyRGlzcGxheSAmJiBzY29wZS5pc1ByZXNlbnRpbmcgKSB7XG5cblx0XHRcdHZhciBhdXRvVXBkYXRlID0gc2NlbmUuYXV0b1VwZGF0ZTtcblxuXHRcdFx0aWYgKCBhdXRvVXBkYXRlICkge1xuXG5cdFx0XHRcdHNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cdFx0XHRcdHNjZW5lLmF1dG9VcGRhdGUgPSBmYWxzZTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZXllUGFyYW1zTCA9IHZyRGlzcGxheS5nZXRFeWVQYXJhbWV0ZXJzKCAnbGVmdCcgKTtcblx0XHRcdHZhciBleWVQYXJhbXNSID0gdnJEaXNwbGF5LmdldEV5ZVBhcmFtZXRlcnMoICdyaWdodCcgKTtcblxuXHRcdFx0ZXllVHJhbnNsYXRpb25MLmZyb21BcnJheSggZXllUGFyYW1zTC5vZmZzZXQgKTtcblx0XHRcdGV5ZVRyYW5zbGF0aW9uUi5mcm9tQXJyYXkoIGV5ZVBhcmFtc1Iub2Zmc2V0ICk7XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggc2NlbmUgKSApIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5WUkVmZmVjdC5yZW5kZXIoKSBubyBsb25nZXIgc3VwcG9ydHMgYXJyYXlzLiBVc2Ugb2JqZWN0LmxheWVycyBpbnN0ZWFkLicgKTtcblx0XHRcdFx0c2NlbmUgPSBzY2VuZVsgMCBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIFdoZW4gcmVuZGVyaW5nIHdlIGRvbid0IGNhcmUgd2hhdCB0aGUgcmVjb21tZW5kZWQgc2l6ZSBpcywgb25seSB3aGF0IHRoZSBhY3R1YWwgc2l6ZVxuXHRcdFx0Ly8gb2YgdGhlIGJhY2tidWZmZXIgaXMuXG5cdFx0XHR2YXIgc2l6ZSA9IHJlbmRlcmVyLmdldFNpemUoKTtcblx0XHRcdHZhciBsYXllcnMgPSB2ckRpc3BsYXkuZ2V0TGF5ZXJzKCk7XG5cdFx0XHR2YXIgbGVmdEJvdW5kcztcblx0XHRcdHZhciByaWdodEJvdW5kcztcblxuXHRcdFx0aWYgKCBsYXllcnMubGVuZ3RoICkge1xuXG5cdFx0XHRcdHZhciBsYXllciA9IGxheWVyc1sgMCBdO1xuXG5cdFx0XHRcdGxlZnRCb3VuZHMgPSBsYXllci5sZWZ0Qm91bmRzICE9PSBudWxsICYmIGxheWVyLmxlZnRCb3VuZHMubGVuZ3RoID09PSA0ID8gbGF5ZXIubGVmdEJvdW5kcyA6IGRlZmF1bHRMZWZ0Qm91bmRzO1xuXHRcdFx0XHRyaWdodEJvdW5kcyA9IGxheWVyLnJpZ2h0Qm91bmRzICE9PSBudWxsICYmIGxheWVyLnJpZ2h0Qm91bmRzLmxlbmd0aCA9PT0gNCA/IGxheWVyLnJpZ2h0Qm91bmRzIDogZGVmYXVsdFJpZ2h0Qm91bmRzO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGxlZnRCb3VuZHMgPSBkZWZhdWx0TGVmdEJvdW5kcztcblx0XHRcdFx0cmlnaHRCb3VuZHMgPSBkZWZhdWx0UmlnaHRCb3VuZHM7XG5cblx0XHRcdH1cblxuXHRcdFx0cmVuZGVyUmVjdEwgPSB7XG5cdFx0XHRcdHg6IE1hdGgucm91bmQoIHNpemUud2lkdGggKiBsZWZ0Qm91bmRzWyAwIF0gKSxcblx0XHRcdFx0eTogTWF0aC5yb3VuZCggc2l6ZS5oZWlnaHQgKiBsZWZ0Qm91bmRzWyAxIF0gKSxcblx0XHRcdFx0d2lkdGg6IE1hdGgucm91bmQoIHNpemUud2lkdGggKiBsZWZ0Qm91bmRzWyAyIF0gKSxcblx0XHRcdFx0aGVpZ2h0OiBNYXRoLnJvdW5kKCBzaXplLmhlaWdodCAqIGxlZnRCb3VuZHNbIDMgXSApXG5cdFx0XHR9O1xuXHRcdFx0cmVuZGVyUmVjdFIgPSB7XG5cdFx0XHRcdHg6IE1hdGgucm91bmQoIHNpemUud2lkdGggKiByaWdodEJvdW5kc1sgMCBdICksXG5cdFx0XHRcdHk6IE1hdGgucm91bmQoIHNpemUuaGVpZ2h0ICogcmlnaHRCb3VuZHNbIDEgXSApLFxuXHRcdFx0XHR3aWR0aDogTWF0aC5yb3VuZCggc2l6ZS53aWR0aCAqIHJpZ2h0Qm91bmRzWyAyIF0gKSxcblx0XHRcdFx0aGVpZ2h0OiBNYXRoLnJvdW5kKCBzaXplLmhlaWdodCAqIHJpZ2h0Qm91bmRzWyAzIF0gKVxuXHRcdFx0fTtcblxuXHRcdFx0aWYgKCByZW5kZXJUYXJnZXQgKSB7XG5cblx0XHRcdFx0cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KCByZW5kZXJUYXJnZXQgKTtcblx0XHRcdFx0cmVuZGVyVGFyZ2V0LnNjaXNzb3JUZXN0ID0gdHJ1ZTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRyZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQoIG51bGwgKTtcblx0XHRcdFx0cmVuZGVyZXIuc2V0U2Npc3NvclRlc3QoIHRydWUgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHJlbmRlcmVyLmF1dG9DbGVhciB8fCBmb3JjZUNsZWFyICkgcmVuZGVyZXIuY2xlYXIoKTtcblxuXHRcdFx0aWYgKCBjYW1lcmEucGFyZW50ID09PSBudWxsICkgY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cblx0XHRcdGNhbWVyYS5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoIGNhbWVyYUwucG9zaXRpb24sIGNhbWVyYUwucXVhdGVybmlvbiwgY2FtZXJhTC5zY2FsZSApO1xuXHRcdFx0Y2FtZXJhLm1hdHJpeFdvcmxkLmRlY29tcG9zZSggY2FtZXJhUi5wb3NpdGlvbiwgY2FtZXJhUi5xdWF0ZXJuaW9uLCBjYW1lcmFSLnNjYWxlICk7XG5cblx0XHRcdHZhciBzY2FsZSA9IHRoaXMuc2NhbGU7XG5cdFx0XHRjYW1lcmFMLnRyYW5zbGF0ZU9uQXhpcyggZXllVHJhbnNsYXRpb25MLCBzY2FsZSApO1xuXHRcdFx0Y2FtZXJhUi50cmFuc2xhdGVPbkF4aXMoIGV5ZVRyYW5zbGF0aW9uUiwgc2NhbGUgKTtcblxuXHRcdFx0aWYgKCB2ckRpc3BsYXkuZ2V0RnJhbWVEYXRhICkge1xuXG5cdFx0XHRcdHZyRGlzcGxheS5kZXB0aE5lYXIgPSBjYW1lcmEubmVhcjtcblx0XHRcdFx0dnJEaXNwbGF5LmRlcHRoRmFyID0gY2FtZXJhLmZhcjtcblxuXHRcdFx0XHR2ckRpc3BsYXkuZ2V0RnJhbWVEYXRhKCBmcmFtZURhdGEgKTtcblxuXHRcdFx0XHRjYW1lcmFMLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMgPSBmcmFtZURhdGEubGVmdFByb2plY3Rpb25NYXRyaXg7XG5cdFx0XHRcdGNhbWVyYVIucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyA9IGZyYW1lRGF0YS5yaWdodFByb2plY3Rpb25NYXRyaXg7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y2FtZXJhTC5wcm9qZWN0aW9uTWF0cml4ID0gZm92VG9Qcm9qZWN0aW9uKCBleWVQYXJhbXNMLmZpZWxkT2ZWaWV3LCB0cnVlLCBjYW1lcmEubmVhciwgY2FtZXJhLmZhciApO1xuXHRcdFx0XHRjYW1lcmFSLnByb2plY3Rpb25NYXRyaXggPSBmb3ZUb1Byb2plY3Rpb24oIGV5ZVBhcmFtc1IuZmllbGRPZlZpZXcsIHRydWUsIGNhbWVyYS5uZWFyLCBjYW1lcmEuZmFyICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gcmVuZGVyIGxlZnQgZXllXG5cdFx0XHRpZiAoIHJlbmRlclRhcmdldCApIHtcblxuXHRcdFx0XHRyZW5kZXJUYXJnZXQudmlld3BvcnQuc2V0KCByZW5kZXJSZWN0TC54LCByZW5kZXJSZWN0TC55LCByZW5kZXJSZWN0TC53aWR0aCwgcmVuZGVyUmVjdEwuaGVpZ2h0ICk7XG5cdFx0XHRcdHJlbmRlclRhcmdldC5zY2lzc29yLnNldCggcmVuZGVyUmVjdEwueCwgcmVuZGVyUmVjdEwueSwgcmVuZGVyUmVjdEwud2lkdGgsIHJlbmRlclJlY3RMLmhlaWdodCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHJlbmRlcmVyLnNldFZpZXdwb3J0KCByZW5kZXJSZWN0TC54LCByZW5kZXJSZWN0TC55LCByZW5kZXJSZWN0TC53aWR0aCwgcmVuZGVyUmVjdEwuaGVpZ2h0ICk7XG5cdFx0XHRcdHJlbmRlcmVyLnNldFNjaXNzb3IoIHJlbmRlclJlY3RMLngsIHJlbmRlclJlY3RMLnksIHJlbmRlclJlY3RMLndpZHRoLCByZW5kZXJSZWN0TC5oZWlnaHQgKTtcblxuXHRcdFx0fVxuXHRcdFx0cmVuZGVyZXIucmVuZGVyKCBzY2VuZSwgY2FtZXJhTCwgcmVuZGVyVGFyZ2V0LCBmb3JjZUNsZWFyICk7XG5cblx0XHRcdC8vIHJlbmRlciByaWdodCBleWVcblx0XHRcdGlmICggcmVuZGVyVGFyZ2V0ICkge1xuXG5cdFx0XHRcdHJlbmRlclRhcmdldC52aWV3cG9ydC5zZXQoIHJlbmRlclJlY3RSLngsIHJlbmRlclJlY3RSLnksIHJlbmRlclJlY3RSLndpZHRoLCByZW5kZXJSZWN0Ui5oZWlnaHQgKTtcblx0XHRcdFx0cmVuZGVyVGFyZ2V0LnNjaXNzb3Iuc2V0KCByZW5kZXJSZWN0Ui54LCByZW5kZXJSZWN0Ui55LCByZW5kZXJSZWN0Ui53aWR0aCwgcmVuZGVyUmVjdFIuaGVpZ2h0ICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0cmVuZGVyZXIuc2V0Vmlld3BvcnQoIHJlbmRlclJlY3RSLngsIHJlbmRlclJlY3RSLnksIHJlbmRlclJlY3RSLndpZHRoLCByZW5kZXJSZWN0Ui5oZWlnaHQgKTtcblx0XHRcdFx0cmVuZGVyZXIuc2V0U2Npc3NvciggcmVuZGVyUmVjdFIueCwgcmVuZGVyUmVjdFIueSwgcmVuZGVyUmVjdFIud2lkdGgsIHJlbmRlclJlY3RSLmhlaWdodCApO1xuXG5cdFx0XHR9XG5cdFx0XHRyZW5kZXJlci5yZW5kZXIoIHNjZW5lLCBjYW1lcmFSLCByZW5kZXJUYXJnZXQsIGZvcmNlQ2xlYXIgKTtcblxuXHRcdFx0aWYgKCByZW5kZXJUYXJnZXQgKSB7XG5cblx0XHRcdFx0cmVuZGVyVGFyZ2V0LnZpZXdwb3J0LnNldCggMCwgMCwgc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQgKTtcblx0XHRcdFx0cmVuZGVyVGFyZ2V0LnNjaXNzb3Iuc2V0KCAwLCAwLCBzaXplLndpZHRoLCBzaXplLmhlaWdodCApO1xuXHRcdFx0XHRyZW5kZXJUYXJnZXQuc2Npc3NvclRlc3QgPSBmYWxzZTtcblx0XHRcdFx0cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KCBudWxsICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0cmVuZGVyZXIuc2V0Vmlld3BvcnQoIDAsIDAsIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0ICk7XG5cdFx0XHRcdHJlbmRlcmVyLnNldFNjaXNzb3JUZXN0KCBmYWxzZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggYXV0b1VwZGF0ZSApIHtcblxuXHRcdFx0XHRzY2VuZS5hdXRvVXBkYXRlID0gdHJ1ZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNjb3BlLmF1dG9TdWJtaXRGcmFtZSApIHtcblxuXHRcdFx0XHRzY29wZS5zdWJtaXRGcmFtZSgpO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblxuXHRcdH1cblxuXHRcdC8vIFJlZ3VsYXIgcmVuZGVyIG1vZGUgaWYgbm90IEhNRFxuXG5cdFx0cmVuZGVyZXIucmVuZGVyKCBzY2VuZSwgY2FtZXJhLCByZW5kZXJUYXJnZXQsIGZvcmNlQ2xlYXIgKTtcblxuXHR9O1xuXG5cdHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgb25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlLCBmYWxzZSApO1xuXG5cdH07XG5cblx0Ly9cblxuXHRmdW5jdGlvbiBmb3ZUb05EQ1NjYWxlT2Zmc2V0KCBmb3YgKSB7XG5cblx0XHR2YXIgcHhzY2FsZSA9IDIuMCAvICggZm92LmxlZnRUYW4gKyBmb3YucmlnaHRUYW4gKTtcblx0XHR2YXIgcHhvZmZzZXQgPSAoIGZvdi5sZWZ0VGFuIC0gZm92LnJpZ2h0VGFuICkgKiBweHNjYWxlICogMC41O1xuXHRcdHZhciBweXNjYWxlID0gMi4wIC8gKCBmb3YudXBUYW4gKyBmb3YuZG93blRhbiApO1xuXHRcdHZhciBweW9mZnNldCA9ICggZm92LnVwVGFuIC0gZm92LmRvd25UYW4gKSAqIHB5c2NhbGUgKiAwLjU7XG5cdFx0cmV0dXJuIHsgc2NhbGU6IFsgcHhzY2FsZSwgcHlzY2FsZSBdLCBvZmZzZXQ6IFsgcHhvZmZzZXQsIHB5b2Zmc2V0IF0gfTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZm92UG9ydFRvUHJvamVjdGlvbiggZm92LCByaWdodEhhbmRlZCwgek5lYXIsIHpGYXIgKSB7XG5cblx0XHRyaWdodEhhbmRlZCA9IHJpZ2h0SGFuZGVkID09PSB1bmRlZmluZWQgPyB0cnVlIDogcmlnaHRIYW5kZWQ7XG5cdFx0ek5lYXIgPSB6TmVhciA9PT0gdW5kZWZpbmVkID8gMC4wMSA6IHpOZWFyO1xuXHRcdHpGYXIgPSB6RmFyID09PSB1bmRlZmluZWQgPyAxMDAwMC4wIDogekZhcjtcblxuXHRcdHZhciBoYW5kZWRuZXNzU2NhbGUgPSByaWdodEhhbmRlZCA/IC0gMS4wIDogMS4wO1xuXG5cdFx0Ly8gc3RhcnQgd2l0aCBhbiBpZGVudGl0eSBtYXRyaXhcblx0XHR2YXIgbW9iaiA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG5cdFx0dmFyIG0gPSBtb2JqLmVsZW1lbnRzO1xuXG5cdFx0Ly8gYW5kIHdpdGggc2NhbGUvb2Zmc2V0IGluZm8gZm9yIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3Jkc1xuXHRcdHZhciBzY2FsZUFuZE9mZnNldCA9IGZvdlRvTkRDU2NhbGVPZmZzZXQoIGZvdiApO1xuXG5cdFx0Ly8gWCByZXN1bHQsIG1hcCBjbGlwIGVkZ2VzIHRvIFstdywrd11cblx0XHRtWyAwICogNCArIDAgXSA9IHNjYWxlQW5kT2Zmc2V0LnNjYWxlWyAwIF07XG5cdFx0bVsgMCAqIDQgKyAxIF0gPSAwLjA7XG5cdFx0bVsgMCAqIDQgKyAyIF0gPSBzY2FsZUFuZE9mZnNldC5vZmZzZXRbIDAgXSAqIGhhbmRlZG5lc3NTY2FsZTtcblx0XHRtWyAwICogNCArIDMgXSA9IDAuMDtcblxuXHRcdC8vIFkgcmVzdWx0LCBtYXAgY2xpcCBlZGdlcyB0byBbLXcsK3ddXG5cdFx0Ly8gWSBvZmZzZXQgaXMgbmVnYXRlZCBiZWNhdXNlIHRoaXMgcHJvaiBtYXRyaXggdHJhbnNmb3JtcyBmcm9tIHdvcmxkIGNvb3JkcyB3aXRoIFk9dXAsXG5cdFx0Ly8gYnV0IHRoZSBOREMgc2NhbGluZyBoYXMgWT1kb3duICh0aGFua3MgRDNEPylcblx0XHRtWyAxICogNCArIDAgXSA9IDAuMDtcblx0XHRtWyAxICogNCArIDEgXSA9IHNjYWxlQW5kT2Zmc2V0LnNjYWxlWyAxIF07XG5cdFx0bVsgMSAqIDQgKyAyIF0gPSAtIHNjYWxlQW5kT2Zmc2V0Lm9mZnNldFsgMSBdICogaGFuZGVkbmVzc1NjYWxlO1xuXHRcdG1bIDEgKiA0ICsgMyBdID0gMC4wO1xuXG5cdFx0Ly8gWiByZXN1bHQgKHVwIHRvIHRoZSBhcHApXG5cdFx0bVsgMiAqIDQgKyAwIF0gPSAwLjA7XG5cdFx0bVsgMiAqIDQgKyAxIF0gPSAwLjA7XG5cdFx0bVsgMiAqIDQgKyAyIF0gPSB6RmFyIC8gKCB6TmVhciAtIHpGYXIgKSAqIC0gaGFuZGVkbmVzc1NjYWxlO1xuXHRcdG1bIDIgKiA0ICsgMyBdID0gKCB6RmFyICogek5lYXIgKSAvICggek5lYXIgLSB6RmFyICk7XG5cblx0XHQvLyBXIHJlc3VsdCAoPSBaIGluKVxuXHRcdG1bIDMgKiA0ICsgMCBdID0gMC4wO1xuXHRcdG1bIDMgKiA0ICsgMSBdID0gMC4wO1xuXHRcdG1bIDMgKiA0ICsgMiBdID0gaGFuZGVkbmVzc1NjYWxlO1xuXHRcdG1bIDMgKiA0ICsgMyBdID0gMC4wO1xuXG5cdFx0bW9iai50cmFuc3Bvc2UoKTtcblxuXHRcdHJldHVybiBtb2JqO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBmb3ZUb1Byb2plY3Rpb24oIGZvdiwgcmlnaHRIYW5kZWQsIHpOZWFyLCB6RmFyICkge1xuXG5cdFx0dmFyIERFRzJSQUQgPSBNYXRoLlBJIC8gMTgwLjA7XG5cblx0XHR2YXIgZm92UG9ydCA9IHtcblx0XHRcdHVwVGFuOiBNYXRoLnRhbiggZm92LnVwRGVncmVlcyAqIERFRzJSQUQgKSxcblx0XHRcdGRvd25UYW46IE1hdGgudGFuKCBmb3YuZG93bkRlZ3JlZXMgKiBERUcyUkFEICksXG5cdFx0XHRsZWZ0VGFuOiBNYXRoLnRhbiggZm92LmxlZnREZWdyZWVzICogREVHMlJBRCApLFxuXHRcdFx0cmlnaHRUYW46IE1hdGgudGFuKCBmb3YucmlnaHREZWdyZWVzICogREVHMlJBRCApXG5cdFx0fTtcblxuXHRcdHJldHVybiBmb3ZQb3J0VG9Qcm9qZWN0aW9uKCBmb3ZQb3J0LCByaWdodEhhbmRlZCwgek5lYXIsIHpGYXIgKTtcblxuXHR9XG5cbn07XG4iLCIvKipcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXG4gKi9cblxuVEhSRUUuT0JKTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuXG5cdHRoaXMubWFuYWdlciA9ICggbWFuYWdlciAhPT0gdW5kZWZpbmVkICkgPyBtYW5hZ2VyIDogVEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuXG5cdHRoaXMubWF0ZXJpYWxzID0gbnVsbDtcblxuXHR0aGlzLnJlZ2V4cCA9IHtcblx0XHQvLyB2IGZsb2F0IGZsb2F0IGZsb2F0XG5cdFx0dmVydGV4X3BhdHRlcm4gICAgICAgICAgIDogL152XFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxcblx0XHQvLyB2biBmbG9hdCBmbG9hdCBmbG9hdFxuXHRcdG5vcm1hbF9wYXR0ZXJuICAgICAgICAgICA6IC9edm5cXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKykvLFxuXHRcdC8vIHZ0IGZsb2F0IGZsb2F0XG5cdFx0dXZfcGF0dGVybiAgICAgICAgICAgICAgIDogL152dFxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxcblx0XHQvLyBmIHZlcnRleCB2ZXJ0ZXggdmVydGV4XG5cdFx0ZmFjZV92ZXJ0ZXggICAgICAgICAgICAgIDogL15mXFxzKygtP1xcZCspXFxzKygtP1xcZCspXFxzKygtP1xcZCspKD86XFxzKygtP1xcZCspKT8vLFxuXHRcdC8vIGYgdmVydGV4L3V2IHZlcnRleC91diB2ZXJ0ZXgvdXZcblx0XHRmYWNlX3ZlcnRleF91diAgICAgICAgICAgOiAvXmZcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC8oLT9cXGQrKSk/Lyxcblx0XHQvLyBmIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsXG5cdFx0ZmFjZV92ZXJ0ZXhfdXZfbm9ybWFsICAgIDogL15mXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspKD86XFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKSk/Lyxcblx0XHQvLyBmIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsXG5cdFx0ZmFjZV92ZXJ0ZXhfbm9ybWFsICAgICAgIDogL15mXFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspKD86XFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKykpPy8sXG5cdFx0Ly8gbyBvYmplY3RfbmFtZSB8IGcgZ3JvdXBfbmFtZVxuXHRcdG9iamVjdF9wYXR0ZXJuICAgICAgICAgICA6IC9eW29nXVxccyooLispPy8sXG5cdFx0Ly8gcyBib29sZWFuXG5cdFx0c21vb3RoaW5nX3BhdHRlcm4gICAgICAgIDogL15zXFxzKyhcXGQrfG9ufG9mZikvLFxuXHRcdC8vIG10bGxpYiBmaWxlX3JlZmVyZW5jZVxuXHRcdG1hdGVyaWFsX2xpYnJhcnlfcGF0dGVybiA6IC9ebXRsbGliIC8sXG5cdFx0Ly8gdXNlbXRsIG1hdGVyaWFsX25hbWVcblx0XHRtYXRlcmlhbF91c2VfcGF0dGVybiAgICAgOiAvXnVzZW10bCAvXG5cdH07XG5cbn07XG5cblRIUkVFLk9CSkxvYWRlci5wcm90b3R5cGUgPSB7XG5cblx0Y29uc3RydWN0b3I6IFRIUkVFLk9CSkxvYWRlcixcblxuXHRsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuRmlsZUxvYWRlciggc2NvcGUubWFuYWdlciApO1xuXHRcdGxvYWRlci5zZXRQYXRoKCB0aGlzLnBhdGggKTtcblx0XHRsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIHRleHQgKSB7XG5cblx0XHRcdG9uTG9hZCggc2NvcGUucGFyc2UoIHRleHQgKSApO1xuXG5cdFx0fSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG5cdH0sXG5cblx0c2V0UGF0aDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHRoaXMucGF0aCA9IHZhbHVlO1xuXG5cdH0sXG5cblx0c2V0TWF0ZXJpYWxzOiBmdW5jdGlvbiAoIG1hdGVyaWFscyApIHtcblxuXHRcdHRoaXMubWF0ZXJpYWxzID0gbWF0ZXJpYWxzO1xuXG5cdH0sXG5cblx0X2NyZWF0ZVBhcnNlclN0YXRlIDogZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIHN0YXRlID0ge1xuXHRcdFx0b2JqZWN0cyAgOiBbXSxcblx0XHRcdG9iamVjdCAgIDoge30sXG5cblx0XHRcdHZlcnRpY2VzIDogW10sXG5cdFx0XHRub3JtYWxzICA6IFtdLFxuXHRcdFx0dXZzICAgICAgOiBbXSxcblxuXHRcdFx0bWF0ZXJpYWxMaWJyYXJpZXMgOiBbXSxcblxuXHRcdFx0c3RhcnRPYmplY3Q6IGZ1bmN0aW9uICggbmFtZSwgZnJvbURlY2xhcmF0aW9uICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZSBjdXJyZW50IG9iamVjdCAoaW5pdGlhbCBmcm9tIHJlc2V0KSBpcyBub3QgZnJvbSBhIGcvbyBkZWNsYXJhdGlvbiBpbiB0aGUgcGFyc2VkXG5cdFx0XHRcdC8vIGZpbGUuIFdlIG5lZWQgdG8gdXNlIGl0IGZvciB0aGUgZmlyc3QgcGFyc2VkIGcvbyB0byBrZWVwIHRoaW5ncyBpbiBzeW5jLlxuXHRcdFx0XHRpZiAoIHRoaXMub2JqZWN0ICYmIHRoaXMub2JqZWN0LmZyb21EZWNsYXJhdGlvbiA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHR0aGlzLm9iamVjdC5uYW1lID0gbmFtZTtcblx0XHRcdFx0XHR0aGlzLm9iamVjdC5mcm9tRGVjbGFyYXRpb24gPSAoIGZyb21EZWNsYXJhdGlvbiAhPT0gZmFsc2UgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBwcmV2aW91c01hdGVyaWFsID0gKCB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsID09PSAnZnVuY3Rpb24nID8gdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsKCkgOiB1bmRlZmluZWQgKTtcblxuXHRcdFx0XHRpZiAoIHRoaXMub2JqZWN0ICYmIHR5cGVvZiB0aGlzLm9iamVjdC5fZmluYWxpemUgPT09ICdmdW5jdGlvbicgKSB7XG5cblx0XHRcdFx0XHR0aGlzLm9iamVjdC5fZmluYWxpemUoIHRydWUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5vYmplY3QgPSB7XG5cdFx0XHRcdFx0bmFtZSA6IG5hbWUgfHwgJycsXG5cdFx0XHRcdFx0ZnJvbURlY2xhcmF0aW9uIDogKCBmcm9tRGVjbGFyYXRpb24gIT09IGZhbHNlICksXG5cblx0XHRcdFx0XHRnZW9tZXRyeSA6IHtcblx0XHRcdFx0XHRcdHZlcnRpY2VzIDogW10sXG5cdFx0XHRcdFx0XHRub3JtYWxzICA6IFtdLFxuXHRcdFx0XHRcdFx0dXZzICAgICAgOiBbXVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bWF0ZXJpYWxzIDogW10sXG5cdFx0XHRcdFx0c21vb3RoIDogdHJ1ZSxcblxuXHRcdFx0XHRcdHN0YXJ0TWF0ZXJpYWwgOiBmdW5jdGlvbiggbmFtZSwgbGlicmFyaWVzICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgcHJldmlvdXMgPSB0aGlzLl9maW5hbGl6ZSggZmFsc2UgKTtcblxuXHRcdFx0XHRcdFx0Ly8gTmV3IHVzZW10bCBkZWNsYXJhdGlvbiBvdmVyd3JpdGVzIGFuIGluaGVyaXRlZCBtYXRlcmlhbCwgZXhjZXB0IGlmIGZhY2VzIHdlcmUgZGVjbGFyZWRcblx0XHRcdFx0XHRcdC8vIGFmdGVyIHRoZSBtYXRlcmlhbCwgdGhlbiBpdCBtdXN0IGJlIHByZXNlcnZlZCBmb3IgcHJvcGVyIE11bHRpTWF0ZXJpYWwgY29udGludWF0aW9uLlxuXHRcdFx0XHRcdFx0aWYgKCBwcmV2aW91cyAmJiAoIHByZXZpb3VzLmluaGVyaXRlZCB8fCBwcmV2aW91cy5ncm91cENvdW50IDw9IDAgKSApIHtcblxuXHRcdFx0XHRcdFx0XHR0aGlzLm1hdGVyaWFscy5zcGxpY2UoIHByZXZpb3VzLmluZGV4LCAxICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIG1hdGVyaWFsID0ge1xuXHRcdFx0XHRcdFx0XHRpbmRleCAgICAgIDogdGhpcy5tYXRlcmlhbHMubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHRuYW1lICAgICAgIDogbmFtZSB8fCAnJyxcblx0XHRcdFx0XHRcdFx0bXRsbGliICAgICA6ICggQXJyYXkuaXNBcnJheSggbGlicmFyaWVzICkgJiYgbGlicmFyaWVzLmxlbmd0aCA+IDAgPyBsaWJyYXJpZXNbIGxpYnJhcmllcy5sZW5ndGggLSAxIF0gOiAnJyApLFxuXHRcdFx0XHRcdFx0XHRzbW9vdGggICAgIDogKCBwcmV2aW91cyAhPT0gdW5kZWZpbmVkID8gcHJldmlvdXMuc21vb3RoIDogdGhpcy5zbW9vdGggKSxcblx0XHRcdFx0XHRcdFx0Z3JvdXBTdGFydCA6ICggcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLmdyb3VwRW5kIDogMCApLFxuXHRcdFx0XHRcdFx0XHRncm91cEVuZCAgIDogLTEsXG5cdFx0XHRcdFx0XHRcdGdyb3VwQ291bnQgOiAtMSxcblx0XHRcdFx0XHRcdFx0aW5oZXJpdGVkICA6IGZhbHNlLFxuXG5cdFx0XHRcdFx0XHRcdGNsb25lIDogZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBjbG9uZWQgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbmRleCAgICAgIDogKCB0eXBlb2YgaW5kZXggPT09ICdudW1iZXInID8gaW5kZXggOiB0aGlzLmluZGV4ICksXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lICAgICAgIDogdGhpcy5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0bXRsbGliICAgICA6IHRoaXMubXRsbGliLFxuXHRcdFx0XHRcdFx0XHRcdFx0c21vb3RoICAgICA6IHRoaXMuc21vb3RoLFxuXHRcdFx0XHRcdFx0XHRcdFx0Z3JvdXBTdGFydCA6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRncm91cEVuZCAgIDogLTEsXG5cdFx0XHRcdFx0XHRcdFx0XHRncm91cENvdW50IDogLTEsXG5cdFx0XHRcdFx0XHRcdFx0XHRpbmhlcml0ZWQgIDogZmFsc2Vcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdGNsb25lZC5jbG9uZSA9IHRoaXMuY2xvbmUuYmluZChjbG9uZWQpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjbG9uZWQ7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdHRoaXMubWF0ZXJpYWxzLnB1c2goIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0XHRcdHJldHVybiBtYXRlcmlhbDtcblxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRjdXJyZW50TWF0ZXJpYWwgOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0aWYgKCB0aGlzLm1hdGVyaWFscy5sZW5ndGggPiAwICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5tYXRlcmlhbHNbIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCAtIDEgXTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRfZmluYWxpemUgOiBmdW5jdGlvbiggZW5kICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgbGFzdE11bHRpTWF0ZXJpYWwgPSB0aGlzLmN1cnJlbnRNYXRlcmlhbCgpO1xuXHRcdFx0XHRcdFx0aWYgKCBsYXN0TXVsdGlNYXRlcmlhbCAmJiBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cEVuZCA9PT0gLTEgKSB7XG5cblx0XHRcdFx0XHRcdFx0bGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBFbmQgPSB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCAvIDM7XG5cdFx0XHRcdFx0XHRcdGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwQ291bnQgPSBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cEVuZCAtIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwU3RhcnQ7XG5cdFx0XHRcdFx0XHRcdGxhc3RNdWx0aU1hdGVyaWFsLmluaGVyaXRlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIElnbm9yZSBvYmplY3RzIHRhaWwgbWF0ZXJpYWxzIGlmIG5vIGZhY2UgZGVjbGFyYXRpb25zIGZvbGxvd2VkIHRoZW0gYmVmb3JlIGEgbmV3IG8vZyBzdGFydGVkLlxuXHRcdFx0XHRcdFx0aWYgKCBlbmQgJiYgdGhpcy5tYXRlcmlhbHMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgbWkgPSB0aGlzLm1hdGVyaWFscy5sZW5ndGggLSAxOyBtaSA+PSAwOyBtaS0tICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggdGhpcy5tYXRlcmlhbHNbbWldLmdyb3VwQ291bnQgPD0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMubWF0ZXJpYWxzLnNwbGljZSggbWksIDEgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBHdWFyYW50ZWUgYXQgbGVhc3Qgb25lIGVtcHR5IG1hdGVyaWFsLCB0aGlzIG1ha2VzIHRoZSBjcmVhdGlvbiBsYXRlciBtb3JlIHN0cmFpZ2h0IGZvcndhcmQuXG5cdFx0XHRcdFx0XHRpZiAoIGVuZCAmJiB0aGlzLm1hdGVyaWFscy5sZW5ndGggPT09IDAgKSB7XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5tYXRlcmlhbHMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZSAgIDogJycsXG5cdFx0XHRcdFx0XHRcdFx0c21vb3RoIDogdGhpcy5zbW9vdGhcblx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGxhc3RNdWx0aU1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIEluaGVyaXQgcHJldmlvdXMgb2JqZWN0cyBtYXRlcmlhbC5cblx0XHRcdFx0Ly8gU3BlYyB0ZWxscyB1cyB0aGF0IGEgZGVjbGFyZWQgbWF0ZXJpYWwgbXVzdCBiZSBzZXQgdG8gYWxsIG9iamVjdHMgdW50aWwgYSBuZXcgbWF0ZXJpYWwgaXMgZGVjbGFyZWQuXG5cdFx0XHRcdC8vIElmIGEgdXNlbXRsIGRlY2xhcmF0aW9uIGlzIGVuY291bnRlcmVkIHdoaWxlIHRoaXMgbmV3IG9iamVjdCBpcyBiZWluZyBwYXJzZWQsIGl0IHdpbGxcblx0XHRcdFx0Ly8gb3ZlcndyaXRlIHRoZSBpbmhlcml0ZWQgbWF0ZXJpYWwuIEV4Y2VwdGlvbiBiZWluZyB0aGF0IHRoZXJlIHdhcyBhbHJlYWR5IGZhY2UgZGVjbGFyYXRpb25zXG5cdFx0XHRcdC8vIHRvIHRoZSBpbmhlcml0ZWQgbWF0ZXJpYWwsIHRoZW4gaXQgd2lsbCBiZSBwcmVzZXJ2ZWQgZm9yIHByb3BlciBNdWx0aU1hdGVyaWFsIGNvbnRpbnVhdGlvbi5cblxuXHRcdFx0XHRpZiAoIHByZXZpb3VzTWF0ZXJpYWwgJiYgcHJldmlvdXNNYXRlcmlhbC5uYW1lICYmIHR5cGVvZiBwcmV2aW91c01hdGVyaWFsLmNsb25lID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cblx0XHRcdFx0XHR2YXIgZGVjbGFyZWQgPSBwcmV2aW91c01hdGVyaWFsLmNsb25lKCAwICk7XG5cdFx0XHRcdFx0ZGVjbGFyZWQuaW5oZXJpdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR0aGlzLm9iamVjdC5tYXRlcmlhbHMucHVzaCggZGVjbGFyZWQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5vYmplY3RzLnB1c2goIHRoaXMub2JqZWN0ICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGZpbmFsaXplIDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0aWYgKCB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuX2ZpbmFsaXplID09PSAnZnVuY3Rpb24nICkge1xuXG5cdFx0XHRcdFx0dGhpcy5vYmplY3QuX2ZpbmFsaXplKCB0cnVlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LFxuXG5cdFx0XHRwYXJzZVZlcnRleEluZGV4OiBmdW5jdGlvbiAoIHZhbHVlLCBsZW4gKSB7XG5cblx0XHRcdFx0dmFyIGluZGV4ID0gcGFyc2VJbnQoIHZhbHVlLCAxMCApO1xuXHRcdFx0XHRyZXR1cm4gKCBpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAzICkgKiAzO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRwYXJzZU5vcm1hbEluZGV4OiBmdW5jdGlvbiAoIHZhbHVlLCBsZW4gKSB7XG5cblx0XHRcdFx0dmFyIGluZGV4ID0gcGFyc2VJbnQoIHZhbHVlLCAxMCApO1xuXHRcdFx0XHRyZXR1cm4gKCBpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAzICkgKiAzO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRwYXJzZVVWSW5kZXg6IGZ1bmN0aW9uICggdmFsdWUsIGxlbiApIHtcblxuXHRcdFx0XHR2YXIgaW5kZXggPSBwYXJzZUludCggdmFsdWUsIDEwICk7XG5cdFx0XHRcdHJldHVybiAoIGluZGV4ID49IDAgPyBpbmRleCAtIDEgOiBpbmRleCArIGxlbiAvIDIgKSAqIDI7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZFZlcnRleDogZnVuY3Rpb24gKCBhLCBiLCBjICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLnZlcnRpY2VzO1xuXHRcdFx0XHR2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG5cblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDAgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMSBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAyIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYiArIDAgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBiICsgMSBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGIgKyAyIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYyArIDAgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBjICsgMSBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGMgKyAyIF0gKTtcblxuXHRcdFx0fSxcblxuXHRcdFx0YWRkVmVydGV4TGluZTogZnVuY3Rpb24gKCBhICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLnZlcnRpY2VzO1xuXHRcdFx0XHR2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG5cblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDAgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMSBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAyIF0gKTtcblxuXHRcdFx0fSxcblxuXHRcdFx0YWRkTm9ybWFsIDogZnVuY3Rpb24gKCBhLCBiLCBjICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLm5vcm1hbHM7XG5cdFx0XHRcdHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS5ub3JtYWxzO1xuXG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMiBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGIgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYiArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBiICsgMiBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGMgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYyArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBjICsgMiBdICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZFVWOiBmdW5jdGlvbiAoIGEsIGIsIGMgKSB7XG5cblx0XHRcdFx0dmFyIHNyYyA9IHRoaXMudXZzO1xuXHRcdFx0XHR2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudXZzO1xuXG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBiICsgMCBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGIgKyAxIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYyArIDAgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBjICsgMSBdICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZFVWTGluZTogZnVuY3Rpb24gKCBhICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLnV2cztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAxIF0gKTtcblxuXHRcdFx0fSxcblxuXHRcdFx0YWRkRmFjZTogZnVuY3Rpb24gKCBhLCBiLCBjLCBkLCB1YSwgdWIsIHVjLCB1ZCwgbmEsIG5iLCBuYywgbmQgKSB7XG5cblx0XHRcdFx0dmFyIHZMZW4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcblxuXHRcdFx0XHR2YXIgaWEgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIGEsIHZMZW4gKTtcblx0XHRcdFx0dmFyIGliID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KCBiLCB2TGVuICk7XG5cdFx0XHRcdHZhciBpYyA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggYywgdkxlbiApO1xuXHRcdFx0XHR2YXIgaWQ7XG5cblx0XHRcdFx0aWYgKCBkID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHR0aGlzLmFkZFZlcnRleCggaWEsIGliLCBpYyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRpZCA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggZCwgdkxlbiApO1xuXG5cdFx0XHRcdFx0dGhpcy5hZGRWZXJ0ZXgoIGlhLCBpYiwgaWQgKTtcblx0XHRcdFx0XHR0aGlzLmFkZFZlcnRleCggaWIsIGljLCBpZCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHVhICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHR2YXIgdXZMZW4gPSB0aGlzLnV2cy5sZW5ndGg7XG5cblx0XHRcdFx0XHRpYSA9IHRoaXMucGFyc2VVVkluZGV4KCB1YSwgdXZMZW4gKTtcblx0XHRcdFx0XHRpYiA9IHRoaXMucGFyc2VVVkluZGV4KCB1YiwgdXZMZW4gKTtcblx0XHRcdFx0XHRpYyA9IHRoaXMucGFyc2VVVkluZGV4KCB1YywgdXZMZW4gKTtcblxuXHRcdFx0XHRcdGlmICggZCA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHR0aGlzLmFkZFVWKCBpYSwgaWIsIGljICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRpZCA9IHRoaXMucGFyc2VVVkluZGV4KCB1ZCwgdXZMZW4gKTtcblxuXHRcdFx0XHRcdFx0dGhpcy5hZGRVViggaWEsIGliLCBpZCApO1xuXHRcdFx0XHRcdFx0dGhpcy5hZGRVViggaWIsIGljLCBpZCApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG5hICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBOb3JtYWxzIGFyZSBtYW55IHRpbWVzIHRoZSBzYW1lLiBJZiBzbywgc2tpcCBmdW5jdGlvbiBjYWxsIGFuZCBwYXJzZUludC5cblx0XHRcdFx0XHR2YXIgbkxlbiA9IHRoaXMubm9ybWFscy5sZW5ndGg7XG5cdFx0XHRcdFx0aWEgPSB0aGlzLnBhcnNlTm9ybWFsSW5kZXgoIG5hLCBuTGVuICk7XG5cblx0XHRcdFx0XHRpYiA9IG5hID09PSBuYiA/IGlhIDogdGhpcy5wYXJzZU5vcm1hbEluZGV4KCBuYiwgbkxlbiApO1xuXHRcdFx0XHRcdGljID0gbmEgPT09IG5jID8gaWEgOiB0aGlzLnBhcnNlTm9ybWFsSW5kZXgoIG5jLCBuTGVuICk7XG5cblx0XHRcdFx0XHRpZiAoIGQgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0dGhpcy5hZGROb3JtYWwoIGlhLCBpYiwgaWMgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGlkID0gdGhpcy5wYXJzZU5vcm1hbEluZGV4KCBuZCwgbkxlbiApO1xuXG5cdFx0XHRcdFx0XHR0aGlzLmFkZE5vcm1hbCggaWEsIGliLCBpZCApO1xuXHRcdFx0XHRcdFx0dGhpcy5hZGROb3JtYWwoIGliLCBpYywgaWQgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZExpbmVHZW9tZXRyeTogZnVuY3Rpb24gKCB2ZXJ0aWNlcywgdXZzICkge1xuXG5cdFx0XHRcdHRoaXMub2JqZWN0Lmdlb21ldHJ5LnR5cGUgPSAnTGluZSc7XG5cblx0XHRcdFx0dmFyIHZMZW4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcblx0XHRcdFx0dmFyIHV2TGVuID0gdGhpcy51dnMubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIHZhciB2aSA9IDAsIGwgPSB2ZXJ0aWNlcy5sZW5ndGg7IHZpIDwgbDsgdmkgKysgKSB7XG5cblx0XHRcdFx0XHR0aGlzLmFkZFZlcnRleExpbmUoIHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggdmVydGljZXNbIHZpIF0sIHZMZW4gKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKCB2YXIgdXZpID0gMCwgbCA9IHV2cy5sZW5ndGg7IHV2aSA8IGw7IHV2aSArKyApIHtcblxuXHRcdFx0XHRcdHRoaXMuYWRkVVZMaW5lKCB0aGlzLnBhcnNlVVZJbmRleCggdXZzWyB1dmkgXSwgdXZMZW4gKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdHN0YXRlLnN0YXJ0T2JqZWN0KCAnJywgZmFsc2UgKTtcblxuXHRcdHJldHVybiBzdGF0ZTtcblxuXHR9LFxuXG5cdHBhcnNlOiBmdW5jdGlvbiAoIHRleHQgKSB7XG5cblx0XHRjb25zb2xlLnRpbWUoICdPQkpMb2FkZXInICk7XG5cblx0XHR2YXIgc3RhdGUgPSB0aGlzLl9jcmVhdGVQYXJzZXJTdGF0ZSgpO1xuXG5cdFx0aWYgKCB0ZXh0LmluZGV4T2YoICdcXHJcXG4nICkgIT09IC0gMSApIHtcblxuXHRcdFx0Ly8gVGhpcyBpcyBmYXN0ZXIgdGhhbiBTdHJpbmcuc3BsaXQgd2l0aCByZWdleCB0aGF0IHNwbGl0cyBvbiBib3RoXG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKCAvXFxyXFxuL2csICdcXG4nICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIHRleHQuaW5kZXhPZiggJ1xcXFxcXG4nICkgIT09IC0gMSkge1xuXG5cdFx0XHQvLyBqb2luIGxpbmVzIHNlcGFyYXRlZCBieSBhIGxpbmUgY29udGludWF0aW9uIGNoYXJhY3RlciAoXFwpXG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKCAvXFxcXFxcbi9nLCAnJyApO1xuXG5cdFx0fVxuXG5cdFx0dmFyIGxpbmVzID0gdGV4dC5zcGxpdCggJ1xcbicgKTtcblx0XHR2YXIgbGluZSA9ICcnLCBsaW5lRmlyc3RDaGFyID0gJycsIGxpbmVTZWNvbmRDaGFyID0gJyc7XG5cdFx0dmFyIGxpbmVMZW5ndGggPSAwO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblxuXHRcdC8vIEZhc3RlciB0byBqdXN0IHRyaW0gbGVmdCBzaWRlIG9mIHRoZSBsaW5lLiBVc2UgaWYgYXZhaWxhYmxlLlxuXHRcdHZhciB0cmltTGVmdCA9ICggdHlwZW9mICcnLnRyaW1MZWZ0ID09PSAnZnVuY3Rpb24nICk7XG5cblx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBsaW5lcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRsaW5lID0gbGluZXNbIGkgXTtcblxuXHRcdFx0bGluZSA9IHRyaW1MZWZ0ID8gbGluZS50cmltTGVmdCgpIDogbGluZS50cmltKCk7XG5cblx0XHRcdGxpbmVMZW5ndGggPSBsaW5lLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBsaW5lTGVuZ3RoID09PSAwICkgY29udGludWU7XG5cblx0XHRcdGxpbmVGaXJzdENoYXIgPSBsaW5lLmNoYXJBdCggMCApO1xuXG5cdFx0XHQvLyBAdG9kbyBpbnZva2UgcGFzc2VkIGluIGhhbmRsZXIgaWYgYW55XG5cdFx0XHRpZiAoIGxpbmVGaXJzdENoYXIgPT09ICcjJyApIGNvbnRpbnVlO1xuXG5cdFx0XHRpZiAoIGxpbmVGaXJzdENoYXIgPT09ICd2JyApIHtcblxuXHRcdFx0XHRsaW5lU2Vjb25kQ2hhciA9IGxpbmUuY2hhckF0KCAxICk7XG5cblx0XHRcdFx0aWYgKCBsaW5lU2Vjb25kQ2hhciA9PT0gJyAnICYmICggcmVzdWx0ID0gdGhpcy5yZWdleHAudmVydGV4X3BhdHRlcm4uZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHQvLyAwICAgICAgICAgICAgICAgICAgMSAgICAgIDIgICAgICAzXG5cdFx0XHRcdFx0Ly8gW1widiAxLjAgMi4wIDMuMFwiLCBcIjEuMFwiLCBcIjIuMFwiLCBcIjMuMFwiXVxuXG5cdFx0XHRcdFx0c3RhdGUudmVydGljZXMucHVzaChcblx0XHRcdFx0XHRcdHBhcnNlRmxvYXQoIHJlc3VsdFsgMSBdICksXG5cdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCByZXN1bHRbIDIgXSApLFxuXHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggcmVzdWx0WyAzIF0gKVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggbGluZVNlY29uZENoYXIgPT09ICduJyAmJiAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLm5vcm1hbF9wYXR0ZXJuLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0Ly8gMCAgICAgICAgICAgICAgICAgICAxICAgICAgMiAgICAgIDNcblx0XHRcdFx0XHQvLyBbXCJ2biAxLjAgMi4wIDMuMFwiLCBcIjEuMFwiLCBcIjIuMFwiLCBcIjMuMFwiXVxuXG5cdFx0XHRcdFx0c3RhdGUubm9ybWFscy5wdXNoKFxuXHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggcmVzdWx0WyAxIF0gKSxcblx0XHRcdFx0XHRcdHBhcnNlRmxvYXQoIHJlc3VsdFsgMiBdICksXG5cdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCByZXN1bHRbIDMgXSApXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBsaW5lU2Vjb25kQ2hhciA9PT0gJ3QnICYmICggcmVzdWx0ID0gdGhpcy5yZWdleHAudXZfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdC8vIDAgICAgICAgICAgICAgICAxICAgICAgMlxuXHRcdFx0XHRcdC8vIFtcInZ0IDAuMSAwLjJcIiwgXCIwLjFcIiwgXCIwLjJcIl1cblxuXHRcdFx0XHRcdHN0YXRlLnV2cy5wdXNoKFxuXHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggcmVzdWx0WyAxIF0gKSxcblx0XHRcdFx0XHRcdHBhcnNlRmxvYXQoIHJlc3VsdFsgMiBdIClcblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwiVW5leHBlY3RlZCB2ZXJ0ZXgvbm9ybWFsL3V2IGxpbmU6ICdcIiArIGxpbmUgICsgXCInXCIgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIGxpbmVGaXJzdENoYXIgPT09IFwiZlwiICkge1xuXG5cdFx0XHRcdGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleF91dl9ub3JtYWwuZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHQvLyBmIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsXG5cdFx0XHRcdFx0Ly8gMCAgICAgICAgICAgICAgICAgICAgICAgIDEgICAgMiAgICAzICAgIDQgICAgNSAgICA2ICAgIDcgICAgOCAgICA5ICAgMTAgICAgICAgICAxMSAgICAgICAgIDEyXG5cdFx0XHRcdFx0Ly8gW1wiZiAxLzEvMSAyLzIvMiAzLzMvM1wiLCBcIjFcIiwgXCIxXCIsIFwiMVwiLCBcIjJcIiwgXCIyXCIsIFwiMlwiLCBcIjNcIiwgXCIzXCIsIFwiM1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuXG5cdFx0XHRcdFx0c3RhdGUuYWRkRmFjZShcblx0XHRcdFx0XHRcdHJlc3VsdFsgMSBdLCByZXN1bHRbIDQgXSwgcmVzdWx0WyA3IF0sIHJlc3VsdFsgMTAgXSxcblx0XHRcdFx0XHRcdHJlc3VsdFsgMiBdLCByZXN1bHRbIDUgXSwgcmVzdWx0WyA4IF0sIHJlc3VsdFsgMTEgXSxcblx0XHRcdFx0XHRcdHJlc3VsdFsgMyBdLCByZXN1bHRbIDYgXSwgcmVzdWx0WyA5IF0sIHJlc3VsdFsgMTIgXVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleF91di5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdC8vIGYgdmVydGV4L3V2IHZlcnRleC91diB2ZXJ0ZXgvdXZcblx0XHRcdFx0XHQvLyAwICAgICAgICAgICAgICAgICAgMSAgICAyICAgIDMgICAgNCAgICA1ICAgIDYgICA3ICAgICAgICAgIDhcblx0XHRcdFx0XHQvLyBbXCJmIDEvMSAyLzIgMy8zXCIsIFwiMVwiLCBcIjFcIiwgXCIyXCIsIFwiMlwiLCBcIjNcIiwgXCIzXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuXG5cdFx0XHRcdFx0c3RhdGUuYWRkRmFjZShcblx0XHRcdFx0XHRcdHJlc3VsdFsgMSBdLCByZXN1bHRbIDMgXSwgcmVzdWx0WyA1IF0sIHJlc3VsdFsgNyBdLFxuXHRcdFx0XHRcdFx0cmVzdWx0WyAyIF0sIHJlc3VsdFsgNCBdLCByZXN1bHRbIDYgXSwgcmVzdWx0WyA4IF1cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXhfbm9ybWFsLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0Ly8gZiB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbFxuXHRcdFx0XHRcdC8vIDAgICAgICAgICAgICAgICAgICAgICAxICAgIDIgICAgMyAgICA0ICAgIDUgICAgNiAgIDcgICAgICAgICAgOFxuXHRcdFx0XHRcdC8vIFtcImYgMS8vMSAyLy8yIDMvLzNcIiwgXCIxXCIsIFwiMVwiLCBcIjJcIiwgXCIyXCIsIFwiM1wiLCBcIjNcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG5cblx0XHRcdFx0XHRzdGF0ZS5hZGRGYWNlKFxuXHRcdFx0XHRcdFx0cmVzdWx0WyAxIF0sIHJlc3VsdFsgMyBdLCByZXN1bHRbIDUgXSwgcmVzdWx0WyA3IF0sXG5cdFx0XHRcdFx0XHR1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0XHRyZXN1bHRbIDIgXSwgcmVzdWx0WyA0IF0sIHJlc3VsdFsgNiBdLCByZXN1bHRbIDggXVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleC5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdC8vIGYgdmVydGV4IHZlcnRleCB2ZXJ0ZXhcblx0XHRcdFx0XHQvLyAwICAgICAgICAgICAgMSAgICAyICAgIDMgICA0XG5cdFx0XHRcdFx0Ly8gW1wiZiAxIDIgM1wiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCB1bmRlZmluZWRdXG5cblx0XHRcdFx0XHRzdGF0ZS5hZGRGYWNlKFxuXHRcdFx0XHRcdFx0cmVzdWx0WyAxIF0sIHJlc3VsdFsgMiBdLCByZXN1bHRbIDMgXSwgcmVzdWx0WyA0IF1cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwiVW5leHBlY3RlZCBmYWNlIGxpbmU6ICdcIiArIGxpbmUgICsgXCInXCIgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIGxpbmVGaXJzdENoYXIgPT09IFwibFwiICkge1xuXG5cdFx0XHRcdHZhciBsaW5lUGFydHMgPSBsaW5lLnN1YnN0cmluZyggMSApLnRyaW0oKS5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0dmFyIGxpbmVWZXJ0aWNlcyA9IFtdLCBsaW5lVVZzID0gW107XG5cblx0XHRcdFx0aWYgKCBsaW5lLmluZGV4T2YoIFwiL1wiICkgPT09IC0gMSApIHtcblxuXHRcdFx0XHRcdGxpbmVWZXJ0aWNlcyA9IGxpbmVQYXJ0cztcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGxpID0gMCwgbGxlbiA9IGxpbmVQYXJ0cy5sZW5ndGg7IGxpIDwgbGxlbjsgbGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBwYXJ0cyA9IGxpbmVQYXJ0c1sgbGkgXS5zcGxpdCggXCIvXCIgKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBwYXJ0c1sgMCBdICE9PSBcIlwiICkgbGluZVZlcnRpY2VzLnB1c2goIHBhcnRzWyAwIF0gKTtcblx0XHRcdFx0XHRcdGlmICggcGFydHNbIDEgXSAhPT0gXCJcIiApIGxpbmVVVnMucHVzaCggcGFydHNbIDEgXSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdFx0c3RhdGUuYWRkTGluZUdlb21ldHJ5KCBsaW5lVmVydGljZXMsIGxpbmVVVnMgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5vYmplY3RfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHQvLyBvIG9iamVjdF9uYW1lXG5cdFx0XHRcdC8vIG9yXG5cdFx0XHRcdC8vIGcgZ3JvdXBfbmFtZVxuXG5cdFx0XHRcdC8vIFdPUktBUk9VTkQ6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTI4Njlcblx0XHRcdFx0Ly8gdmFyIG5hbWUgPSByZXN1bHRbIDAgXS5zdWJzdHIoIDEgKS50cmltKCk7XG5cdFx0XHRcdHZhciBuYW1lID0gKCBcIiBcIiArIHJlc3VsdFsgMCBdLnN1YnN0ciggMSApLnRyaW0oKSApLnN1YnN0ciggMSApO1xuXG5cdFx0XHRcdHN0YXRlLnN0YXJ0T2JqZWN0KCBuYW1lICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHRoaXMucmVnZXhwLm1hdGVyaWFsX3VzZV9wYXR0ZXJuLnRlc3QoIGxpbmUgKSApIHtcblxuXHRcdFx0XHQvLyBtYXRlcmlhbFxuXG5cdFx0XHRcdHN0YXRlLm9iamVjdC5zdGFydE1hdGVyaWFsKCBsaW5lLnN1YnN0cmluZyggNyApLnRyaW0oKSwgc3RhdGUubWF0ZXJpYWxMaWJyYXJpZXMgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggdGhpcy5yZWdleHAubWF0ZXJpYWxfbGlicmFyeV9wYXR0ZXJuLnRlc3QoIGxpbmUgKSApIHtcblxuXHRcdFx0XHQvLyBtdGwgZmlsZVxuXG5cdFx0XHRcdHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzLnB1c2goIGxpbmUuc3Vic3RyaW5nKCA3ICkudHJpbSgpICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuc21vb3RoaW5nX3BhdHRlcm4uZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0Ly8gc21vb3RoIHNoYWRpbmdcblxuXHRcdFx0XHQvLyBAdG9kbyBIYW5kbGUgZmlsZXMgdGhhdCBoYXZlIHZhcnlpbmcgc21vb3RoIHZhbHVlcyBmb3IgYSBzZXQgb2YgZmFjZXMgaW5zaWRlIG9uZSBnZW9tZXRyeSxcblx0XHRcdFx0Ly8gYnV0IGRvZXMgbm90IGRlZmluZSBhIHVzZW10bCBmb3IgZWFjaCBmYWNlIHNldC5cblx0XHRcdFx0Ly8gVGhpcyBzaG91bGQgYmUgZGV0ZWN0ZWQgYW5kIGEgZHVtbXkgbWF0ZXJpYWwgY3JlYXRlZCAobGF0ZXIgTXVsdGlNYXRlcmlhbCBhbmQgZ2VvbWV0cnkgZ3JvdXBzKS5cblx0XHRcdFx0Ly8gVGhpcyByZXF1aXJlcyBzb21lIGNhcmUgdG8gbm90IGNyZWF0ZSBleHRyYSBtYXRlcmlhbCBvbiBlYWNoIHNtb290aCB2YWx1ZSBmb3IgXCJub3JtYWxcIiBvYmogZmlsZXMuXG5cdFx0XHRcdC8vIHdoZXJlIGV4cGxpY2l0IHVzZW10bCBkZWZpbmVzIGdlb21ldHJ5IGdyb3Vwcy5cblx0XHRcdFx0Ly8gRXhhbXBsZSBhc3NldDogZXhhbXBsZXMvbW9kZWxzL29iai9jZXJiZXJ1cy9DZXJiZXJ1cy5vYmpcblxuXHRcdFx0XHR2YXIgdmFsdWUgPSByZXN1bHRbIDEgXS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0c3RhdGUub2JqZWN0LnNtb290aCA9ICggdmFsdWUgPT09ICcxJyB8fCB2YWx1ZSA9PT0gJ29uJyApO1xuXG5cdFx0XHRcdHZhciBtYXRlcmlhbCA9IHN0YXRlLm9iamVjdC5jdXJyZW50TWF0ZXJpYWwoKTtcblx0XHRcdFx0aWYgKCBtYXRlcmlhbCApIHtcblxuXHRcdFx0XHRcdG1hdGVyaWFsLnNtb290aCA9IHN0YXRlLm9iamVjdC5zbW9vdGg7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEhhbmRsZSBudWxsIHRlcm1pbmF0ZWQgZmlsZXMgd2l0aG91dCBleGNlcHRpb25cblx0XHRcdFx0aWYgKCBsaW5lID09PSAnXFwwJyApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJVbmV4cGVjdGVkIGxpbmU6ICdcIiArIGxpbmUgICsgXCInXCIgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0c3RhdGUuZmluYWxpemUoKTtcblxuXHRcdHZhciBjb250YWluZXIgPSBuZXcgVEhSRUUuR3JvdXAoKTtcblx0XHRjb250YWluZXIubWF0ZXJpYWxMaWJyYXJpZXMgPSBbXS5jb25jYXQoIHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzICk7XG5cblx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBzdGF0ZS5vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdHZhciBvYmplY3QgPSBzdGF0ZS5vYmplY3RzWyBpIF07XG5cdFx0XHR2YXIgZ2VvbWV0cnkgPSBvYmplY3QuZ2VvbWV0cnk7XG5cdFx0XHR2YXIgbWF0ZXJpYWxzID0gb2JqZWN0Lm1hdGVyaWFscztcblx0XHRcdHZhciBpc0xpbmUgPSAoIGdlb21ldHJ5LnR5cGUgPT09ICdMaW5lJyApO1xuXG5cdFx0XHQvLyBTa2lwIG8vZyBsaW5lIGRlY2xhcmF0aW9ucyB0aGF0IGRpZCBub3QgZm9sbG93IHdpdGggYW55IGZhY2VzXG5cdFx0XHRpZiAoIGdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCA9PT0gMCApIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYnVmZmVyZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcblxuXHRcdFx0YnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCBnZW9tZXRyeS52ZXJ0aWNlcyApLCAzICkgKTtcblxuXHRcdFx0aWYgKCBnZW9tZXRyeS5ub3JtYWxzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0YnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggZ2VvbWV0cnkubm9ybWFscyApLCAzICkgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRidWZmZXJnZW9tZXRyeS5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggZ2VvbWV0cnkudXZzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0YnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAndXYnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCBnZW9tZXRyeS51dnMgKSwgMiApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ3JlYXRlIG1hdGVyaWFsc1xuXG5cdFx0XHR2YXIgY3JlYXRlZE1hdGVyaWFscyA9IFtdO1xuXG5cdFx0XHRmb3IgKCB2YXIgbWkgPSAwLCBtaUxlbiA9IG1hdGVyaWFscy5sZW5ndGg7IG1pIDwgbWlMZW4gOyBtaSsrICkge1xuXG5cdFx0XHRcdHZhciBzb3VyY2VNYXRlcmlhbCA9IG1hdGVyaWFsc1ttaV07XG5cdFx0XHRcdHZhciBtYXRlcmlhbCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRpZiAoIHRoaXMubWF0ZXJpYWxzICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0bWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFscy5jcmVhdGUoIHNvdXJjZU1hdGVyaWFsLm5hbWUgKTtcblxuXHRcdFx0XHRcdC8vIG10bCBldGMuIGxvYWRlcnMgcHJvYmFibHkgY2FuJ3QgY3JlYXRlIGxpbmUgbWF0ZXJpYWxzIGNvcnJlY3RseSwgY29weSBwcm9wZXJ0aWVzIHRvIGEgbGluZSBtYXRlcmlhbC5cblx0XHRcdFx0XHRpZiAoIGlzTGluZSAmJiBtYXRlcmlhbCAmJiAhICggbWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCApICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgbWF0ZXJpYWxMaW5lID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKCk7XG5cdFx0XHRcdFx0XHRtYXRlcmlhbExpbmUuY29weSggbWF0ZXJpYWwgKTtcblx0XHRcdFx0XHRcdG1hdGVyaWFsID0gbWF0ZXJpYWxMaW5lO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICEgbWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0XHRtYXRlcmlhbCA9ICggISBpc0xpbmUgPyBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKSA6IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCgpICk7XG5cdFx0XHRcdFx0bWF0ZXJpYWwubmFtZSA9IHNvdXJjZU1hdGVyaWFsLm5hbWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdG1hdGVyaWFsLnNoYWRpbmcgPSBzb3VyY2VNYXRlcmlhbC5zbW9vdGggPyBUSFJFRS5TbW9vdGhTaGFkaW5nIDogVEhSRUUuRmxhdFNoYWRpbmc7XG5cblx0XHRcdFx0Y3JlYXRlZE1hdGVyaWFscy5wdXNoKG1hdGVyaWFsKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBDcmVhdGUgbWVzaFxuXG5cdFx0XHR2YXIgbWVzaDtcblxuXHRcdFx0aWYgKCBjcmVhdGVkTWF0ZXJpYWxzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdFx0Zm9yICggdmFyIG1pID0gMCwgbWlMZW4gPSBtYXRlcmlhbHMubGVuZ3RoOyBtaSA8IG1pTGVuIDsgbWkrKyApIHtcblxuXHRcdFx0XHRcdHZhciBzb3VyY2VNYXRlcmlhbCA9IG1hdGVyaWFsc1ttaV07XG5cdFx0XHRcdFx0YnVmZmVyZ2VvbWV0cnkuYWRkR3JvdXAoIHNvdXJjZU1hdGVyaWFsLmdyb3VwU3RhcnQsIHNvdXJjZU1hdGVyaWFsLmdyb3VwQ291bnQsIG1pICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBtdWx0aU1hdGVyaWFsID0gbmV3IFRIUkVFLk11bHRpTWF0ZXJpYWwoIGNyZWF0ZWRNYXRlcmlhbHMgKTtcblx0XHRcdFx0bWVzaCA9ICggISBpc0xpbmUgPyBuZXcgVEhSRUUuTWVzaCggYnVmZmVyZ2VvbWV0cnksIG11bHRpTWF0ZXJpYWwgKSA6IG5ldyBUSFJFRS5MaW5lU2VnbWVudHMoIGJ1ZmZlcmdlb21ldHJ5LCBtdWx0aU1hdGVyaWFsICkgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRtZXNoID0gKCAhIGlzTGluZSA/IG5ldyBUSFJFRS5NZXNoKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1sgMCBdICkgOiBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1sgMCBdICkgKTtcblx0XHRcdH1cblxuXHRcdFx0bWVzaC5uYW1lID0gb2JqZWN0Lm5hbWU7XG5cblx0XHRcdGNvbnRhaW5lci5hZGQoIG1lc2ggKTtcblxuXHRcdH1cblxuXHRcdGNvbnNvbGUudGltZUVuZCggJ09CSkxvYWRlcicgKTtcblxuXHRcdHJldHVybiBjb250YWluZXI7XG5cblx0fVxuXG59O1xuIiwiLyoqXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tXG4gKiBAYXV0aG9yIHN0ZXdkaW8gLyBodHRwOi8vc3Rld2QuaW9cbiAqL1xuXG5USFJFRS5WaXZlQ29udHJvbGxlciA9IGZ1bmN0aW9uICggaWQgKSB7XG5cblx0VEhSRUUuT2JqZWN0M0QuY2FsbCggdGhpcyApO1xuXG5cdHZhciBzY29wZSA9IHRoaXM7XG5cdHZhciBnYW1lcGFkO1xuXG5cdHZhciBheGVzID0gWyAwLCAwIF07XG5cdHZhciB0aHVtYnBhZElzUHJlc3NlZCA9IGZhbHNlO1xuXHR2YXIgdHJpZ2dlcklzUHJlc3NlZCA9IGZhbHNlO1xuXHR2YXIgZ3JpcHNBcmVQcmVzc2VkID0gZmFsc2U7XG5cdHZhciBtZW51SXNQcmVzc2VkID0gZmFsc2U7XG5cblx0ZnVuY3Rpb24gZmluZEdhbWVwYWQoIGlkICkge1xuXG5cdFx0Ly8gSXRlcmF0ZSBhY3Jvc3MgZ2FtZXBhZHMgYXMgVml2ZSBDb250cm9sbGVycyBtYXkgbm90IGJlXG5cdFx0Ly8gaW4gcG9zaXRpb24gMCBhbmQgMS5cblxuXHRcdHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBqID0gMDsgaSA8IDQ7IGkgKysgKSB7XG5cblx0XHRcdHZhciBnYW1lcGFkID0gZ2FtZXBhZHNbIGkgXTtcblxuXHRcdFx0aWYgKCBnYW1lcGFkICYmIGdhbWVwYWQuaWQgPT09ICdPcGVuVlIgR2FtZXBhZCcgKSB7XG5cblx0XHRcdFx0aWYgKCBqID09PSBpZCApIHJldHVybiBnYW1lcGFkO1xuXG5cdFx0XHRcdGogKys7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cblx0dGhpcy5tYXRyaXhBdXRvVXBkYXRlID0gZmFsc2U7XG5cdHRoaXMuc3RhbmRpbmdNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG5cdHRoaXMuZ2V0R2FtZXBhZCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBnYW1lcGFkO1xuXG5cdH07XG5cblx0dGhpcy5nZXRCdXR0b25TdGF0ZSA9IGZ1bmN0aW9uICggYnV0dG9uICkge1xuXG5cdFx0aWYgKCBidXR0b24gPT09ICd0aHVtYnBhZCcgKSByZXR1cm4gdGh1bWJwYWRJc1ByZXNzZWQ7XG5cdFx0aWYgKCBidXR0b24gPT09ICd0cmlnZ2VyJyApIHJldHVybiB0cmlnZ2VySXNQcmVzc2VkO1xuXHRcdGlmICggYnV0dG9uID09PSAnZ3JpcHMnICkgcmV0dXJuIGdyaXBzQXJlUHJlc3NlZDtcblx0XHRpZiAoIGJ1dHRvbiA9PT0gJ21lbnUnICkgcmV0dXJuIG1lbnVJc1ByZXNzZWQ7XG5cblx0fTtcblxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGdhbWVwYWQgPSBmaW5kR2FtZXBhZCggaWQgKTtcblxuXHRcdGlmICggZ2FtZXBhZCAhPT0gdW5kZWZpbmVkICYmIGdhbWVwYWQucG9zZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRpZiAoIGdhbWVwYWQucG9zZSA9PT0gbnVsbCApIHJldHVybjsgLy8gTm8gdXNlciBhY3Rpb24geWV0XG5cblx0XHRcdC8vICBQb3NpdGlvbiBhbmQgb3JpZW50YXRpb24uXG5cblx0XHRcdHZhciBwb3NlID0gZ2FtZXBhZC5wb3NlO1xuXG5cdFx0XHRpZiAoIHBvc2UucG9zaXRpb24gIT09IG51bGwgKSBzY29wZS5wb3NpdGlvbi5mcm9tQXJyYXkoIHBvc2UucG9zaXRpb24gKTtcblx0XHRcdGlmICggcG9zZS5vcmllbnRhdGlvbiAhPT0gbnVsbCApIHNjb3BlLnF1YXRlcm5pb24uZnJvbUFycmF5KCBwb3NlLm9yaWVudGF0aW9uICk7XG5cdFx0XHRzY29wZS5tYXRyaXguY29tcG9zZSggc2NvcGUucG9zaXRpb24sIHNjb3BlLnF1YXRlcm5pb24sIHNjb3BlLnNjYWxlICk7XG5cdFx0XHRzY29wZS5tYXRyaXgubXVsdGlwbHlNYXRyaWNlcyggc2NvcGUuc3RhbmRpbmdNYXRyaXgsIHNjb3BlLm1hdHJpeCApO1xuXHRcdFx0c2NvcGUubWF0cml4V29ybGROZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHRzY29wZS52aXNpYmxlID0gdHJ1ZTtcblxuXHRcdFx0Ly8gIFRodW1icGFkIGFuZCBCdXR0b25zLlxuXG5cdFx0XHRpZiAoIGF4ZXNbIDAgXSAhPT0gZ2FtZXBhZC5heGVzWyAwIF0gfHwgYXhlc1sgMSBdICE9PSBnYW1lcGFkLmF4ZXNbIDEgXSApIHtcblxuXHRcdFx0XHRheGVzWyAwIF0gPSBnYW1lcGFkLmF4ZXNbIDAgXTsgLy8gIFggYXhpczogLTEgPSBMZWZ0LCArMSA9IFJpZ2h0LlxuXHRcdFx0XHRheGVzWyAxIF0gPSBnYW1lcGFkLmF4ZXNbIDEgXTsgLy8gIFkgYXhpczogLTEgPSBCb3R0b20sICsxID0gVG9wLlxuXHRcdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICdheGlzY2hhbmdlZCcsIGF4ZXM6IGF4ZXMgfSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggdGh1bWJwYWRJc1ByZXNzZWQgIT09IGdhbWVwYWQuYnV0dG9uc1sgMCBdLnByZXNzZWQgKSB7XG5cblx0XHRcdFx0dGh1bWJwYWRJc1ByZXNzZWQgPSBnYW1lcGFkLmJ1dHRvbnNbIDAgXS5wcmVzc2VkO1xuXHRcdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6IHRodW1icGFkSXNQcmVzc2VkID8gJ3RodW1icGFkZG93bicgOiAndGh1bWJwYWR1cCcgfSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggdHJpZ2dlcklzUHJlc3NlZCAhPT0gZ2FtZXBhZC5idXR0b25zWyAxIF0ucHJlc3NlZCApIHtcblxuXHRcdFx0XHR0cmlnZ2VySXNQcmVzc2VkID0gZ2FtZXBhZC5idXR0b25zWyAxIF0ucHJlc3NlZDtcblx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiB0cmlnZ2VySXNQcmVzc2VkID8gJ3RyaWdnZXJkb3duJyA6ICd0cmlnZ2VydXAnIH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGdyaXBzQXJlUHJlc3NlZCAhPT0gZ2FtZXBhZC5idXR0b25zWyAyIF0ucHJlc3NlZCApIHtcblxuXHRcdFx0XHRncmlwc0FyZVByZXNzZWQgPSBnYW1lcGFkLmJ1dHRvbnNbIDIgXS5wcmVzc2VkO1xuXHRcdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6IGdyaXBzQXJlUHJlc3NlZCA/ICdncmlwc2Rvd24nIDogJ2dyaXBzdXAnIH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG1lbnVJc1ByZXNzZWQgIT09IGdhbWVwYWQuYnV0dG9uc1sgMyBdLnByZXNzZWQgKSB7XG5cblx0XHRcdFx0bWVudUlzUHJlc3NlZCA9IGdhbWVwYWQuYnV0dG9uc1sgMyBdLnByZXNzZWQ7XG5cdFx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIHsgdHlwZTogbWVudUlzUHJlc3NlZCA/ICdtZW51ZG93bicgOiAnbWVudXVwJyB9ICk7XG5cblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHNjb3BlLnZpc2libGUgPSBmYWxzZTtcblxuXHRcdH1cblxuXHR9O1xuXG59O1xuXG5USFJFRS5WaXZlQ29udHJvbGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUgKTtcblRIUkVFLlZpdmVDb250cm9sbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRIUkVFLlZpdmVDb250cm9sbGVyO1xuIiwiKGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09XCJvYmplY3RcIiYmdHlwZW9mIG1vZHVsZSE9PVwidW5kZWZpbmVkXCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiKXtnPXdpbmRvd31lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuV2ViVlJNYW5hZ2VyID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLypcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxudmFyIEVtaXR0ZXIgPSBfZGVyZXFfKCcuL2VtaXR0ZXIuanMnKTtcbnZhciBNb2RlcyA9IF9kZXJlcV8oJy4vbW9kZXMuanMnKTtcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XG5cbi8qKlxuICogRXZlcnl0aGluZyBoYXZpbmcgdG8gZG8gd2l0aCB0aGUgV2ViVlIgYnV0dG9uLlxuICogRW1pdHMgYSAnY2xpY2snIGV2ZW50IHdoZW4gaXQncyBjbGlja2VkLlxuICovXG5mdW5jdGlvbiBCdXR0b25NYW5hZ2VyKG9wdF9yb290KSB7XG4gIHZhciByb290ID0gb3B0X3Jvb3QgfHwgZG9jdW1lbnQuYm9keTtcbiAgdGhpcy5sb2FkSWNvbnNfKCk7XG5cbiAgLy8gTWFrZSB0aGUgZnVsbHNjcmVlbiBidXR0b24uXG4gIHZhciBmc0J1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKCk7XG4gIGZzQnV0dG9uLnNyYyA9IHRoaXMuSUNPTlMuZnVsbHNjcmVlbjtcbiAgZnNCdXR0b24udGl0bGUgPSAnRnVsbHNjcmVlbiBtb2RlJztcbiAgdmFyIHMgPSBmc0J1dHRvbi5zdHlsZTtcbiAgcy5ib3R0b20gPSAwO1xuICBzLnJpZ2h0ID0gMDtcbiAgZnNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNyZWF0ZUNsaWNrSGFuZGxlcl8oJ2ZzJykpO1xuICByb290LmFwcGVuZENoaWxkKGZzQnV0dG9uKTtcbiAgdGhpcy5mc0J1dHRvbiA9IGZzQnV0dG9uO1xuXG4gIC8vIE1ha2UgdGhlIFZSIGJ1dHRvbi5cbiAgdmFyIHZyQnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24oKTtcbiAgdnJCdXR0b24uc3JjID0gdGhpcy5JQ09OUy5jYXJkYm9hcmQ7XG4gIHZyQnV0dG9uLnRpdGxlID0gJ1ZpcnR1YWwgcmVhbGl0eSBtb2RlJztcbiAgdmFyIHMgPSB2ckJ1dHRvbi5zdHlsZTtcbiAgcy5ib3R0b20gPSAwO1xuICBzLnJpZ2h0ID0gJzQ4cHgnO1xuICB2ckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY3JlYXRlQ2xpY2tIYW5kbGVyXygndnInKSk7XG4gIHJvb3QuYXBwZW5kQ2hpbGQodnJCdXR0b24pO1xuICB0aGlzLnZyQnV0dG9uID0gdnJCdXR0b247XG5cbiAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuXG59XG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZSA9IG5ldyBFbWl0dGVyKCk7XG5cbkJ1dHRvbk1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZUJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gIGJ1dHRvbi5jbGFzc05hbWUgPSAnd2VidnItYnV0dG9uJztcbiAgdmFyIHMgPSBidXR0b24uc3R5bGU7XG4gIHMucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICBzLndpZHRoID0gJzI0cHgnXG4gIHMuaGVpZ2h0ID0gJzI0cHgnO1xuICBzLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcbiAgcy5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICBzLmJvcmRlciA9IDA7XG4gIHMudXNlclNlbGVjdCA9ICdub25lJztcbiAgcy53ZWJraXRVc2VyU2VsZWN0ID0gJ25vbmUnO1xuICBzLk1velVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gIHMuY3Vyc29yID0gJ3BvaW50ZXInO1xuICBzLnBhZGRpbmcgPSAnMTJweCc7XG4gIHMuekluZGV4ID0gMTtcbiAgcy5kaXNwbGF5ID0gJ25vbmUnO1xuICBzLmJveFNpemluZyA9ICdjb250ZW50LWJveCc7XG5cbiAgLy8gUHJldmVudCBidXR0b24gZnJvbSBiZWluZyBzZWxlY3RlZCBhbmQgZHJhZ2dlZC5cbiAgYnV0dG9uLmRyYWdnYWJsZSA9IGZhbHNlO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSk7XG5cbiAgLy8gU3R5bGUgaXQgb24gaG92ZXIuXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgIHMuZmlsdGVyID0gcy53ZWJraXRGaWx0ZXIgPSAnZHJvcC1zaGFkb3coMCAwIDVweCByZ2JhKDI1NSwyNTUsMjU1LDEpKSc7XG4gIH0pO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICBzLmZpbHRlciA9IHMud2Via2l0RmlsdGVyID0gJyc7XG4gIH0pO1xuICByZXR1cm4gYnV0dG9uO1xufTtcblxuQnV0dG9uTWFuYWdlci5wcm90b3R5cGUuc2V0TW9kZSA9IGZ1bmN0aW9uKG1vZGUsIGlzVlJDb21wYXRpYmxlKSB7XG4gIGlzVlJDb21wYXRpYmxlID0gaXNWUkNvbXBhdGlibGUgfHwgV2ViVlJDb25maWcuRk9SQ0VfRU5BQkxFX1ZSO1xuICBpZiAoIXRoaXMuaXNWaXNpYmxlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGNhc2UgTW9kZXMuTk9STUFMOlxuICAgICAgdGhpcy5mc0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIHRoaXMuZnNCdXR0b24uc3JjID0gdGhpcy5JQ09OUy5mdWxsc2NyZWVuO1xuICAgICAgdGhpcy52ckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gKGlzVlJDb21wYXRpYmxlID8gJ2Jsb2NrJyA6ICdub25lJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIE1vZGVzLk1BR0lDX1dJTkRPVzpcbiAgICAgIHRoaXMuZnNCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICB0aGlzLmZzQnV0dG9uLnNyYyA9IHRoaXMuSUNPTlMuZXhpdEZ1bGxzY3JlZW47XG4gICAgICB0aGlzLnZyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICBicmVhaztcbiAgICBjYXNlIE1vZGVzLlZSOlxuICAgICAgdGhpcy5mc0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgdGhpcy52ckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICAvLyBIYWNrIGZvciBTYWZhcmkgTWFjL2lPUyB0byBmb3JjZSByZWxheW91dCAoc3ZnLXNwZWNpZmljIGlzc3VlKVxuICAvLyBodHRwOi8vZ29vLmdsL2hqZ1I2clxuICB2YXIgb2xkVmFsdWUgPSB0aGlzLmZzQnV0dG9uLnN0eWxlLmRpc3BsYXk7XG4gIHRoaXMuZnNCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICB0aGlzLmZzQnV0dG9uLm9mZnNldEhlaWdodDtcbiAgdGhpcy5mc0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gb2xkVmFsdWU7XG59O1xuXG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZS5zZXRWaXNpYmlsaXR5ID0gZnVuY3Rpb24oaXNWaXNpYmxlKSB7XG4gIHRoaXMuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xuICB0aGlzLmZzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnYmxvY2snIDogJ25vbmUnO1xuICB0aGlzLnZyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnYmxvY2snIDogJ25vbmUnO1xufTtcblxuQnV0dG9uTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlQ2xpY2tIYW5kbGVyXyA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuZW1pdChldmVudE5hbWUpO1xuICB9LmJpbmQodGhpcyk7XG59O1xuXG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZS5sb2FkSWNvbnNfID0gZnVuY3Rpb24oKSB7XG4gIC8vIFByZWxvYWQgc29tZSBoYXJkLWNvZGVkIFNWRy5cbiAgdGhpcy5JQ09OUyA9IHt9O1xuICB0aGlzLklDT05TLmNhcmRib2FyZCA9IFV0aWwuYmFzZTY0KCdpbWFnZS9zdmcreG1sJywgJ1BITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOSEI0SWlCb1pXbG5hSFE5SWpJMGNIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlJMFpHUmtaR1JpSStDaUFnSUNBOGNHRjBhQ0JrUFNKTk1qQXVOelFnTmtnekxqSXhRekl1TlRVZ05pQXlJRFl1TlRjZ01pQTNMakk0ZGpFd0xqUTBZekFnTGpjdU5UVWdNUzR5T0NBeExqSXpJREV1TWpob05DNDNPV011TlRJZ01DQXVPVFl0TGpNeklERXVNVFF0TGpjNWJERXVOQzB6TGpRNFl5NHlNeTB1TlRrdU56a3RNUzR3TVNBeExqUTBMVEV1TURGek1TNHlNUzQwTWlBeExqUTFJREV1TURGc01TNHpPU0F6TGpRNFl5NHhPUzQwTmk0Mk15NDNPU0F4TGpFeExqYzVhRFF1TnpsakxqY3hJREFnTVM0eU5pMHVOVGNnTVM0eU5pMHhMakk0VmpjdU1qaGpNQzB1TnkwdU5UVXRNUzR5T0MweExqSTJMVEV1TWpoNlRUY3VOU0F4TkM0Mk1tTXRNUzR4TnlBd0xUSXVNVE10TGprMUxUSXVNVE10TWk0eE1pQXdMVEV1TVRjdU9UWXRNaTR4TXlBeUxqRXpMVEl1TVRNZ01TNHhPQ0F3SURJdU1USXVPVFlnTWk0eE1pQXlMakV6Y3kwdU9UVWdNaTR4TWkweUxqRXlJREl1TVRKNmJUa2dNR010TVM0eE55QXdMVEl1TVRNdExqazFMVEl1TVRNdE1pNHhNaUF3TFRFdU1UY3VPVFl0TWk0eE15QXlMakV6TFRJdU1UTnpNaTR4TWk0NU5pQXlMakV5SURJdU1UTXRMamsxSURJdU1USXRNaTR4TWlBeUxqRXllaUl2UGdvZ0lDQWdQSEJoZEdnZ1ptbHNiRDBpYm05dVpTSWdaRDBpVFRBZ01HZ3lOSFl5TkVnd1ZqQjZJaTgrQ2p3dmMzWm5QZ289Jyk7XG4gIHRoaXMuSUNPTlMuZnVsbHNjcmVlbiA9IFV0aWwuYmFzZTY0KCdpbWFnZS9zdmcreG1sJywgJ1BITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOSEI0SWlCb1pXbG5hSFE5SWpJMGNIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlJMFpHUmtaR1JpSStDaUFnSUNBOGNHRjBhQ0JrUFNKTk1DQXdhREkwZGpJMFNEQjZJaUJtYVd4c1BTSnViMjVsSWk4K0NpQWdJQ0E4Y0dGMGFDQmtQU0pOTnlBeE5FZzFkalZvTlhZdE1rZzNkaTB6ZW0wdE1pMDBhREpXTjJnelZqVklOWFkxZW0weE1pQTNhQzB6ZGpKb05YWXROV2d0TW5ZemVrMHhOQ0ExZGpKb00zWXphREpXTldndE5Yb2lMejRLUEM5emRtYytDZz09Jyk7XG4gIHRoaXMuSUNPTlMuZXhpdEZ1bGxzY3JlZW4gPSBVdGlsLmJhc2U2NCgnaW1hZ2Uvc3ZnK3htbCcsICdQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TkhCNElpQm9aV2xuYUhROUlqSTBjSGdpSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJZ1ptbHNiRDBpSTBaR1JrWkdSaUkrQ2lBZ0lDQThjR0YwYUNCa1BTSk5NQ0F3YURJMGRqSTBTREI2SWlCbWFXeHNQU0p1YjI1bElpOCtDaUFnSUNBOGNHRjBhQ0JrUFNKTk5TQXhObWd6ZGpOb01uWXROVWcxZGpKNmJUTXRPRWcxZGpKb05WWTFTRGgyTTNwdE5pQXhNV2d5ZGkwemFETjJMVEpvTFRWMk5YcHRNaTB4TVZZMWFDMHlkalZvTlZZNGFDMHplaUl2UGdvOEwzTjJaejRLJyk7XG4gIHRoaXMuSUNPTlMuc2V0dGluZ3MgPSBVdGlsLmJhc2U2NCgnaW1hZ2Uvc3ZnK3htbCcsICdQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TkhCNElpQm9aV2xuYUhROUlqSTBjSGdpSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJZ1ptbHNiRDBpSTBaR1JrWkdSaUkrQ2lBZ0lDQThjR0YwYUNCa1BTSk5NQ0F3YURJMGRqSTBTREI2SWlCbWFXeHNQU0p1YjI1bElpOCtDaUFnSUNBOGNHRjBhQ0JrUFNKTk1Ua3VORE1nTVRJdU9UaGpMakEwTFM0ek1pNHdOeTB1TmpRdU1EY3RMams0Y3kwdU1ETXRMalkyTFM0d055MHVPVGhzTWk0eE1TMHhMalkxWXk0eE9TMHVNVFV1TWpRdExqUXlMakV5TFM0Mk5Hd3RNaTB6TGpRMll5MHVNVEl0TGpJeUxTNHpPUzB1TXkwdU5qRXRMakl5YkMweUxqUTVJREZqTFM0MU1pMHVOQzB4TGpBNExTNDNNeTB4TGpZNUxTNDVPR3d0TGpNNExUSXVOalZETVRRdU5EWWdNaTR4T0NBeE5DNHlOU0F5SURFMElESm9MVFJqTFM0eU5TQXdMUzQwTmk0eE9DMHVORGt1TkRKc0xTNHpPQ0F5TGpZMVl5MHVOakV1TWpVdE1TNHhOeTQxT1MweExqWTVMams0YkMweUxqUTVMVEZqTFM0eU15MHVNRGt0TGpRNUlEQXRMall4TGpJeWJDMHlJRE11TkRaakxTNHhNeTR5TWkwdU1EY3VORGt1TVRJdU5qUnNNaTR4TVNBeExqWTFZeTB1TURRdU16SXRMakEzTGpZMUxTNHdOeTQ1T0hNdU1ETXVOall1TURjdU9UaHNMVEl1TVRFZ01TNDJOV010TGpFNUxqRTFMUzR5TkM0ME1pMHVNVEl1TmpSc01pQXpMalEyWXk0eE1pNHlNaTR6T1M0ekxqWXhMakl5YkRJdU5Ea3RNV011TlRJdU5DQXhMakE0TGpjeklERXVOamt1T1Roc0xqTTRJREl1TmpWakxqQXpMakkwTGpJMExqUXlMalE1TGpReWFEUmpMakkxSURBZ0xqUTJMUzR4T0M0ME9TMHVOREpzTGpNNExUSXVOalZqTGpZeExTNHlOU0F4TGpFM0xTNDFPU0F4TGpZNUxTNDVPR3d5TGpRNUlERmpMakl6TGpBNUxqUTVJREFnTGpZeExTNHlNbXd5TFRNdU5EWmpMakV5TFM0eU1pNHdOeTB1TkRrdExqRXlMUzQyTkd3dE1pNHhNUzB4TGpZMWVrMHhNaUF4TlM0MVl5MHhMamt6SURBdE15NDFMVEV1TlRjdE15NDFMVE11TlhNeExqVTNMVE11TlNBekxqVXRNeTQxSURNdU5TQXhMalUzSURNdU5TQXpMalV0TVM0MU55QXpMalV0TXk0MUlETXVOWG9pTHo0S1BDOXpkbWMrQ2c9PScpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25NYW5hZ2VyO1xuXG59LHtcIi4vZW1pdHRlci5qc1wiOjIsXCIuL21vZGVzLmpzXCI6MyxcIi4vdXRpbC5qc1wiOjR9XSwyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8qXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmZ1bmN0aW9uIEVtaXR0ZXIoKSB7XG4gIHRoaXMuY2FsbGJhY2tzID0ge307XG59XG5cbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50TmFtZV07XG4gIGlmICghY2FsbGJhY2tzKSB7XG4gICAgLy9jb25zb2xlLmxvZygnTm8gdmFsaWQgY2FsbGJhY2sgc3BlY2lmaWVkLicpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgLy8gRWxpbWluYXRlIHRoZSBmaXJzdCBwYXJhbSAodGhlIGNhbGxiYWNrKS5cbiAgYXJncy5zaGlmdCgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxufTtcblxuRW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gIGlmIChldmVudE5hbWUgaW4gdGhpcy5jYWxsYmFja3MpIHtcbiAgICB0aGlzLmNhbGxiYWNrc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50TmFtZV0gPSBbY2FsbGJhY2tdO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XG5cbn0se31dLDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLypcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxudmFyIE1vZGVzID0ge1xuICBVTktOT1dOOiAwLFxuICAvLyBOb3QgZnVsbHNjcmVlbiwganVzdCB0cmFja2luZy5cbiAgTk9STUFMOiAxLFxuICAvLyBNYWdpYyB3aW5kb3cgaW1tZXJzaXZlIG1vZGUuXG4gIE1BR0lDX1dJTkRPVzogMixcbiAgLy8gRnVsbCBzY3JlZW4gc3BsaXQgc2NyZWVuIFZSIG1vZGUuXG4gIFZSOiAzLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNb2RlcztcblxufSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vKlxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG52YXIgVXRpbCA9IHt9O1xuXG5VdGlsLmJhc2U2NCA9IGZ1bmN0aW9uKG1pbWVUeXBlLCBiYXNlNjQpIHtcbiAgcmV0dXJuICdkYXRhOicgKyBtaW1lVHlwZSArICc7YmFzZTY0LCcgKyBiYXNlNjQ7XG59O1xuXG5VdGlsLmlzTW9iaWxlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBjaGVjayA9IGZhbHNlO1xuICAoZnVuY3Rpb24oYSl7aWYoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCw0KSkpY2hlY2sgPSB0cnVlfSkobmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhKTtcbiAgcmV0dXJuIGNoZWNrO1xufTtcblxuVXRpbC5pc0ZpcmVmb3ggPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC9maXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbn07XG5cblV0aWwuaXNJT1MgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8oaVBhZHxpUGhvbmV8aVBvZCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xufTtcblxuVXRpbC5pc0lGcmFtZSA9IGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG5VdGlsLmFwcGVuZFF1ZXJ5UGFyYW1ldGVyID0gZnVuY3Rpb24odXJsLCBrZXksIHZhbHVlKSB7XG4gIC8vIERldGVybWluZSBkZWxpbWl0ZXIgYmFzZWQgb24gaWYgdGhlIFVSTCBhbHJlYWR5IEdFVCBwYXJhbWV0ZXJzIGluIGl0LlxuICB2YXIgZGVsaW1pdGVyID0gKHVybC5pbmRleE9mKCc/JykgPCAwID8gJz8nIDogJyYnKTtcbiAgdXJsICs9IGRlbGltaXRlciArIGtleSArICc9JyArIHZhbHVlO1xuICByZXR1cm4gdXJsO1xufTtcblxuLy8gRnJvbSBodHRwOi8vZ29vLmdsLzRXWDN0Z1xuVXRpbC5nZXRRdWVyeVBhcmFtZXRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtdLywgXCJcXFxcW1wiKS5yZXBsYWNlKC9bXFxdXS8sIFwiXFxcXF1cIik7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbXFxcXD8mXVwiICsgbmFtZSArIFwiPShbXiYjXSopXCIpLFxuICAgICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWMobG9jYXRpb24uc2VhcmNoKTtcbiAgcmV0dXJuIHJlc3VsdHMgPT09IG51bGwgPyBcIlwiIDogZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG59O1xuXG5VdGlsLmlzTGFuZHNjYXBlTW9kZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gKHdpbmRvdy5vcmllbnRhdGlvbiA9PSA5MCB8fCB3aW5kb3cub3JpZW50YXRpb24gPT0gLTkwKTtcbn07XG5cblV0aWwuZ2V0U2NyZWVuV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIE1hdGgubWF4KHdpbmRvdy5zY3JlZW4ud2lkdGgsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSAqXG4gICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbn07XG5cblV0aWwuZ2V0U2NyZWVuSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLm1pbih3aW5kb3cuc2NyZWVuLndpZHRoLCB3aW5kb3cuc2NyZWVuLmhlaWdodCkgKlxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW87XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWw7XG5cbn0se31dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLypcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxudmFyIEJ1dHRvbk1hbmFnZXIgPSBfZGVyZXFfKCcuL2J1dHRvbi1tYW5hZ2VyLmpzJyk7XG52YXIgRW1pdHRlciA9IF9kZXJlcV8oJy4vZW1pdHRlci5qcycpO1xudmFyIE1vZGVzID0gX2RlcmVxXygnLi9tb2Rlcy5qcycpO1xudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGdldHRpbmcgaW4gYW5kIG91dCBvZiBWUiBtb2RlLlxuICovXG5mdW5jdGlvbiBXZWJWUk1hbmFnZXIocmVuZGVyZXIsIGVmZmVjdCwgcGFyYW1zKSB7XG4gIHRoaXMucGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuXG4gIHRoaXMubW9kZSA9IE1vZGVzLlVOS05PV047XG5cbiAgLy8gU2V0IG9wdGlvbiB0byBoaWRlIHRoZSBidXR0b24uXG4gIHRoaXMuaGlkZUJ1dHRvbiA9IHRoaXMucGFyYW1zLmhpZGVCdXR0b24gfHwgZmFsc2U7XG4gIC8vIFdoZXRoZXIgb3Igbm90IHRoZSBGT1Ygc2hvdWxkIGJlIGRpc3RvcnRlZCBvciB1bi1kaXN0b3J0ZWQuIEJ5IGRlZmF1bHQsIGl0XG4gIC8vIHNob3VsZCBiZSBkaXN0b3J0ZWQsIGJ1dCBpbiB0aGUgY2FzZSBvZiB2ZXJ0ZXggc2hhZGVyIGJhc2VkIGRpc3RvcnRpb24sXG4gIC8vIGVuc3VyZSB0aGF0IHdlIHVzZSB1bmRpc3RvcnRlZCBwYXJhbWV0ZXJzLlxuICB0aGlzLnByZWRpc3RvcnRlZCA9ICEhdGhpcy5wYXJhbXMucHJlZGlzdG9ydGVkO1xuXG4gIC8vIFNhdmUgdGhlIFRIUkVFLmpzIHJlbmRlcmVyIGFuZCBlZmZlY3QgZm9yIGxhdGVyLlxuICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gIHRoaXMuZWZmZWN0ID0gZWZmZWN0O1xuICB2YXIgcG9seWZpbGxXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYnZyLXBvbHlmaWxsLWZ1bGxzY3JlZW4td3JhcHBlcicpO1xuICB0aGlzLmJ1dHRvbiA9IG5ldyBCdXR0b25NYW5hZ2VyKHBvbHlmaWxsV3JhcHBlcik7XG5cbiAgdGhpcy5pc0Z1bGxzY3JlZW5EaXNhYmxlZCA9ICEhVXRpbC5nZXRRdWVyeVBhcmFtZXRlcignbm9fZnVsbHNjcmVlbicpO1xuICB0aGlzLnN0YXJ0TW9kZSA9IE1vZGVzLk5PUk1BTDtcbiAgdmFyIHN0YXJ0TW9kZVBhcmFtID0gcGFyc2VJbnQoVXRpbC5nZXRRdWVyeVBhcmFtZXRlcignc3RhcnRfbW9kZScpKTtcbiAgaWYgKCFpc05hTihzdGFydE1vZGVQYXJhbSkpIHtcbiAgICB0aGlzLnN0YXJ0TW9kZSA9IHN0YXJ0TW9kZVBhcmFtO1xuICB9XG5cbiAgaWYgKHRoaXMuaGlkZUJ1dHRvbikge1xuICAgIHRoaXMuYnV0dG9uLnNldFZpc2liaWxpdHkoZmFsc2UpO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgaXMgY29tcGF0aWJsZSB3aXRoIFdlYlZSLlxuICB0aGlzLmdldERldmljZUJ5VHlwZV8oVlJEaXNwbGF5KS50aGVuKGZ1bmN0aW9uKGhtZCkge1xuICAgIHRoaXMuaG1kID0gaG1kO1xuXG4gICAgLy8gT25seSBlbmFibGUgVlIgbW9kZSBpZiB0aGVyZSdzIGEgVlIgZGV2aWNlIGF0dGFjaGVkIG9yIHdlIGFyZSBydW5uaW5nIHRoZVxuICAgIC8vIHBvbHlmaWxsIG9uIG1vYmlsZS5cbiAgICBpZiAoIXRoaXMuaXNWUkNvbXBhdGlibGVPdmVycmlkZSkge1xuICAgICAgdGhpcy5pc1ZSQ29tcGF0aWJsZSA9ICAhaG1kLmlzUG9seWZpbGxlZCB8fCBVdGlsLmlzTW9iaWxlKCk7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLnN0YXJ0TW9kZSkge1xuICAgICAgY2FzZSBNb2Rlcy5NQUdJQ19XSU5ET1c6XG4gICAgICAgIHRoaXMuc2V0TW9kZV8oTW9kZXMuTUFHSUNfV0lORE9XKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE1vZGVzLlZSOlxuICAgICAgICB0aGlzLmVudGVyVlJNb2RlXygpO1xuICAgICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLlZSKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk5PUk1BTCk7XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KCdpbml0aWFsaXplZCcpO1xuICB9LmJpbmQodGhpcykpO1xuXG4gIC8vIEhvb2sgdXAgYnV0dG9uIGxpc3RlbmVycy5cbiAgdGhpcy5idXR0b24ub24oJ2ZzJywgdGhpcy5vbkZTQ2xpY2tfLmJpbmQodGhpcykpO1xuICB0aGlzLmJ1dHRvbi5vbigndnInLCB0aGlzLm9uVlJDbGlja18uYmluZCh0aGlzKSk7XG5cbiAgLy8gQmluZCB0byBmdWxsc2NyZWVuIGV2ZW50cy5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXG4gICAgICB0aGlzLm9uRnVsbHNjcmVlbkNoYW5nZV8uYmluZCh0aGlzKSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLFxuICAgICAgdGhpcy5vbkZ1bGxzY3JlZW5DaGFuZ2VfLmJpbmQodGhpcykpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtc2Z1bGxzY3JlZW5jaGFuZ2UnLFxuICAgICAgdGhpcy5vbkZ1bGxzY3JlZW5DaGFuZ2VfLmJpbmQodGhpcykpO1xuXG4gIC8vIEJpbmQgdG8gVlIqIHNwZWNpZmljIGV2ZW50cy5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3ZyZGlzcGxheXByZXNlbnRjaGFuZ2UnLFxuICAgICAgdGhpcy5vblZSRGlzcGxheVByZXNlbnRDaGFuZ2VfLmJpbmQodGhpcykpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndnJkaXNwbGF5ZGV2aWNlcGFyYW1zY2hhbmdlJyxcbiAgICAgIHRoaXMub25WUkRpc3BsYXlEZXZpY2VQYXJhbXNDaGFuZ2VfLmJpbmQodGhpcykpO1xufVxuXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlID0gbmV3IEVtaXR0ZXIoKTtcblxuLy8gRXhwb3NlIHRoZXNlIHZhbHVlcyBleHRlcm5hbGx5LlxuV2ViVlJNYW5hZ2VyLk1vZGVzID0gTW9kZXM7XG5cbldlYlZSTWFuYWdlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oc2NlbmUsIGNhbWVyYSwgdGltZXN0YW1wKSB7XG4gIC8vIFNjZW5lIG1heSBiZSBhbiBhcnJheSBvZiB0d28gc2NlbmVzLCBvbmUgZm9yIGVhY2ggZXllLlxuICBpZiAoc2NlbmUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHRoaXMuZWZmZWN0LnJlbmRlcihzY2VuZVswXSwgY2FtZXJhKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmVmZmVjdC5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gIH1cbn07XG5cbldlYlZSTWFuYWdlci5wcm90b3R5cGUuc2V0VlJDb21wYXRpYmxlT3ZlcnJpZGUgPSBmdW5jdGlvbihpc1ZSQ29tcGF0aWJsZSkge1xuICB0aGlzLmlzVlJDb21wYXRpYmxlID0gaXNWUkNvbXBhdGlibGU7XG4gIHRoaXMuaXNWUkNvbXBhdGlibGVPdmVycmlkZSA9IHRydWU7XG5cbiAgLy8gRG9uJ3QgYWN0dWFsbHkgY2hhbmdlIG1vZGVzLCBqdXN0IHVwZGF0ZSB0aGUgYnV0dG9ucy5cbiAgdGhpcy5idXR0b24uc2V0TW9kZSh0aGlzLm1vZGUsIHRoaXMuaXNWUkNvbXBhdGlibGUpO1xufTtcblxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5zZXRGdWxsc2NyZWVuQ2FsbGJhY2sgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB0aGlzLmZ1bGxzY3JlZW5DYWxsYmFjayA9IGNhbGxiYWNrO1xufTtcblxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5zZXRWUkNhbGxiYWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdGhpcy52ckNhbGxiYWNrID0gY2FsbGJhY2s7XG59O1xuXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLnNldEV4aXRGdWxsc2NyZWVuQ2FsbGJhY2sgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB0aGlzLmV4aXRGdWxsc2NyZWVuQ2FsbGJhY2sgPSBjYWxsYmFjaztcbn1cblxuLyoqXG4gKiBQcm9taXNlIHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgSE1EIGRldmljZSBhdmFpbGFibGUuXG4gKi9cbldlYlZSTWFuYWdlci5wcm90b3R5cGUuZ2V0RGV2aWNlQnlUeXBlXyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCkudGhlbihmdW5jdGlvbihkaXNwbGF5cykge1xuICAgICAgLy8gUHJvbWlzZSBzdWNjZWVkcywgYnV0IGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgZGlzcGxheXMgYWN0dWFsbHkuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BsYXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChkaXNwbGF5c1tpXSBpbnN0YW5jZW9mIHR5cGUpIHtcbiAgICAgICAgICByZXNvbHZlKGRpc3BsYXlzW2ldKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIE5vIGRpc3BsYXlzIGFyZSBmb3VuZC5cbiAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGVudGVyaW5nIFZSIG1vZGUuXG4gKi9cbldlYlZSTWFuYWdlci5wcm90b3R5cGUuZW50ZXJWUk1vZGVfID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaG1kLnJlcXVlc3RQcmVzZW50KFt7XG4gICAgc291cmNlOiB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQsXG4gICAgcHJlZGlzdG9ydGVkOiB0aGlzLnByZWRpc3RvcnRlZFxuICB9XSk7XG59O1xuXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLnNldE1vZGVfID0gZnVuY3Rpb24obW9kZSkge1xuICB2YXIgb2xkTW9kZSA9IHRoaXMubW9kZTtcbiAgaWYgKG1vZGUgPT0gdGhpcy5tb2RlKSB7XG4gICAgY29uc29sZS53YXJuKCdOb3QgY2hhbmdpbmcgbW9kZXMsIGFscmVhZHkgaW4gJXMnLCBtb2RlKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gY29uc29sZS5sb2coJ01vZGUgY2hhbmdlOiAlcyA9PiAlcycsIHRoaXMubW9kZSwgbW9kZSk7XG4gIHRoaXMubW9kZSA9IG1vZGU7XG4gIHRoaXMuYnV0dG9uLnNldE1vZGUobW9kZSwgdGhpcy5pc1ZSQ29tcGF0aWJsZSk7XG5cbiAgLy8gRW1pdCBhbiBldmVudCBpbmRpY2F0aW5nIHRoZSBtb2RlIGNoYW5nZWQuXG4gIHRoaXMuZW1pdCgnbW9kZWNoYW5nZScsIG1vZGUsIG9sZE1vZGUpO1xufTtcblxuLyoqXG4gKiBNYWluIGJ1dHRvbiB3YXMgY2xpY2tlZC5cbiAqL1xuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5vbkZTQ2xpY2tfID0gZnVuY3Rpb24oKSB7XG4gIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgY2FzZSBNb2Rlcy5OT1JNQUw6XG4gICAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBoYWNrIGlmL3doZW4gaU9TIGdldHMgcmVhbCBmdWxsc2NyZWVuIG1vZGUuXG4gICAgICAvLyBJZiB0aGlzIGlzIGFuIGlmcmFtZSBvbiBpT1MsIGJyZWFrIG91dCBhbmQgb3BlbiBpbiBub19mdWxsc2NyZWVuIG1vZGUuXG4gICAgICBpZiAoVXRpbC5pc0lPUygpICYmIFV0aWwuaXNJRnJhbWUoKSkge1xuICAgICAgICBpZiAodGhpcy5mdWxsc2NyZWVuQ2FsbGJhY2spIHtcbiAgICAgICAgICB0aGlzLmZ1bGxzY3JlZW5DYWxsYmFjaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgICAgICB1cmwgPSBVdGlsLmFwcGVuZFF1ZXJ5UGFyYW1ldGVyKHVybCwgJ25vX2Z1bGxzY3JlZW4nLCAndHJ1ZScpO1xuICAgICAgICAgIHVybCA9IFV0aWwuYXBwZW5kUXVlcnlQYXJhbWV0ZXIodXJsLCAnc3RhcnRfbW9kZScsIE1vZGVzLk1BR0lDX1dJTkRPVyk7XG4gICAgICAgICAgdG9wLmxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk1BR0lDX1dJTkRPVyk7XG4gICAgICB0aGlzLnJlcXVlc3RGdWxsc2NyZWVuXygpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBNb2Rlcy5NQUdJQ19XSU5ET1c6XG4gICAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW5EaXNhYmxlZCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmV4aXRGdWxsc2NyZWVuQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbkNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk5PUk1BTCk7XG4gICAgICB0aGlzLmV4aXRGdWxsc2NyZWVuXygpO1xuICAgICAgYnJlYWs7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFZSIGJ1dHRvbiB3YXMgY2xpY2tlZC5cbiAqL1xuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5vblZSQ2xpY2tfID0gZnVuY3Rpb24oKSB7XG4gIC8vIFRPRE86IFJlbW92ZSB0aGlzIGhhY2sgd2hlbiBpT1MgaGFzIGZ1bGxzY3JlZW4gbW9kZS5cbiAgLy8gSWYgdGhpcyBpcyBhbiBpZnJhbWUgb24gaU9TLCBicmVhayBvdXQgYW5kIG9wZW4gaW4gbm9fZnVsbHNjcmVlbiBtb2RlLlxuICBpZiAodGhpcy5tb2RlID09IE1vZGVzLk5PUk1BTCAmJiBVdGlsLmlzSU9TKCkgJiYgVXRpbC5pc0lGcmFtZSgpKSB7XG4gICAgaWYgKHRoaXMudnJDYWxsYmFjaykge1xuICAgICAgdGhpcy52ckNhbGxiYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgIHVybCA9IFV0aWwuYXBwZW5kUXVlcnlQYXJhbWV0ZXIodXJsLCAnbm9fZnVsbHNjcmVlbicsICd0cnVlJyk7XG4gICAgICB1cmwgPSBVdGlsLmFwcGVuZFF1ZXJ5UGFyYW1ldGVyKHVybCwgJ3N0YXJ0X21vZGUnLCBNb2Rlcy5WUik7XG4gICAgICB0b3AubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgdGhpcy5lbnRlclZSTW9kZV8oKTtcbn07XG5cbldlYlZSTWFuYWdlci5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW5fID0gZnVuY3Rpb24oKSB7XG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5ib2R5O1xuICAvL3ZhciBjYW52YXMgPSB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQ7XG4gIGlmIChjYW52YXMucmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICBjYW52YXMucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgfSBlbHNlIGlmIChjYW52YXMubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcbiAgICBjYW52YXMubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcbiAgfSBlbHNlIGlmIChjYW52YXMud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICBjYW52YXMud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgfSBlbHNlIGlmIChjYW52YXMubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xuICAgIGNhbnZhcy5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7XG4gIH1cbn07XG5cbldlYlZSTWFuYWdlci5wcm90b3R5cGUuZXhpdEZ1bGxzY3JlZW5fID0gZnVuY3Rpb24oKSB7XG4gIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikge1xuICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikge1xuICAgIGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcbiAgfSBlbHNlIGlmIChkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbikge1xuICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikge1xuICAgIGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4oKTtcbiAgfVxufTtcblxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5vblZSRGlzcGxheVByZXNlbnRDaGFuZ2VfID0gZnVuY3Rpb24oZSkge1xuICBjb25zb2xlLmxvZygnb25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlXycsIGUpO1xuICBpZiAodGhpcy5obWQuaXNQcmVzZW50aW5nKSB7XG4gICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5WUik7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5OT1JNQUwpO1xuICB9XG59O1xuXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLm9uVlJEaXNwbGF5RGV2aWNlUGFyYW1zQ2hhbmdlXyA9IGZ1bmN0aW9uKGUpIHtcbiAgY29uc29sZS5sb2coJ29uVlJEaXNwbGF5RGV2aWNlUGFyYW1zQ2hhbmdlXycsIGUpO1xufTtcblxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5vbkZ1bGxzY3JlZW5DaGFuZ2VfID0gZnVuY3Rpb24oZSkge1xuICAvLyBJZiB3ZSBsZWF2ZSBmdWxsLXNjcmVlbiwgZ28gYmFjayB0byBub3JtYWwgbW9kZS5cbiAgaWYgKGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50ID09PSBudWxsIHx8XG4gICAgICBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCA9PT0gbnVsbCkge1xuICAgIHRoaXMuc2V0TW9kZV8oTW9kZXMuTk9STUFMKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJWUk1hbmFnZXI7XG5cbn0se1wiLi9idXR0b24tbWFuYWdlci5qc1wiOjEsXCIuL2VtaXR0ZXIuanNcIjoyLFwiLi9tb2Rlcy5qc1wiOjMsXCIuL3V0aWwuanNcIjo0fV19LHt9LFs1XSkoNSlcbn0pOyIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IEN1cnZlIGZyb20gJy4vY3VydmUnXG5pbXBvcnQgRmlyZSBmcm9tICcuL2ZpcmUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhbGxvb24ge1xuXG4gIGNvbnN0cnVjdG9yIChzY2VuZSwgbG9hZGVyKSB7XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lXG4gICAgdGhpcy5sb2FkZXIgPSBsb2FkZXJcblxuICAgIHRoaXMuYmFsbG9vbiA9IHVuZGVmaW5lZFxuICAgIHRoaXMubGluZSA9IHVuZGVmaW5lZFxuICAgIHRoaXMuaGFuZGxlID0gdW5kZWZpbmVkXG4gICAgdGhpcy5yb3BlID0gbmV3IFRIUkVFLkdyb3VwKClcbiAgICB0aGlzLnRvSW50ZXJzZWN0ID0gW11cbiAgICB0aGlzLmZseWluZ09iamVjdHMgPSBbXVxuICAgIHRoaXMuZmlyZSA9IG5ldyBGaXJlKClcblxuICAgIHRoaXMubG9hZCgpXG4gIH1cblxuICBsb2FkICgpIHtcbiAgICB0aGlzLmxvYWRlci5sb2FkKFxuICAgICAgJ2Fzc2V0cy9tb2RlbHMvYmFsbG9vbi9iYWxsb29uMy5qc29uJyxcbiAgICAgIChiYWxsb29uKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGJhbGxvb24pXG4gICAgICAgIHRoaXMuYmFsbG9vbiA9IGJhbGxvb25cbiAgICAgICAgdGhpcy5iYWxsb29uLmNoaWxkcmVuWzBdLmdlb21ldHJ5LmNvbXB1dGVGbGF0VmVydGV4Tm9ybWFscygpXG4gICAgICAgIHRoaXMuYmFsbG9vbi5wb3NpdGlvbi5zZXQoMCwgNSwgMClcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5iYWxsb29uKVxuICAgICAgICB0aGlzLmZseWluZ09iamVjdHMucHVzaCh0aGlzLmJhbGxvb24pXG4gICAgICB9XG4gICAgKVxuICAgIHRoaXMuY3JlYXRlUm9wZSgpXG4gICAgdGhpcy5jcmVhdGVGaXJlKClcbiAgfVxuXG4gIGNyZWF0ZVJvcGUgKCkge1xuICAgIGNvbnN0IHBhdGggPSBuZXcgQ3VydmUoMTApXG4gICAgY29uc3QgdHViZSA9IG5ldyBUSFJFRS5UdWJlR2VvbWV0cnkocGF0aCwgMzAsIDMsIDgsIHRydWUgKVxuICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoIHsgY29sb3I6IDB4MDAwMDAwIH0gKVxuICAgIGNvbnN0IHRvcnVzID0gbmV3IFRIUkVFLlRvcnVzR2VvbWV0cnkoMC4yLCAwLjA1LCA2NCwgMzIpXG5cbiAgICB0aGlzLmxpbmUgPSBuZXcgVEhSRUUuTWVzaCh0dWJlLCBtYXRlcmlhbClcbiAgICB0aGlzLmxpbmUuc2NhbGUuc2V0U2NhbGFyKDAuMDEpXG5cbiAgICB0aGlzLmhhbmRsZSA9IG5ldyBUSFJFRS5NZXNoKHRvcnVzLCBtYXRlcmlhbClcbiAgICB0aGlzLmhhbmRsZS5zY2FsZS5zZXRTY2FsYXIoMC41KVxuICAgIHRoaXMuaGFuZGxlLnBvc2l0aW9uLnkgPSAtMC4xXG5cbiAgICB0aGlzLnJvcGUuYWRkKHRoaXMubGluZSwgdGhpcy5oYW5kbGUpXG4gICAgdGhpcy5yb3BlLnBvc2l0aW9uLnNldCgwLCA3LCAxNSlcblxuICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMucm9wZSlcbiAgICB0aGlzLnRvSW50ZXJzZWN0LnB1c2godGhpcy5saW5lKVxuICAgIHRoaXMudG9JbnRlcnNlY3QucHVzaCh0aGlzLmhhbmRsZSlcbiAgICB0aGlzLmZseWluZ09iamVjdHMucHVzaCh0aGlzLnJvcGUpXG4gIH1cblxuICBjcmVhdGVGaXJlICgpIHtcbiAgICB0aGlzLmZpcmUuaW5pdCgpXG4gICAgdGhpcy5maXJlLnBvc2l0aW9uLnNldCgtMSwgNywgMClcbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmZpcmUpXG4gICAgdGhpcy5mbHlpbmdPYmplY3RzLnB1c2godGhpcy5maXJlKVxuICB9XG5cbiAgdXBkYXRlIChkZWx0YSwgZWxhcHNlZCwgdCkge1xuICAgIHRoaXMuZmlyZS51cGRhdGUoZGVsdGEsIGVsYXBzZWQpXG4gICAgZm9yIChsZXQgb2JqZWN0IG9mIHRoaXMuZmx5aW5nT2JqZWN0cykge1xuICAgICAgb2JqZWN0LnBvc2l0aW9uLnogPSAyMCpNYXRoLnNpbih0KSArIDBcbiAgICAgIG9iamVjdC5wb3NpdGlvbi54ID0gMjAqTWF0aC5jb3ModCkgKyAwXG4gICAgfVxuICAgIHRoaXMucm9wZS5wb3NpdGlvbi56ID0gMjAqTWF0aC5zaW4odCkgLTAuNVxuXG4gICAgLy8gdGhpcy5mYWxsKGRlbHRhKVxuICB9XG5cbiAgZmx5SGlnaGVyIChkZWx0YSkge1xuICAgIHRoaXMuZmlyZS5zY2FsZS5zZXRTY2FsYXIoMilcbiAgICBmb3IgKGxldCBvYmplY3Qgb2YgdGhpcy5mbHlpbmdPYmplY3RzKSB7XG4gICAgICBvYmplY3QucG9zaXRpb24ueSArPSBkZWx0YVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0UG9zaXRpb24gKCkge1xuICAgIHRoaXMuYmFsbG9vbi5wb3NpdGlvbi5zZXQoMCwgNSwgMClcbiAgICB0aGlzLnJvcGUucG9zaXRpb24uc2V0KDAsIDcsIDApXG4gICAgdGhpcy5maXJlLnBvc2l0aW9uLnNldCgtMSwgMTAsIDApXG4gICAgZm9yIChsZXQgb2JqZWN0IG9mIHRoaXMuZmx5aW5nT2JqZWN0cykge1xuICAgICAgb2JqZWN0LnBvc2l0aW9uLnkgPSAxMFxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZSAoKSB7XG4gICAgZm9yIChsZXQgb2JqZWN0IG9mIHRoaXMuZmx5aW5nT2JqZWN0cykge1xuICAgICAgc2NlbmUucmVtb3ZlKG9iamVjdClcbiAgICB9XG4gIH1cblxuICBmYWxsIChkZWx0YSkge1xuICAgIHRoaXMuZmlyZS5zY2FsZS5zZXRTY2FsYXIoMSlcbiAgICBmb3IgKGxldCBvYmplY3Qgb2YgdGhpcy5mbHlpbmdPYmplY3RzKSB7XG4gICAgICBvYmplY3QucG9zaXRpb24ueSArPSBkZWx0YSAqIC0wLjJcbiAgICB9XG4gIH1cblxuICBnZXRGbHlpbmdPYmplY3RzICgpIHtcbiAgICByZXR1cm4gdGhpcy5mbHlpbmdPYmplY3RzXG4gIH1cblxuICBnZXRSb3BlICgpIHtcbiAgICByZXR1cm4gdGhpcy50b0ludGVyc2VjdFxuICB9XG5cbn1cbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IF9WUkNvbnRyb2xzIGZyb20gJ1ZSQ29udHJvbHMnXG5pbXBvcnQgX1ZpdmVDb250cm9sbGVyIGZyb20gJ1ZpdmVDb250cm9sbGVyJ1xuaW1wb3J0IF9PQkpMb2FkZXIgZnJvbSAnT0JKTG9hZGVyJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVycyB7XG5cbiAgY29uc3RydWN0b3IgKGNhbWVyYSwgYm9keSwgbG9hZGVyLCByb3BlKSB7XG4gICAgdGhpcy5ib2R5ID0gYm9keVxuICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhXG4gICAgdGhpcy5sb2FkZXIgPSBsb2FkZXJcblxuICAgIHRoaXMudGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKClcbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKVxuXG4gICAgdGhpcy52aXZlQ29udHJvbGxlcjEgPSB1bmRlZmluZWRcbiAgICB0aGlzLnZpdmVDb250cm9sbGVyMiA9IHVuZGVmaW5lZFxuXG4gICAgdGhpcy52ckNvbnRyb2xzID0gbmV3IFRIUkVFLlZSQ29udHJvbHModGhpcy5jYW1lcmEpXG4gICAgdGhpcy52ckNvbnRyb2xzLnN0YW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMudGVtcE1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KClcblxuICAgIHRoaXMuaW50ZXJzZWN0ZWQgPSBbXVxuICAgIHRoaXMucm9wZSA9IHJvcGVcbiAgICB0aGlzLmlzTW92aW5nVXAgPSBmYWxzZVxuXG4gICAgdGhpcy5sb2FkVml2ZUNvbnRyb2xsZXJNb2RlbHMgPSB0aGlzLmxvYWRWaXZlQ29udHJvbGxlck1vZGVscy5iaW5kKHRoaXMpXG4gICAgdGhpcy5vblRyaWdnZXJEb3duID0gdGhpcy5vblRyaWdnZXJEb3duLmJpbmQodGhpcylcblxuICAgIC8vIHRoaXMuaW5pdCgpXG5cbiAgfVxuXG4gIGxvYWRWaXZlQ29udHJvbGxlck1vZGVscyAoKSB7XG4gICAgdGhpcy5sb2FkZXIuc2V0UGF0aCgnYXNzZXRzL21vZGVscy92aXZlLWNvbnRyb2xsZXIvJylcbiAgICB0aGlzLmxvYWRlci5sb2FkKCd2cl9jb250cm9sbGVyX3ZpdmVfMV81Lm9iaicsIChvYmplY3QpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdsb2FkZWQgY29udHJvbGxlciBPQkonKVxuXG4gICAgICB0aGlzLnRleHR1cmVMb2FkZXIuc2V0UGF0aCgnYXNzZXRzL21vZGVscy92aXZlLWNvbnRyb2xsZXIvJylcblxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBvYmplY3QuY2hpbGRyZW5bMF1cbiAgICAgIGNvbnRyb2xsZXIubWF0ZXJpYWwubWFwID0gdGhpcy50ZXh0dXJlTG9hZGVyLmxvYWQoJ29uZXBvaW50Zml2ZV90ZXh0dXJlLnBuZycpXG4gICAgICBjb250cm9sbGVyLm1hdGVyaWFsLnNwZWN1bGFyTWFwID0gdGhpcy50ZXh0dXJlTG9hZGVyLmxvYWQoJ29uZXBvaW50Zml2ZV9zcGVjLnBuZycpXG5cbiAgICAgIHRoaXMudml2ZUNvbnRyb2xsZXIxLmFkZChvYmplY3QuY2xvbmUoKSlcbiAgICAgIHRoaXMudml2ZUNvbnRyb2xsZXIyLmFkZChvYmplY3QuY2xvbmUoKSlcbiAgICB9KVxuICB9XG5cbiAgaW5pdCAoKSB7XG5cbiAgICB0aGlzLnZpdmVDb250cm9sbGVyMSA9IG5ldyBUSFJFRS5WaXZlQ29udHJvbGxlcigwKVxuICAgIHRoaXMudml2ZUNvbnRyb2xsZXIxLnN0YW5kaW5nTWF0cml4ID0gdGhpcy52ckNvbnRyb2xzLmdldFN0YW5kaW5nTWF0cml4KClcbiAgICB0aGlzLnZpdmVDb250cm9sbGVyMS5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VyZG93bicsIHRoaXMub25UcmlnZ2VyRG93bilcbiAgICB0aGlzLnZpdmVDb250cm9sbGVyMS5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VydXAnLCB0aGlzLm9uVHJpZ2dlclVwKVxuICAgIHRoaXMuYm9keS5hZGQodGhpcy52aXZlQ29udHJvbGxlcjEpXG5cbiAgICB0aGlzLnZpdmVDb250cm9sbGVyMiA9IG5ldyBUSFJFRS5WaXZlQ29udHJvbGxlcigxKVxuICAgIHRoaXMudml2ZUNvbnRyb2xsZXIyLnN0YW5kaW5nTWF0cml4ID0gdGhpcy52ckNvbnRyb2xzLmdldFN0YW5kaW5nTWF0cml4KClcbiAgICB0aGlzLnZpdmVDb250cm9sbGVyMi5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VyZG93bicsIHRoaXMub25UcmlnZ2VyRG93bilcbiAgICB0aGlzLnZpdmVDb250cm9sbGVyMi5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VydXAnLCB0aGlzLm9uVHJpZ2dlclVwKVxuICAgIHRoaXMuYm9keS5hZGQodGhpcy52aXZlQ29udHJvbGxlcjIpXG5cbiAgICB0aGlzLmxvYWRWaXZlQ29udHJvbGxlck1vZGVscygpXG5cbiAgLy8gc2hvd0NvbnRyb2xsZXJHdWlkZVJheXMoKVxuICB9XG5cbiAgdXBkYXRlIChkZWx0YSwgZWxhcHNlZCwgdCkge1xuICAgIHRoaXMudnJDb250cm9scy51cGRhdGUoZGVsdGEpXG4gICAgdGhpcy5jbGVhbkludGVyc2VjdGVkKClcbiAgICBpZiAodGhpcy52aXZlQ29udHJvbGxlcjEpIHtcbiAgICAgIHRoaXMudml2ZUNvbnRyb2xsZXIxLnVwZGF0ZSgpXG4gICAgICB0aGlzLmludGVyc2VjdE9iamVjdHMoIHRoaXMudml2ZUNvbnRyb2xsZXIxIClcbiAgICB9XG4gICAgaWYgKHRoaXMudml2ZUNvbnRyb2xsZXIyKSB7XG4gICAgICB0aGlzLnZpdmVDb250cm9sbGVyMi51cGRhdGUoKVxuICAgICAgdGhpcy5pbnRlcnNlY3RPYmplY3RzKCB0aGlzLnZpdmVDb250cm9sbGVyMiApXG4gICAgfVxuICB9XG5cbiAgb25UcmlnZ2VyRG93biggZXZlbnQgKSB7XG4gICAgY29uc29sZS5sb2coJ2V2ZW50IHRyaWdnZXIgZG93bicsIGV2ZW50KVxuICAgIHZhciBjb250cm9sbGVyID0gZXZlbnQudGFyZ2V0XG4gICAgdmFyIGludGVyc2VjdGlvbnMgPSB0aGlzLmdldEludGVyc2VjdGlvbnMoIGNvbnRyb2xsZXIgKVxuICAgIGlmICggaW50ZXJzZWN0aW9ucy5sZW5ndGggPiAwICkge1xuICAgICAgdGhpcy5pc01vdmluZ1VwID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIG9uVHJpZ2dlclVwKCBldmVudCApIHtcbiAgICBjb25zb2xlLmxvZygnZXZlbnQgdHJpZ2dlciB1cCcpXG4gICAgdGhpcy5pc01vdmluZ1VwID0gZmFsc2VcbiAgfVxuXG4gIGdldEludGVyc2VjdGlvbnMoIGNvbnRyb2xsZXIgKSB7XG4gICAgdGhpcy50ZW1wTWF0cml4LmlkZW50aXR5KCkuZXh0cmFjdFJvdGF0aW9uKCBjb250cm9sbGVyLm1hdHJpeFdvcmxkIClcbiAgICB0aGlzLnJheWNhc3Rlci5yYXkub3JpZ2luLnNldEZyb21NYXRyaXhQb3NpdGlvbiggY29udHJvbGxlci5tYXRyaXhXb3JsZCApXG4gICAgdGhpcy5yYXljYXN0ZXIucmF5LmRpcmVjdGlvbi5zZXQoIDAsIDAsIC0xICkuYXBwbHlNYXRyaXg0KCB0aGlzLnRlbXBNYXRyaXggKVxuICAgIHJldHVybiB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKCB0aGlzLnJvcGUgKVxuICB9XG5cbiAgaW50ZXJzZWN0T2JqZWN0cyggY29udHJvbGxlciApIHtcbiAgICAvLyBEbyBub3QgaGlnaGxpZ2h0IHdoZW4gYWxyZWFkeSBzZWxlY3RlZFxuICAgIGlmICggY29udHJvbGxlci51c2VyRGF0YS5zZWxlY3RlZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuXG4gICAgdmFyIGludGVyc2VjdGlvbnMgPSB0aGlzLmdldEludGVyc2VjdGlvbnMoIGNvbnRyb2xsZXIgKVxuICAgIGlmICggaW50ZXJzZWN0aW9ucy5sZW5ndGggPiAwICkge1xuICAgICAgdmFyIGludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbnNbIDAgXVxuICAgICAgdmFyIG9iamVjdCA9IGludGVyc2VjdGlvbi5vYmplY3RcbiAgICAgIG9iamVjdC5tYXRlcmlhbC5lbWlzc2l2ZS5yID0gMVxuICAgICAgdGhpcy5pbnRlcnNlY3RlZC5wdXNoKCBvYmplY3QgKVxuICAgIH1cbiAgfVxuXG4gIGNsZWFuSW50ZXJzZWN0ZWQoKSB7XG4gICAgd2hpbGUgKCB0aGlzLmludGVyc2VjdGVkLmxlbmd0aCApIHtcbiAgICAgIHZhciBvYmplY3QgPSB0aGlzLmludGVyc2VjdGVkLnBvcCgpXG4gICAgICBvYmplY3QubWF0ZXJpYWwuZW1pc3NpdmUuciA9IDBcbiAgICB9XG4gIH1cblxuICBnZXRNb3ZpbmdQb3NpdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJ2lzbW92aW5ndXBzdGF0dXMgZnJvbSBjb250cm9scycsIHRoaXMuaXNNb3ZpbmdVcClcbiAgICByZXR1cm4gdGhpcy5pc01vdmluZ1VwXG4gIH1cblxufVxuIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1cnZlIGV4dGVuZHMgVEhSRUUuQ3VydmUge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKVxuICB9XG5cbiAgZ2V0UG9pbnQgKHQpIHtcbiAgICB2YXIgdHggPSAwXG4gICAgdmFyIHR5ID0gdCoyMDBcbiAgICB2YXIgdHogPSAwXG4gICAgcmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKCB0eCwgdHksIHR6ICkubXVsdGlwbHlTY2FsYXIoMSlcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpcmUgZXh0ZW5kcyBUSFJFRS5PYmplY3QzRCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5udW1QYXJ0aWNsZXMgPSAxMDAwXG5cbiAgICB0aGlzLm9wdHMgPSB7XG4gICAgICBzcGFya0xpZmVjeWNsZTogMC43LFxuICAgICAgc3BhcmtTdGFydFNpemU6IDEwLFxuICAgICAgc3BhcmtFbmRTaXplOiAyMCxcbiAgICAgIHNwYXJrRGlzdGFuY2VTY2FsZTogMS41KjEwMDAvd2luZG93LmlubmVySGVpZ2h0LFxuXG4gICAgICBmbGFtZU1pbkhlaWdodDogMC4wMixcbiAgICAgIGZsYW1lTWF4SGVpZ2h0OiAwLjI1LFxuICAgICAgZmxhbWVQZXJpb2Q6IDAuNSxcbiAgICAgIHdpbmRTdHJlbmd0aDogMC4xNCxcbiAgICAgIHdpbmRGcmVxdWVuY3k6IDAuNSxcblxuICAgICAgY29sb3I6IDB4ZmNjNjQ4LFxuICAgICAgZW5kQ29sb3I6IDB4YzA1NjFjLFxuXG4gICAgICBvcGFjaXR5OiAwLjcsXG4gICAgICBncmF2aXR5OiAwLjIsXG5cbiAgICAgIC8vIHN0YXRpYyAtIHNldCBhdCBzdGFydFxuICAgICAgYmFzZVdpZHRoOiAwLjggLy8gYW5nbGUgLSBtdWx0aXBsZSBvZiBQSVxuICAgIH1cblxuICAgIHZhciB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKVxuICAgIHRleHR1cmVMb2FkZXIubG9hZCgnaHR0cHM6Ly9zMy11cy13ZXN0LTIuYW1hem9uYXdzLmNvbS9zLmNkcG4uaW8vMTI2NzQ3L3Nub3dmbGFrZV8xNngxNi5wbmcnLCAodGV4dHVyZSkgPT4ge1xuICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZVxuICAgICAgdGhpcy5zeXN0ZW0ubWF0ZXJpYWwudW5pZm9ybXMudGV4dHVyZS52YWx1ZSA9IHRleHR1cmVcbiAgICB9KVxuICB9XG5cbiAgaW5pdCAoKSB7XG4gICAgLy8gbWFrZSBzdXJlIGdyYXZpdHkgcG9pbnRzIGluIHdvcmxkIFlcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM1NjQxODc1L3RocmVlLWpzLWhvdy10by1maW5kLXdvcmxkLW9yaWVudGF0aW9uLXZlY3Rvci1vZi1vYmplY3RzLWxvY2FsLXVwLXZlY3RvclxuICAgIHZhciB2MyA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgICB2My5jb3B5KHRoaXMudXApLmFwcGx5UXVhdGVybmlvbih0aGlzLmdldFdvcmxkUXVhdGVybmlvbigpLmludmVyc2UoKSlcblxuICAgIGNvbnN0IHN5c3RlbUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KClcbiAgICBjb25zdCBzeXN0ZW1NYXRlcmlhbCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7XG4gICAgICB1bmlmb3Jtczoge1xuICAgICAgICB1cDogeyB0eXBlOiAndjMnLCB2YWx1ZTogdjMgfSxcbiAgICAgICAgZ3Jhdml0eTogeyB0eXBlOiAnZicsIHZhbHVlOiB0aGlzLm9wdHMuZ3Jhdml0eSB9LFxuICAgICAgICBlbGFwc2VkVGltZTogeyB0eXBlOiAnZicsIHZhbHVlOiAwLjAgfSxcbiAgICAgICAgbnVtUGFydGljbGVzOiB7IHR5cGU6ICdmJywgdmFsdWU6IHRoaXMubnVtUGFydGljbGVzIH0sXG4gICAgICAgIGNvbG9yOiB7IHR5cGU6ICdjJywgdmFsdWU6IG5ldyBUSFJFRS5Db2xvcih0aGlzLm9wdHMuY29sb3IpIH0sXG4gICAgICAgIGVuZENvbG9yOiB7IHR5cGU6ICdjJywgdmFsdWU6IG5ldyBUSFJFRS5Db2xvcih0aGlzLm9wdHMuZW5kQ29sb3IpIH0sXG4gICAgICAgIGZsYW1lTWF4SGVpZ2h0OiB7IHR5cGU6ICdmJywgdmFsdWU6IHRoaXMub3B0cy5mbGFtZU1heEhlaWdodCB9LFxuICAgICAgICBmbGFtZU1pbkhlaWdodDogeyB0eXBlOiAnZicsIHZhbHVlOiB0aGlzLm9wdHMuZmxhbWVNaW5IZWlnaHQgfSxcbiAgICAgICAgZmxhbWVQZXJpb2Q6IHsgdHlwZTogJ2YnLCB2YWx1ZTogdGhpcy5vcHRzLmZsYW1lUGVyaW9kIH0sXG4gICAgICAgIHdpbmRTdHJlbmd0aDogeyB0eXBlOiAnZicsIHZhbHVlOiB0aGlzLm9wdHMud2luZFN0cmVuZ3RoIH0sXG4gICAgICAgIHdpbmRGcmVxdWVuY3k6IHsgdHlwZTogJ2YnLCB2YWx1ZTogdGhpcy5vcHRzLndpbmRGcmVxdWVuY3kgfSxcbiAgICAgICAgc3BhcmtMaWZlY3ljbGU6IHsgdHlwZTogJ2YnLCB2YWx1ZTogdGhpcy5vcHRzLnNwYXJrTGlmZWN5Y2xlIH0sXG4gICAgICAgIHNwYXJrRGlzdGFuY2VTY2FsZTogeyB0eXBlOiAnZicsIHZhbHVlOiB0aGlzLm9wdHMuc3BhcmtEaXN0YW5jZVNjYWxlIH0sXG4gICAgICAgIHNwYXJrU3RhcnRTaXplOiB7IHR5cGU6ICdmJywgdmFsdWU6IHRoaXMub3B0cy5zcGFya1N0YXJ0U2l6ZSB9LFxuICAgICAgICBzcGFya0VuZFNpemU6IHsgdHlwZTogJ2YnLCB2YWx1ZTogdGhpcy5vcHRzLnNwYXJrRW5kU2l6ZSB9LFxuICAgICAgICBvcGFjaXR5OiB7IHR5cGU6ICdmJywgdmFsdWU6IHRoaXMub3B0cy5vcGFjaXR5IH0sXG4gICAgICAgIHRleHR1cmU6IHsgdHlwZTogJ3QnLCB2YWx1ZTogbnVsbCB9XG4gICAgICB9LFxuICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAvLyBkZXB0aFdyaXRlOiBmYWxzZSxcbiAgICAgIGRlcHRoVGVzdDogZmFsc2UsXG4gICAgICAvLyBOT1RFOiBkb24ndCB1c2UgYWRkaXRpdmUgYmxlbmRpbmcgZm9yIGxpZ2h0IGJhY2tncm91bmRzXG4gICAgICAvLyBodHRwOi8vYW5zd2Vycy51bml0eTNkLmNvbS9xdWVzdGlvbnMvNTczNzE3L3BhcnRpY2xlLWVmZmVjdHMtYWdhaW5zdC1saWdodC1iYWNrZ3JvdW5kcy5odG1sXG4gICAgICAvLyBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZyxcbiAgICAgIHZlcnRleFNoYWRlcjogYFxuICAgICAgICB1bmlmb3JtIGZsb2F0IGVsYXBzZWRUaW1lO1xuICAgICAgICB1bmlmb3JtIGZsb2F0IG51bVBhcnRpY2xlcztcbiAgICAgICAgdW5pZm9ybSBmbG9hdCBncmF2aXR5O1xuICAgICAgICB1bmlmb3JtIHZlYzMgdXA7XG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BhcmtMaWZlY3ljbGU7XG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BhcmtEaXN0YW5jZVNjYWxlO1xuICAgICAgICB1bmlmb3JtIGZsb2F0IHNwYXJrU3RhcnRTaXplO1xuICAgICAgICB1bmlmb3JtIGZsb2F0IHNwYXJrRW5kU2l6ZTtcbiAgICAgICAgdW5pZm9ybSBmbG9hdCBmbGFtZU1heEhlaWdodDtcbiAgICAgICAgdW5pZm9ybSBmbG9hdCBmbGFtZU1pbkhlaWdodDtcbiAgICAgICAgdW5pZm9ybSBmbG9hdCBmbGFtZVBlcmlvZDtcbiAgICAgICAgdW5pZm9ybSBmbG9hdCB3aW5kU3RyZW5ndGg7XG4gICAgICAgIHVuaWZvcm0gZmxvYXQgd2luZEZyZXF1ZW5jeTtcbiAgICAgICAgYXR0cmlidXRlIHZlYzMgZGlyZWN0aW9uO1xuICAgICAgICBhdHRyaWJ1dGUgZmxvYXQgdW5pcXVlbmVzcztcbiAgICAgICAgYXR0cmlidXRlIGZsb2F0IHBhcnRpY2xlSW5kZXg7XG4gICAgICAgICNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1ODk3OTMyMzg0NjI2NDMzODMyNzlcbiAgICAgICAgdmFyeWluZyBmbG9hdCB2VGltZTtcbiAgICAgICAgdm9pZCBtYWluKCB2b2lkICkge1xuICAgICAgICAgIC8vIHVuaXF1ZSBkdXJhdGlvblxuICAgICAgICAgIGZsb2F0IGR1cmF0aW9uID0gc3BhcmtMaWZlY3ljbGUgKyBzcGFya0xpZmVjeWNsZSAqIHVuaXF1ZW5lc3M7XG4gICAgICAgICAgLy8gbWFrZSB0aW1lIGxvb3BcbiAgICAgICAgICBmbG9hdCBwYXJ0aWNsZU9mZnNldCA9IChwYXJ0aWNsZUluZGV4IC8gbnVtUGFydGljbGVzICogZHVyYXRpb24pO1xuICAgICAgICAgIGZsb2F0IHRpbWUgPSBtb2QoZWxhcHNlZFRpbWUgKyBwYXJ0aWNsZU9mZnNldCwgZHVyYXRpb24pO1xuICAgICAgICAgIC8vIHN0b3JlIHRpbWUgYXMgMC0xIGZvciBmcmFnbWVudCBzaGFkZXJcbiAgICAgICAgICB2VGltZSA9IHRpbWUgLyBkdXJhdGlvbjtcbiAgICAgICAgICAvLyBhcHBseSBcImdyYXZpdHlcIiB0byBmaXJlXG4gICAgICAgICAgdmVjMyB2R3Jhdml0eSA9IHVwICogZ3Jhdml0eSAqIHBvdyh2VGltZSwgMi4wKTtcbiAgICAgICAgICAvLyBtb3ZlIGluIGRpcmVjdGlvbiBiYXNlZCBvbiBlbGFwc2VkIHRpbWVcbiAgICAgICAgICBmbG9hdCBmbGFtZUhlaWdodCA9IG1peChmbGFtZU1pbkhlaWdodCwgZmxhbWVNYXhIZWlnaHQsIHVuaXF1ZW5lc3MpO1xuICAgICAgICAgIHZlYzMgdkRpc3RhbmNlID0gZmxhbWVIZWlnaHQgKiBkaXJlY3Rpb24gKiB2VGltZTtcbiAgICAgICAgICAvLyBjbG9zZSBmbGFtZSBhdCB0b3AgKDAuNSBpcyBmdWxseSBjbG9zZWQpXG4gICAgICAgICAgdkRpc3RhbmNlLnh6ICo9IGNvcyhtaXgoMC4wLCBQSSAqIGZsYW1lUGVyaW9kLCB2VGltZSkpO1xuICAgICAgICAgIC8vIGFwcGx5IHNvbWUgcmFuZG9tIGhvcml6b25hbCB3aW5kXG4gICAgICAgICAgdmVjMyB2V2luZCA9IHNpbigoZWxhcHNlZFRpbWUgKyB2VGltZSAqIHVuaXF1ZW5lc3MpICogd2luZEZyZXF1ZW5jeSAqIHVuaXF1ZW5lc3MpICogY3Jvc3ModXAsIGRpcmVjdGlvbikgKiB3aW5kU3RyZW5ndGggKiB1bmlxdWVuZXNzICogdlRpbWU7XG4gICAgICAgICAgLy8gYWRkIGFsbCBmb3JjZXMgdG8gZ2V0IGZpbmFsIHBvc2l0aW9uIGZvciB0aGlzIGZyYW1lXG4gICAgICAgICAgdmVjMyBwb3MgPSBwb3NpdGlvbiArIHZEaXN0YW5jZSArIHZHcmF2aXR5ICsgdldpbmQ7XG4gICAgICAgICAgLy8gU2V0IHNpemUgYmFzZWQgb24gZnJhbWUgYW5kIGRpc3RhbmNlXG4gICAgICAgICAgdmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zLCAxLjAgKTtcbiAgICAgICAgICBnbF9Qb2ludFNpemUgPSBtaXgoc3BhcmtTdGFydFNpemUsIHNwYXJrRW5kU2l6ZSwgdlRpbWUpO1xuICAgICAgICAgIGdsX1BvaW50U2l6ZSA9IGdsX1BvaW50U2l6ZSAqIChzcGFya0Rpc3RhbmNlU2NhbGUgLyBsZW5ndGgobXZQb3NpdGlvbi54eXopKTtcbiAgICAgICAgICAvLyBwcm9qZWN0IHBvc2l0aW9uIG9uIHNjcmVlblxuICAgICAgICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zLCAxLjApO1xuICAgICAgICB9XG4gICAgICBgLFxuICAgICAgZnJhZ21lbnRTaGFkZXI6IGBcbiAgICAgICAgdW5pZm9ybSB2ZWMzIGNvbG9yO1xuICAgICAgICB1bmlmb3JtIHZlYzMgZW5kQ29sb3I7XG4gICAgICAgIHVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiAgICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcbiAgICAgICAgdmFyeWluZyBmbG9hdCB2VGltZTtcbiAgICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICAgIHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgZ2xfUG9pbnRDb29yZCk7XG4gICAgICAgICAgdmVjNCBzdGFydENvbG9yID0gdmVjNChjb2xvciwgb3BhY2l0eSk7XG4gICAgICAgICAgdmVjNCBlbmRDb2xvciA9IHZlYzQoZW5kQ29sb3IsIDAuMCk7XG4gICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdGV4Q29sb3IgKiBtaXgoc3RhcnRDb2xvciwgZW5kQ29sb3IsIHZUaW1lKTtcbiAgICAgICAgfVxuICAgICAgYFxuICAgIH0pXG5cbiAgICAvLyBhbGwgZmxhbWVzIHN0YXJ0IGF0IDAsMCwwXG4gICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLm51bVBhcnRpY2xlcyAqIDMpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3NpdGlvbnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgIHBvc2l0aW9uc1tpXSA9IDBcbiAgICB9XG5cbiAgICBjb25zdCBkaXJlY3Rpb24gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMubnVtUGFydGljbGVzICogMylcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGlvbi5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgY29uc3QgcGhpID0gdGhpcy5yYW5kQ2VudGVyKE1hdGguUEkgKiB0aGlzLm9wdHMuYmFzZVdpZHRoKVxuICAgICAgY29uc3QgdGhldGEgPSB0aGlzLnJhbmRDZW50ZXIoTWF0aC5QSSlcbiAgICAgIC8vIGNyZWF0ZSBub3JtYWwgdmVjdG9yIGluIHJhbmRvbSBkaXJlY3Rpb25cbiAgICAgIGNvbnN0IHNwaGVyZUNvb3JkID0gVEhSRUUuU3BoZXJpY2FsKDEsIHBoaSwgdGhldGEpXG5cbiAgICAgIGNvbnN0IHYgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG4gICAgICB2LnNldEZyb21TcGhlcmljYWwoc3BoZXJlQ29vcmQpXG4gICAgICBkaXJlY3Rpb25baV0gPSB2LnhcbiAgICAgIGRpcmVjdGlvbltpICsgMV0gPSB2LnlcbiAgICAgIGRpcmVjdGlvbltpICsgMl0gPSB2LnpcbiAgICB9XG5cbiAgICAvLyBwdXNoIHNvbWUgdW5pcXVlbmVzcyAtIGJlY2F1c2UgZW50cm9weS4uLlxuICAgIGNvbnN0IHVuaXF1ZW5lc3MgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMubnVtUGFydGljbGVzKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1QYXJ0aWNsZXM7IGkrKykge1xuICAgICAgdW5pcXVlbmVzc1tpXSA9IE1hdGgucmFuZG9tKClcbiAgICB9XG5cbiAgICAvLyByZW1lbWJlciBwYXJ0aWNsZSBpbmRleFxuICAgIGNvbnN0IHBhcnRpY2xlSW5kZXggPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMubnVtUGFydGljbGVzKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1QYXJ0aWNsZXM7IGkrKykge1xuICAgICAgcGFydGljbGVJbmRleFtpXSA9IGlcbiAgICB9XG5cbiAgICBzeXN0ZW1HZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsIDMpKVxuICAgIHN5c3RlbUdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgnZGlyZWN0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShkaXJlY3Rpb24sIDMpKVxuICAgIHN5c3RlbUdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgndW5pcXVlbmVzcycsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUodW5pcXVlbmVzcywgMSkpXG4gICAgc3lzdGVtR2VvbWV0cnkuYWRkQXR0cmlidXRlKCdwYXJ0aWNsZUluZGV4JywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwYXJ0aWNsZUluZGV4LCAxKSlcblxuICAgIHN5c3RlbUdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpXG4gICAgdGhpcy5zeXN0ZW0gPSBuZXcgVEhSRUUuUG9pbnRzKHN5c3RlbUdlb21ldHJ5LCBzeXN0ZW1NYXRlcmlhbClcblxuICAgIHRoaXMuYWRkKHRoaXMuc3lzdGVtKVxuXG4gICAgdGhpcy5zeXN0ZW0ucmVuZGVyT3JkZXIgPSAyXG4gIH1cblxuICB1cGRhdGUgKGRlbHRhLCBlbGFwc2VkKSB7XG4gICAgdGhpcy5zeXN0ZW0ubWF0ZXJpYWwudW5pZm9ybXMuZWxhcHNlZFRpbWUudmFsdWUgPSBlbGFwc2VkXG5cbiAgICB2YXIgdXAgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG4gICAgdXAuY29weSh0aGlzLnVwKS5hcHBseVF1YXRlcm5pb24odGhpcy5nZXRXb3JsZFF1YXRlcm5pb24oKS5pbnZlcnNlKCkpXG4gICAgdGhpcy5zeXN0ZW0ubWF0ZXJpYWwudW5pZm9ybXMudXAudmFsdWUgPSB1cFxuICB9XG5cbiAgdXBkYXRlT25lIChvcHQpIHtcbiAgICB0aGlzLnN5c3RlbS5tYXRlcmlhbC51bmlmb3Jtc1tvcHRdLnZhbHVlID0gdGhpcy5vcHRzW29wdF1cbiAgfVxuXG4gIHVwZGF0ZUNvbG9yIChvcHQpIHtcbiAgICB0aGlzLnN5c3RlbS5tYXRlcmlhbC51bmlmb3Jtc1tvcHRdLnZhbHVlID0gbmV3IFRIUkVFLkNvbG9yKHRoaXMub3B0c1tvcHRdKVxuICB9XG5cbiAgcmFuZENlbnRlciAodikge1xuICAgIHJldHVybiAodiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KSlcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsYW1pbmdvIHtcblxuICBjb25zdHJ1Y3RvciAoc2NlbmUsIGxvYWRlcikge1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxuICAgIHRoaXMubG9hZGVyID0gbG9hZGVyXG5cbiAgICB0aGlzLmZsYW1pbmdvID0gdW5kZWZpbmVkXG4gICAgdGhpcy5tZXNoID0gdW5kZWZpbmVkXG4gICAgdGhpcy5taXhlciA9IHVuZGVmaW5lZFxuICAgIHRoaXMuYW5pbWF0aW9uQ2xpcCA9IHVuZGVmaW5lZFxuICAgIHRoaXMuYW5pbWF0aW9uQWN0aW9uID0gdW5kZWZpbmVkXG5cbiAgICB0aGlzLmxvYWQoKVxuICB9XG5cbiAgbG9hZCAoKSB7XG4gICAgdGhpcy5sb2FkZXIubG9hZChcbiAgICAgICdhc3NldHMvbW9kZWxzL2ZsYW1pbmdvL2ZsYW1pbmdvLmpzJyxcbiAgICAgIChnZW9tZXRyeSwgbWF0ZXJpYWxzKSA9PiB7XG4gICAgICAgIHRoaXMubWVzaCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7XG4gICAgICAgICAgdmVydGV4Q29sb3JzOiBUSFJFRS5GYWNlQ29sb3JzLFxuICAgICAgICAgIG1vcnBoVGFyZ2V0czogdHJ1ZVxuICAgICAgICB9KSlcbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnNldFNjYWxhcigwLjAxKVxuICAgICAgICB0aGlzLm1lc2guY2FzdFNoYWRvdyA9IHRydWVcblxuICAgICAgICB0aGlzLmZsYW1pbmdvID0gbmV3IFRIUkVFLk9iamVjdDNEKClcbiAgICAgICAgdGhpcy5mbGFtaW5nby5hZGQodGhpcy5tZXNoKVxuICAgICAgICB0aGlzLmZsYW1pbmdvLnBvc2l0aW9uLnkgPSA1XG4gICAgICAgIHRoaXMuZmxhbWluZ28ucG9zaXRpb24ueiA9IC0zMFxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmZsYW1pbmdvKVxuXG4gICAgICAgIHRoaXMuaW5pdEFuaW1hdGlvbihnZW9tZXRyeSlcbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBpbml0QW5pbWF0aW9uIChnZW9tZXRyeSkge1xuICAgIHRoaXMubWl4ZXIgPSBuZXcgVEhSRUUuQW5pbWF0aW9uTWl4ZXIodGhpcy5tZXNoKVxuICAgIHRoaXMuYW5pbWF0aW9uQ2xpcCA9IFRIUkVFLkFuaW1hdGlvbkNsaXAuQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UoJ2ZseScsIGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cywgNjApXG4gICAgdGhpcy5hbmltYXRpb25BY3Rpb24gPSB0aGlzLm1peGVyLmNsaXBBY3Rpb24odGhpcy5hbmltYXRpb25DbGlwKS5zZXREdXJhdGlvbigxKS5wbGF5KClcbiAgfVxuXG4gIHVwZGF0ZSAoZGVsdGEsIGVsYXBzZWQsIHQpIHtcbiAgICBpZiAoIXRoaXMubWl4ZXIpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLm1peGVyLnVwZGF0ZShkZWx0YSlcbiAgICB0aGlzLmZsYW1pbmdvLnBvc2l0aW9uLnogKz0gZGVsdGFcblxuICAgIGlmICh0aGlzLmZsYW1pbmdvLnBvc2l0aW9uLnogPj0gNTApIHtcbiAgICAgIHRoaXMuZmxhbWluZ28ucG9zaXRpb24ueiA9IC0zMFxuICAgIH1cblxuXG4gICAgLy8gdGhpcy5mbGFtaW5nby5yb3RhdGlvbi55ICs9IGRlbHRhICogLTAuMDVcbiAgICAvLyB0aGlzLmZsYW1pbmdvLnBvc2l0aW9uLnogPSAxMCpNYXRoLnNpbih0aGlzLnQpICsgMFxuICAgIC8vIHRoaXMuZmxhbWluZ28ucG9zaXRpb24ueCA9IDEwKk1hdGguY29zKHRoaXMudCkgKyAwXG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHF1ZXJ5IGZyb20gJy4vdXRpbHMvcXVlcnknXG5pbXBvcnQgV29ybGQgZnJvbSAnLi93b3JsZCdcbmltcG9ydCBGbGFtaW5nbyBmcm9tICcuL2ZsYW1pbmdvJ1xuaW1wb3J0IEJhbGxvb24gZnJvbSAnLi9iYWxsb29uJ1xuaW1wb3J0IENvbnRyb2xsZXJzIGZyb20gJy4vY29udHJvbGxlcnMnXG5pbXBvcnQgUGFydGljbGVTeXN0ZW0gZnJvbSAnLi9wYXJ0aWNsZS1zeXN0ZW0nXG5cbi8vIGxvYWQgc2hpbW1lZCBwbHVnaW5zIC0gYWNjZXNzIG9uIFRIUkVFIG5hbWVzcGFjZVxuaW1wb3J0IF9PQkpMb2FkZXIgZnJvbSAnT0JKTG9hZGVyJ1xuaW1wb3J0IF9WUkVmZmVjdCBmcm9tICdWUkVmZmVjdCdcblxuLy8gSW1wb3J0IFdlYlZSTWFuYWdlciBucG0gbW9kdWxlXG5pbXBvcnQgV2ViVlJNYW5hZ2VyIGZyb20gJ3dlYnZyLWJvaWxlcnBsYXRlJ1xuXG5jb25zdCBjbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpXG5cbmxldCBzY2VuZSwgY2FtZXJhLCBIRUlHSFQsIFdJRFRILCByZW5kZXJlciwgY29udGFpbmVyXG5sZXQgdnJFZmZlY3QsIHZyTWFuYWdlciwgdnJEaXNwbGF5XG5cbmNvbnN0IG9iamVjdExvYWRlciA9IG5ldyBUSFJFRS5PYmplY3RMb2FkZXIoKVxuY29uc3QgT0JKTG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpXG5jb25zdCBqc29uTG9hZGVyID0gbmV3IFRIUkVFLkpTT05Mb2FkZXIoKVxubGV0IGJvZHlcbmxldCB3b3JsZCwgYmFsbG9vblxubGV0IHZpdmVDb250cm9sbGVyc1xubGV0IG1peGVyXG5sZXQgdCA9IDBcbmxldCBwYXJ0aWNsZVN5c3RlbVxubGV0IHJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKVxubGV0IG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKVxubGV0IG9iamVjdHMgPSBbXVxubGV0IGludGVyc2VjdGVkID0gW11cbmxldCBpc01vdmluZ1VwID0gZmFsc2VcbmxldCBidG5GbHlcbmxldCB0ZW1wTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKVxubGV0IGNvbnRyb2xzRW5hYmxlZCA9IGZhbHNlXG5cbmNvbnN0IHVwZGF0ZU9iamVjdHMgPSBbXVxuXG5mdW5jdGlvbiBjcmVhdGVTY2VuZSAoKSB7XG4gIEhFSUdIVCA9IHdpbmRvdy5pbm5lckhlaWdodFxuICBXSURUSCA9IHdpbmRvdy5pbm5lcldpZHRoXG5cbiAgLy8gQ3JlYXRlIHRoZSBzY2VuZVxuICBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpXG5cbiAgLy8gQ3JlYXRlIHRoZSBjYW1lcmFcbiAgY29uc3QgYXNwZWN0UmF0aW8gPSBXSURUSCAvIEhFSUdIVFxuICBjb25zdCBmaWVsZE9mVmlldyA9IDYwXG4gIGNvbnN0IG5lYXJQbGFuZSA9IDAuMVxuICBjb25zdCBmYXJQbGFuZSA9IDUwXG4gIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShcbiAgICBmaWVsZE9mVmlldyxcbiAgICBhc3BlY3RSYXRpbyxcbiAgICBuZWFyUGxhbmUsXG4gICAgZmFyUGxhbmVcbiAgKVxuXG4gIGJvZHkgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKVxuICBib2R5LmFkZChjYW1lcmEpXG4gIGJvZHkucG9zaXRpb24ueCA9IDBcbiAgYm9keS5wb3NpdGlvbi55ID0gNVxuICBib2R5LnBvc2l0aW9uLnogPSAwXG4gIHNjZW5lLmFkZChib2R5KVxuXG4gIC8vIENyZWF0ZSB0aGUgcmVuZGVyZXJcbiAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7XG4gICAgLy8gQWxsb3cgdHJhbnNwYXJlbmN5IHRvIHNob3cgdGhlIGdyYWRpZW50IGJhY2tncm91bmRcbiAgICAvLyB3ZSBkZWZpbmVkIGluIHRoZSBDU1NcbiAgICBhbHBoYTogdHJ1ZSxcbiAgICAvLyBBY3RpdmF0ZSB0aGUgYW50aS1hbGlhc2luZyB0aGlzIGlzIGxlc3MgcGVyZm9ybWFudCxcbiAgICAvLyBidXQsIGFzIG91ciBwcm9qZWN0IGlzIGxvdy1wb2x5IGJhc2VkLCBpdCBzaG91bGQgYmUgZmluZSA6KVxuICAgIGFudGlhbGlhczogdHJ1ZVxuICB9KVxuXG4gIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pXG5cbiAgLy8gRGVmaW5lIHRoZSBzaXplIG9mIHRoZSByZW5kZXJlciBpbiB0aGlzIGNhc2UsXG4gIC8vIGl0IHdpbGwgZmlsbCB0aGUgZW50aXJlIHNjcmVlblxuICByZW5kZXJlci5zZXRTaXplKFdJRFRILCBIRUlHSFQpXG5cbiAgLy8gRW5hYmxlIHNoYWRvdyByZW5kZXJpbmdcbiAgcmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlXG4gIHJlbmRlcmVyLnNoYWRvd01hcC50eXBlID0gVEhSRUUuUENGU29mdFNoYWRvd01hcFxuXG4gIC8vIEFkZCB0aGUgRE9NIGVsZW1lbnQgb2YgdGhlIHJlbmRlcmVyIHRvIHRoZVxuICAvLyBjb250YWluZXIgd2UgY3JlYXRlZCBpbiB0aGUgSFRNTFxuICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29ybGQnKVxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudClcbn1cblxuZnVuY3Rpb24gaGFuZGxlV2luZG93UmVzaXplICgpIHtcbiAgLy8gdXBkYXRlIGhlaWdodCBhbmQgd2lkdGggb2YgdGhlIHJlbmRlcmVyIGFuZCB0aGUgY2FtZXJhXG4gIEhFSUdIVCA9IHdpbmRvdy5pbm5lckhlaWdodFxuICBXSURUSCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gIHZyRWZmZWN0LnNldFNpemUoV0lEVEgsIEhFSUdIVClcbiAgcmVuZGVyZXIuc2V0U2l6ZShXSURUSCwgSEVJR0hUKVxuICBjYW1lcmEuYXNwZWN0ID0gV0lEVEggLyBIRUlHSFRcbiAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVMaWdodHMgKCkge1xuICAvLyBBIGRpcmVjdGlvbmFsIGxpZ2h0IHNoaW5lcyBmcm9tIGEgc3BlY2lmaWMgZGlyZWN0aW9uLlxuICAvLyBJdCBhY3RzIGxpa2UgdGhlIHN1biwgdGhhdCBtZWFucyB0aGF0IGFsbCB0aGUgcmF5cyBwcm9kdWNlZCBhcmUgcGFyYWxsZWwuXG4gIGNvbnN0IHNoYWRvd0xpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuNSlcblxuICAvLyBTZXQgdGhlIGRpcmVjdGlvbiBvZiB0aGUgbGlnaHRcbiAgc2hhZG93TGlnaHQucG9zaXRpb24uc2V0KDEsIDIsIC0xKVxuICBzaGFkb3dMaWdodC5wb3NpdGlvbi5ub3JtYWxpemUoKVxuXG4gIC8vIEFsbG93IHNoYWRvdyBjYXN0aW5nXG4gIHNoYWRvd0xpZ2h0LmNhc3RTaGFkb3cgPSB0cnVlXG5cbiAgLy8gZGVmaW5lIHRoZSB2aXNpYmxlIGFyZWEgb2YgdGhlIHByb2plY3RlZCBzaGFkb3dcbiAgc2hhZG93TGlnaHQuc2hhZG93LmNhbWVyYS5sZWZ0ID0gLTEwXG4gIHNoYWRvd0xpZ2h0LnNoYWRvdy5jYW1lcmEucmlnaHQgPSAxMFxuICBzaGFkb3dMaWdodC5zaGFkb3cuY2FtZXJhLnRvcCA9IDEwXG4gIHNoYWRvd0xpZ2h0LnNoYWRvdy5jYW1lcmEuYm90dG9tID0gLTEwXG4gIHNoYWRvd0xpZ2h0LnNoYWRvdy5jYW1lcmEubmVhciA9IC0xMFxuICBzaGFkb3dMaWdodC5zaGFkb3cuY2FtZXJhLmZhciA9IDEwXG5cbiAgLy8gZGVidWcgbGlnaHRcbiAgaWYgKHF1ZXJ5LmRlYnVnKSB7XG4gICAgc2NlbmUuYWRkKG5ldyBUSFJFRS5DYW1lcmFIZWxwZXIoc2hhZG93TGlnaHQuc2hhZG93LmNhbWVyYSkpXG4gIH1cblxuICAvLyBkZWZpbmUgdGhlIHJlc29sdXRpb24gb2YgdGhlIHNoYWRvdyB0aGUgaGlnaGVyIHRoZSBiZXR0ZXIsXG4gIC8vIGJ1dCBhbHNvIHRoZSBtb3JlIGV4cGVuc2l2ZSBhbmQgbGVzcyBwZXJmb3JtYW50XG4gIHNoYWRvd0xpZ2h0LnNoYWRvdy5tYXBTaXplLndpZHRoID0gMTAyNCAqIDJcbiAgc2hhZG93TGlnaHQuc2hhZG93Lm1hcFNpemUuaGVpZ2h0ID0gMTAyNCAqIDJcblxuICAvLyBhbiBhbWJpZW50IGxpZ2h0IG1vZGlmaWVzIHRoZSBnbG9iYWwgY29sb3Igb2YgYSBzY2VuZSBhbmQgbWFrZXMgdGhlIHNoYWRvd3Mgc29mdGVyXG4gIGNvbnN0IGFtYmllbnRMaWdodFBpbmsgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4ZmZkYWY4LCAwLjIpXG4gIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDEpXG5cbiAgc2NlbmUuYWRkKHNoYWRvd0xpZ2h0KVxuICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KVxufVxuXG5cblxuXG5mdW5jdGlvbiBjcmVhdGVTaGFwZXMgKCkge1xuICBsZXQgZ2VvbWV0cmllcyA9IFtcbiAgICBuZXcgVEhSRUUuQm94R2VvbWV0cnkoIDAuMiwgMC4yLCAwLjIgKSxcbiAgICBuZXcgVEhSRUUuQ29uZUdlb21ldHJ5KCAwLjIsIDAuMiwgNjQgKSxcbiAgICBuZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSggMC4yLCAwLjIsIDAuMiwgNjQgKSxcbiAgICBuZXcgVEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeSggMC4yLCAzICksXG4gICAgbmV3IFRIUkVFLlRvcnVzR2VvbWV0cnkoIDAuMiwgMC4wNCwgNjQsIDMyIClcbiAgXVxuICBmb3IgKCBsZXQgaSA9IDA7IGkgPCA1MDsgaSArKyApIHtcbiAgICBsZXQgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzWyBNYXRoLmZsb29yKCBNYXRoLnJhbmRvbSgpICogZ2VvbWV0cmllcy5sZW5ndGggKSBdXG4gICAgbGV0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCB7XG4gICAgICBjb2xvcjogTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmLFxuICAgICAgcm91Z2huZXNzOiAwLjcsXG4gICAgICBtZXRhbG5lc3M6IDAuMFxuICAgIH0gKVxuICAgIGxldCBvYmplY3QgPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsIClcbiAgICBvYmplY3QucG9zaXRpb24ueCA9IE1hdGgucmFuZG9tKCkgKiA0IC0gMlxuICAgIG9iamVjdC5wb3NpdGlvbi55ID0gTWF0aC5yYW5kb20oKSAqIDJcbiAgICBvYmplY3QucG9zaXRpb24ueiA9IE1hdGgucmFuZG9tKCkgKiA0IC0gMlxuICAgIG9iamVjdC5yb3RhdGlvbi54ID0gTWF0aC5yYW5kb20oKSAqIDIgKiBNYXRoLlBJXG4gICAgb2JqZWN0LnJvdGF0aW9uLnkgPSBNYXRoLnJhbmRvbSgpICogMiAqIE1hdGguUElcbiAgICBvYmplY3Qucm90YXRpb24ueiA9IE1hdGgucmFuZG9tKCkgKiAyICogTWF0aC5QSVxuICAgIG9iamVjdC5zY2FsZS5zZXRTY2FsYXIoIE1hdGgucmFuZG9tKCkgKyAwLjUgKVxuICAgIG9iamVjdC5jYXN0U2hhZG93ID0gdHJ1ZVxuICAgIG9iamVjdC5yZWNlaXZlU2hhZG93ID0gdHJ1ZVxuICAgIHNjZW5lLmFkZCggb2JqZWN0IClcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQYXJ0aWNsZXMgKCkge1xuICBwYXJ0aWNsZVN5c3RlbSA9IG5ldyBQYXJ0aWNsZVN5c3RlbSgpXG4gIHBhcnRpY2xlU3lzdGVtLm1lc2gucG9zaXRpb24ueSA9IC0yXG4gIHNjZW5lLmFkZChwYXJ0aWNsZVN5c3RlbS5tZXNoKVxufVxuXG5cbmZ1bmN0aW9uIG1vdmVPYmplY3RzRG93biAoZGVsdGEpIHtcblxufVxuXG5mdW5jdGlvbiB1cGRhdGVEYXlTY2VuZSAoKSB7XG4gIGlmICh1cGRhdGVEYXlTY2VuZS5kb25lKSByZXR1cm5cbiAgc2NlbmUuZm9nID0gbmV3IFRIUkVFLkZvZ0V4cDIoIDB4ZmZmZmZmLCAwLjAzNSApXG4gIHVwZGF0ZURheVNjZW5lLmRvbmUgPSB0cnVlXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVZSU2NlbmUgKCkge1xuICBpZiAodXBkYXRlVlJTY2VuZS5kb25lKSByZXR1cm5cbiAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigweGNlZWZmZiwgMSlcbiAgc2NlbmUuZm9nID0gbmV3IFRIUkVFLkZvZ0V4cDIoIDB4Y2VlZmZmLCAwLjAzNSApXG4gIHVwZGF0ZVZSU2NlbmUuZG9uZSA9IHRydWVcbn1cblxuZnVuY3Rpb24gbG9vcCAoKSB7XG4gIGxldCBkZWx0YSA9IGNsb2NrLmdldERlbHRhKClcbiAgbGV0IGVsYXBzZWQgPSBjbG9jay5nZXRFbGFwc2VkVGltZSgpXG4gIHQgKz0gMC4wMDFcblxuICBmb3IgKGxldCBvYmplY3Qgb2YgdXBkYXRlT2JqZWN0cykge1xuICAgIG9iamVjdC51cGRhdGUoZGVsdGEsIGVsYXBzZWQsIHQpXG4gIH1cblxuICBwYXJ0aWNsZVN5c3RlbS51cGRhdGUoZGVsdGEpXG5cbiAgYm9keS5wb3NpdGlvbi56ID0gMjAqTWF0aC5zaW4odCkgKyAwXG4gIGJvZHkucG9zaXRpb24ueCA9IDIwKk1hdGguY29zKHQpICsgMFxuXG4gIGlmICh2ckVmZmVjdC5pc1ByZXNlbnRpbmcgPT09IGZhbHNlKSB7XG4gICAgdXBkYXRlRGF5U2NlbmUoKVxuICAgIGJvZHkucG9zaXRpb24ueSArPSBkZWx0YSAqIC0wLjJcbiAgICBiYWxsb29uLmZhbGwoZGVsdGEpXG4gIH1cblxuICBpZiAodnJFZmZlY3QuaXNQcmVzZW50aW5nID09PSB0cnVlICYmIGNvbnRyb2xzRW5hYmxlZCA9PT0gdHJ1ZSkge1xuICAgIHVwZGF0ZVZSU2NlbmUoKVxuICAgIGlmICh2aXZlQ29udHJvbGxlcnMuZ2V0TW92aW5nUG9zaXRpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgIGJvZHkucG9zaXRpb24ueSArPSBkZWx0YSAqIC0wLjJcbiAgICAgIGJhbGxvb24uZmFsbChkZWx0YSlcbiAgICB9XG4gIH1cblxuICBpZiAodnJFZmZlY3QuaXNQcmVzZW50aW5nID09PSB0cnVlICYmIGNvbnRyb2xzRW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICB1cGRhdGVWUlNjZW5lKClcbiAgICBib2R5LnBvc2l0aW9uLnkgPSAxNVxuICAgIGJvZHkucG9zaXRpb24ueCA9IDE1XG4gICAgYm9keS5wb3NpdGlvbi56ID0gMTVcbiAgICBiYWxsb29uLnJlc2V0UG9zaXRpb24oKVxuICAgIC8vIGJvZHkucG9zaXRpb24ueSArPSBkZWx0YSAqIC0wLjJcbiAgICAvLyBiYWxsb29uLmZhbGwoZGVsdGEpXG4gIH1cblxuICBpZiAoaXNNb3ZpbmdVcCA9PT0gdHJ1ZSB8fCB2aXZlQ29udHJvbGxlcnMuZ2V0TW92aW5nUG9zaXRpb24oKSA9PT0gdHJ1ZSkge1xuICAgIGJhbGxvb24uZmx5SGlnaGVyKGRlbHRhKVxuICAgIGJvZHkucG9zaXRpb24ueSArPSBkZWx0YVxuICB9XG5cbiAgLy8gUmVuZGVyIHRoZSBzY2VuZSB0aHJvdWdoIHRoZSB2ck1hbmFnZXIuXG4gIHZyTWFuYWdlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSwgZGVsdGEpXG5cbiAgLy8gY2FsbCB0aGUgbG9vcCBmdW5jdGlvbiBhZ2FpblxuICB2ckRpc3BsYXkucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApXG59XG5cbmZ1bmN0aW9uIGluaXQgKCkge1xuXG4gIC8vIHNldCB1cCB0aGUgc2NlbmUsIHRoZSBjYW1lcmEgYW5kIHRoZSByZW5kZXJlclxuICBjcmVhdGVTY2VuZSgpXG5cbiAgLy8gYWRkIHRoZSBsaWdodHNcbiAgY3JlYXRlTGlnaHRzKClcblxuICB3b3JsZCA9IG5ldyBXb3JsZChzY2VuZSwgb2JqZWN0TG9hZGVyKVxuICBiYWxsb29uID0gbmV3IEJhbGxvb24oc2NlbmUsIG9iamVjdExvYWRlcilcbiAgdml2ZUNvbnRyb2xsZXJzID0gbmV3IENvbnRyb2xsZXJzKGNhbWVyYSwgYm9keSwgT0JKTG9hZGVyLCBiYWxsb29uLmdldFJvcGUoKSlcbiAgdXBkYXRlT2JqZWN0cy5wdXNoKHdvcmxkLCBiYWxsb29uLCB2aXZlQ29udHJvbGxlcnMpXG4gIHVwZGF0ZU9iamVjdHMucHVzaChuZXcgRmxhbWluZ28oc2NlbmUsIGpzb25Mb2FkZXIpKVxuXG4gIC8vYWRkIG9iamVjdHNcbiAgY3JlYXRlUGFydGljbGVzKClcbiAgY3JlYXRlU2hhcGVzKClcblxuICAvLyAvLyBBcHBseSBWUiBoZWFkc2V0IHBvc2l0aW9uYWwgZGF0YSB0byBjYW1lcmEuXG5cbiAgLy8gQXBwbHkgVlIgc3RlcmVvIHJlbmRlcmluZyB0byByZW5kZXJlci5cbiAgdnJFZmZlY3QgPSBuZXcgVEhSRUUuVlJFZmZlY3QocmVuZGVyZXIpXG4gIHZyRWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodClcblxuICAvLyBDcmVhdGUgYSBWUiB2ck1hbmFnZXIgaGVscGVyIHRvIGVudGVyIGFuZCBleGl0IFZSIG1vZGUuXG4gIGxldCBwYXJhbXMgPSB7XG4gICAgaGlkZUJ1dHRvbjogZmFsc2UsIC8vIERlZmF1bHQ6IGZhbHNlLlxuICAgIGlzVW5kaXN0b3J0ZWQ6IGZhbHNlIC8vIERlZmF1bHQ6IGZhbHNlLlxuICB9XG4gIHZyTWFuYWdlciA9IG5ldyBXZWJWUk1hbmFnZXIocmVuZGVyZXIsIHZyRWZmZWN0LCBwYXJhbXMpXG5cbiAgYnRuRmx5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzLWJ0bi1mbHknKVxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzKClcblxuXG4gIC8vIEZvciBoaWdoIGVuZCBWUiBkZXZpY2VzIGxpa2UgVml2ZSBhbmQgT2N1bHVzLCB0YWtlIGludG8gYWNjb3VudCB0aGUgc3RhZ2VcbiAgLy8gcGFyYW1ldGVycyBwcm92aWRlZC5cbiAgc2V0dXBTdGFnZSgpXG5cbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMgKCkge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgb25Eb2N1bWVudE1vdXNlRG93biwgZmFsc2UgKVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2V1cCcsIG9uRG9jdW1lbnRNb3VzZVVwLCBmYWxzZSApXG4gIC8vIExpc3RlbiB0byB0aGUgc2NyZWVuOiBpZiB0aGUgdXNlciByZXNpemVzIGl0XG4gIC8vIHdlIGhhdmUgdG8gdXBkYXRlIHRoZSBjYW1lcmEgYW5kIHRoZSByZW5kZXJlciBzaXplXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVXaW5kb3dSZXNpemUsIGZhbHNlKVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndnJkaXNwbGF5cHJlc2VudGNoYW5nZScsIGhhbmRsZVdpbmRvd1Jlc2l6ZSwgdHJ1ZSlcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2dhbWVwYWRjb25uZWN0ZWQnLCBpbml0Q29udHJvbGxlcnMsIGZhbHNlKVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZ2FtZXBhZGRpc2Nvbm5lY3RlZCcsIGRpc2Nvbm5lY3QsIGZhbHNlKVxuICBidG5GbHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW92ZUJhbGxvb25VcCwgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGluaXRDb250cm9sbGVycyAoZXZlbnQpIHtcbiAgY29udHJvbHNFbmFibGVkID0gdHJ1ZVxuICBjb25zb2xlLmxvZygnY29udHJvbGxlcnMgaW5pdGlhbGl6ZWQnKVxuICB2aXZlQ29udHJvbGxlcnMuaW5pdCgpXG59XG5cbmZ1bmN0aW9uIGRpc2Nvbm5lY3QgKCkge1xuICBjb25zb2xlLmxvZygnZ2FtZXBhZHMgZGlzY29ubmVjdGVkJylcbn1cbi8vIEFkZCBtb3VzZSBldmVudHMgdG8gdGVzdCB0aGUgYmFsbG9vbiBtb3ZpbmcgdXBcbmZ1bmN0aW9uIG9uRG9jdW1lbnRNb3VzZURvd24gKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICBtb3VzZS54ID0gKCBldmVudC5jbGllbnRYIC8gcmVuZGVyZXIuZG9tRWxlbWVudC5jbGllbnRXaWR0aCApICogMiAtIDFcbiAgbW91c2UueSA9IC0oIGV2ZW50LmNsaWVudFkgLyByZW5kZXJlci5kb21FbGVtZW50LmNsaWVudEhlaWdodCApICogMiArIDFcblxuICByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSwgY2FtZXJhKVxuICB2YXIgaW50ZXJzZWN0cyA9IHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKGJhbGxvb24uZ2V0Rmx5aW5nT2JqZWN0cygpLCB0cnVlKVxuXG4gIGlmICggaW50ZXJzZWN0cy5sZW5ndGggPiAwICkge1xuICAgICAgbW92ZUJhbGxvb25VcCgpXG4gIH1cbn1cblxuZnVuY3Rpb24gb25Eb2N1bWVudE1vdXNlVXAgKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgaXNNb3ZpbmdVcCA9IGZhbHNlXG59XG5cbmZ1bmN0aW9uIG1vdmVCYWxsb29uVXAgKCkge1xuICBpc01vdmluZ1VwID0gdHJ1ZVxufVxuXG4vLyBHZXQgdGhlIEhNRCwgYW5kIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBzb21ldGhpbmcgdGhhdCBzcGVjaWZpZXNcbi8vIHN0YWdlUGFyYW1ldGVycywgcmVhcnJhbmdlIHRoZSBzY2VuZS5cbmZ1bmN0aW9uIHNldHVwU3RhZ2UgKCkge1xuICBuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cygpLnRoZW4oKGRpc3BsYXlzKSA9PiB7XG4gICAgaWYgKGRpc3BsYXlzLmxlbmd0aCA+IDApIHtcbiAgICAgIHZyRGlzcGxheSA9IGRpc3BsYXlzWzBdXG4gICAgICBpZiAodnJEaXNwbGF5LnN0YWdlUGFyYW1ldGVycykge1xuICAgICAgICBzZXRTdGFnZURpbWVuc2lvbnModnJEaXNwbGF5LnN0YWdlUGFyYW1ldGVycylcbiAgICAgIH1cbiAgICAgIC8vIHN0YXJ0IGEgbG9vcCB0aGF0IHdpbGwgdXBkYXRlIHRoZSBvYmplY3RzJyBwb3NpdGlvbnNcbiAgICAgIC8vIGFuZCByZW5kZXIgdGhlIHNjZW5lIG9uIGVhY2ggZnJhbWVcbiAgICAgIHZyRGlzcGxheS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcClcbiAgICB9XG4gIH0pXG59XG5cbmZ1bmN0aW9uIHNldFN0YWdlRGltZW5zaW9ucyAoc3RhZ2UpIHtcbiAgLy8gU2l6ZSB0aGUgc2t5Ym94IGFjY29yZGluZyB0byB0aGUgc2l6ZSBvZiB0aGUgYWN0dWFsIHN0YWdlLlxuICAvLyB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoc3RhZ2Uuc2l6ZVgsIGJveFNpemUsIHN0YWdlLnNpemVaKTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0LCBmYWxzZSlcbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuLy8gaW1wb3J0IHBhcnRpY2xlc1ZTIGZyb20gJy4vc2hhZGVycy9wYXJ0aWNsZXMtdnMuZ2xzbCdcbi8vIGltcG9ydCBwYXJ0aWNsZXNGUyBmcm9tICcuL3NoYWRlcnMvcGFydGljbGVzLWZzLmdsc2wnXG5cbmNvbnN0IFdISVRFID0ge1xuICBtYWluQ29sb3I6IDB4ZWVlZWVlLFxuICBtYWluRW1pc3NpdmU6IDAsXG4gIHNlY29uZGFyeUNvbG9yOiAweGZmZmZmZixcbiAgc2Vjb25kYXJ5RW1pc3NpdmU6IDAsXG4gIGRldGFpbENvbG9yOiAweDk5OTk5OSxcbiAgZGV0YWlsRW1pc3NpdmU6IDBcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGVTeXN0ZW0ge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy50aW1lID0gMC4wXG4gICAgbGV0IHRyaWFuZ2xlcyA9IDFcbiAgICBsZXQgaW5zdGFuY2VzID0gNzAwMFxuICAgIGxldCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSgpXG5cbiAgICBsZXQgdmVydGljZXMgPSBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodHJpYW5nbGVzICogMyAqIDMpLCAzKVxuICAgIGxldCB1bml0ID0gMC4wNTVcbiAgICB2ZXJ0aWNlcy5zZXRYWVooMCwgdW5pdCwgLXVuaXQsIDApXG4gICAgdmVydGljZXMuc2V0WFlaKDEsIC11bml0LCB1bml0LCAwKVxuICAgIHZlcnRpY2VzLnNldFhZWigyLCAwLCAwLCB1bml0KVxuICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLCB2ZXJ0aWNlcylcblxuICAgIGxldCBvZmZzZXRzID0gbmV3IFRIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGluc3RhbmNlcyAqIDMpLCAzLCAxKVxuICAgIGxldCBkaXN0ID0gMTgwXG4gICAgZm9yIChsZXQgaSA9IDAsIHVsID0gb2Zmc2V0cy5jb3VudDsgaSA8IHVsOyBpKyspIHtcbiAgICAgIG9mZnNldHMuc2V0WFlaKGksIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIGRpc3QsIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIGRpc3QsIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIGRpc3QpXG4gICAgfVxuICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgnb2Zmc2V0Jywgb2Zmc2V0cylcblxuICAgIGxldCBjb2xvcnMgPSBuZXcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoaW5zdGFuY2VzICogNCksIDQsIDEpXG5cbiAgICBsZXQgdGhyZWVDb2xvciA9IG5ldyBUSFJFRS5Db2xvcigpXG4gICAgZm9yIChsZXQgaSA9IDAsIHVsID0gY29sb3JzLmNvdW50OyBpIDwgdWw7IGkrKykge1xuICAgICAgbGV0IGMgPSB0aHJlZUNvbG9yLnNldEhleChXSElURS5tYWluQ29sb3IpXG4gICAgICBjb2xvcnMuc2V0WFlaVyhpLCBjLnIsIGMuZywgYy5iLCAxKVxuICAgIH1cbiAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ2NvbG9yJywgY29sb3JzKVxuXG4gICAgbGV0IHRpbWVPZmZzZXRzID0gbmV3IFRIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGluc3RhbmNlcyAqIDEpLCAxLCAxKVxuXG4gICAgZm9yIChsZXQgaSA9IDAsIHVsID0gdGltZU9mZnNldHMuY291bnQ7IGkgPCB1bDsgaSsrKSB7XG4gICAgICB0aW1lT2Zmc2V0cy5zZXRYKGksIE1hdGgucmFuZG9tKCkpXG4gICAgfVxuICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgndGltZU9mZnNldCcsIHRpbWVPZmZzZXRzKVxuXG4gICAgbGV0IHZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3I0KClcbiAgICBsZXQgb3JpZW50YXRpb25zU3RhcnQgPSBuZXcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoaW5zdGFuY2VzICogNCksIDQsIDEpXG4gICAgZm9yIChsZXQgaSA9IDAsIHVsID0gb3JpZW50YXRpb25zU3RhcnQuY291bnQ7IGkgPCB1bDsgaSsrKSB7XG4gICAgICB2ZWN0b3Iuc2V0KE1hdGgucmFuZG9tKCkgKiAyIC0gMSwgTWF0aC5yYW5kb20oKSAqIDIgLSAxLCBNYXRoLnJhbmRvbSgpICogMiAtIDEsIE1hdGgucmFuZG9tKCkgKiAyIC0gMSlcbiAgICAgIHZlY3Rvci5ub3JtYWxpemUoKVxuICAgICAgb3JpZW50YXRpb25zU3RhcnQuc2V0WFlaVyhpLCB2ZWN0b3IueCwgdmVjdG9yLnksIHZlY3Rvci56LCB2ZWN0b3IudylcbiAgICB9XG4gICAgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCdvcmllbnRhdGlvblN0YXJ0Jywgb3JpZW50YXRpb25zU3RhcnQpXG5cbiAgICBsZXQgb3JpZW50YXRpb25zRW5kID0gbmV3IFRIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGluc3RhbmNlcyAqIDQpLCA0LCAxKVxuICAgIGZvciAobGV0IGkgPSAwLCB1bCA9IG9yaWVudGF0aW9uc0VuZC5jb3VudDsgaSA8IHVsOyBpKyspIHtcbiAgICAgIHZlY3Rvci5zZXQoTWF0aC5yYW5kb20oKSAqIDIgLSAxLCBNYXRoLnJhbmRvbSgpICogMiAtIDEsIE1hdGgucmFuZG9tKCkgKiAyIC0gMSwgTWF0aC5yYW5kb20oKSAqIDIgLSAxKVxuICAgICAgdmVjdG9yLm5vcm1hbGl6ZSgpXG4gICAgICBvcmllbnRhdGlvbnNFbmQuc2V0WFlaVyhpLCB2ZWN0b3IueCwgdmVjdG9yLnksIHZlY3Rvci56LCB2ZWN0b3IudylcbiAgICB9XG4gICAgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCdvcmllbnRhdGlvbkVuZCcsIG9yaWVudGF0aW9uc0VuZClcblxuICAgIGxldCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbCh7XG4gICAgICB1bmlmb3Jtczoge1xuICAgICAgICB0aW1lOiB7IHZhbHVlOiAxLjAgfSxcbiAgICAgICAgc2luZVRpbWU6IHsgdmFsdWU6IDEuMCB9XG4gICAgICB9LFxuICAgICAgdmVydGV4U2hhZGVyOiBgXG4gICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICAgICAgdW5pZm9ybSBmbG9hdCB0aW1lO1xuICAgICAgICB1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1xuICAgICAgICB1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcbiAgICAgICAgYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XG4gICAgICAgIGF0dHJpYnV0ZSB2ZWMzIG9mZnNldDtcbiAgICAgICAgYXR0cmlidXRlIHZlYzQgY29sb3I7XG4gICAgICAgIGF0dHJpYnV0ZSB2ZWM0IG9yaWVudGF0aW9uU3RhcnQ7XG4gICAgICAgIGF0dHJpYnV0ZSB2ZWM0IG9yaWVudGF0aW9uRW5kO1xuICAgICAgICBhdHRyaWJ1dGUgZmxvYXQgdGltZU9mZnNldDtcbiAgICAgICAgdmFyeWluZyB2ZWM0IHZDb2xvcjtcbiAgICAgICAgdmFyeWluZyBmbG9hdCBsaWZlUHJvZ3Jlc3M7XG5cbiAgICAgICAgdm9pZCBtYWluKCl7XG5cbiAgICAgICAgICB2ZWMzIHZQb3NpdGlvbiA9IG9mZnNldDtcblxuICAgICAgICAgIGxpZmVQcm9ncmVzcyA9IG1vZCh0aW1lK3RpbWVPZmZzZXQsMS4wKTtcblxuICAgICAgICAgIHZQb3NpdGlvbiA9IG9mZnNldCAqIGxpZmVQcm9ncmVzcyArIHBvc2l0aW9uO1xuICAgICAgICAgIHZlYzQgb3JpZW50YXRpb24gPSBub3JtYWxpemUobWl4KG9yaWVudGF0aW9uU3RhcnQsIG9yaWVudGF0aW9uRW5kLCBsaWZlUHJvZ3Jlc3MpKTtcbiAgICAgICAgICB2ZWMzIHZjViA9IGNyb3NzKG9yaWVudGF0aW9uLnh5eiwgdlBvc2l0aW9uKTtcbiAgICAgICAgICAvL29yaWVudGF0aW9uLncgKj0gdGltZSo1LjA7XG4gICAgICAgICAgdlBvc2l0aW9uID0gdmNWICogKDIuMCAqIG9yaWVudGF0aW9uLncpICsgKGNyb3NzKG9yaWVudGF0aW9uLnh5eiwgdmNWKSAqIDIuMCArIHZQb3NpdGlvbik7XG4gICAgICAgICAgdkNvbG9yID0gY29sb3I7XG4gICAgICAgICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggdlBvc2l0aW9uLCAxLjAgKTtcbiAgICAgICAgfVxuICAgICAgICBgLFxuICAgICAgZnJhZ21lbnRTaGFkZXI6IGBcbiAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdGltZTtcbiAgICAgIHZhcnlpbmcgdmVjNCB2Q29sb3I7XG4gICAgICB2YXJ5aW5nIGZsb2F0IGxpZmVQcm9ncmVzcztcblxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICBmbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56IC8gZ2xfRnJhZ0Nvb3JkLncgLyA1LjA7XG4gICAgICAgIGZsb2F0IG9wYWNpdHkgPSBjbGFtcCgwLjIsIDEuMCwgZGVwdGgpO1xuICAgICAgICB2ZWM0IGNvbG9yID0gdkNvbG9yO1xuICAgICAgICBjb2xvci5hID0gc2luKGxpZmVQcm9ncmVzcyoxMDAuMCkqb3BhY2l0eTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7XG4gICAgICB9XG4gICAgICBgLFxuICAgICAgc2lkZTogVEhSRUUuRG91YmxlU2lkZSxcbiAgICAgIHRyYW5zcGFyZW50OiB0cnVlXG4gICAgfSlcblxuICAgIGxldCBtZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKVxuICAgIG1lc2guZnJ1c3R1bUN1bGxlZCA9IGZhbHNlXG4gICAgdGhpcy5tZXNoID0gbWVzaFxuICB9XG5cbiAgdXBkYXRlIChkdCkge1xuICAgIHRoaXMudGltZSArPSAwLjAwMDFcbiAgICAvKiBpZiAodGhpcy50aW1lID4gMC4xKSB7XG4gICAgICB0aGlzLnRpbWUgLT0gMC4xXG4gICAgfSAqL1xuXG4gICAgdGhpcy5tZXNoLm1hdGVyaWFsLnVuaWZvcm1zLnRpbWUudmFsdWUgPSBNYXRoLnNpbih0aGlzLnRpbWUpXG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcXMoKVxuXG5mdW5jdGlvbiBxcyAoKSB7XG4gIHZhciBvYmogPSB7fVxuICB2YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zdWJzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignPycpICsgMSwgd2luZG93LmxvY2F0aW9uLmhyZWYubGVuZ3RoKVxuXG4gIGlmIChxdWVyeS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgcXVlcnkgPSBxdWVyeS5zdWJzdHJpbmcoMCwgcXVlcnkuaW5kZXhPZignIycpKVxuICB9XG5cbiAgdmFyIHZhcnMgPSBxdWVyeS5zcGxpdCgnJicpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwYWlyID0gdmFyc1tpXS5zcGxpdCgnPScpXG4gICAgdmFyIGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKVxuICAgIHZhciB2YWwgPSBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSlcbiAgICBvYmpba2V5XSA9IHZhbCB8fCB0cnVlIC8vIHRydWUgc28gXCI/eFwiOyBpZiggcXVlcnkueCApe31cbiAgfVxuXG4gIHJldHVybiBvYmpcbn1cbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IEN1cnZlIGZyb20gJy4vY3VydmUnXG5pbXBvcnQgRmlyZSBmcm9tICcuL2ZpcmUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdvcmxkIHtcblxuICBjb25zdHJ1Y3RvciAoc2NlbmUsIGxvYWRlcikge1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxuICAgIHRoaXMubG9hZGVyID0gbG9hZGVyXG4gICAgdGhpcy53aW5ncyA9IHVuZGVmaW5lZFxuICAgIHRoaXMucGl2b3QgPSB1bmRlZmluZWRcblxuICAgIHRoaXMubG9hZCgpXG4gIH1cblxuICBsb2FkICgpIHtcbiAgICB0aGlzLmxvYWRlci5sb2FkKFxuICAgICAgJ2Fzc2V0cy9tb2RlbHMvaXNsYW5kL3NreWlzbGFuZDMuanNvbicsXG4gICAgICAoIGlzbGFuZCApID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpc2xhbmQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoaXNsYW5kLmNoaWxkcmVuW2ldLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICBpZiAoaXNsYW5kLmNoaWxkcmVuW2ldLm1hdGVyaWFsLm1hdGVyaWFscykge1xuICAgICAgICAgICAgICBpc2xhbmQuY2hpbGRyZW5baV0ubWF0ZXJpYWwubWF0ZXJpYWxzLmZvckVhY2goKG1hdCkgPT4ge1xuICAgICAgICAgICAgICAgIG1hdC5zaWRlID0gVEhSRUUuRG91YmxlU2lkZTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBpc2xhbmQuY2hpbGRyZW5baV0ubWF0ZXJpYWwuc2lkZSA9IFRIUkVFLkRvdWJsZVNpZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc2xhbmQuY2hpbGRyZW5baV0uZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIGlzbGFuZC5jaGlsZHJlbltpXS5nZW9tZXRyeS5jb21wdXRlRmxhdFZlcnRleE5vcm1hbHMoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjZW5lLmFkZChpc2xhbmQpXG4gICAgICB9XG4gICAgKVxuXG4gICAgdGhpcy5sb2FkZXIubG9hZChcbiAgICAgICdhc3NldHMvbW9kZWxzL3dpbmRtaWxsL21pbGwyLmpzb24nLFxuICAgICAgKCB3aW5kbWlsbCApID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aW5kbWlsbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh3aW5kbWlsbC5jaGlsZHJlbltpXS5tYXRlcmlhbCkge1xuICAgICAgICAgICAgaWYgKHdpbmRtaWxsLmNoaWxkcmVuW2ldLm1hdGVyaWFsLm1hdGVyaWFscykge1xuICAgICAgICAgICAgICB3aW5kbWlsbC5jaGlsZHJlbltpXS5tYXRlcmlhbC5tYXRlcmlhbHMuZm9yRWFjaCgobWF0KSA9PiB7XG4gICAgICAgICAgICAgICAgbWF0LnNpZGUgPSBUSFJFRS5Eb3VibGVTaWRlO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAod2luZG1pbGwuY2hpbGRyZW5baV0uZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHdpbmRtaWxsLmNoaWxkcmVuW2ldLmdlb21ldHJ5LmNvbXB1dGVGbGF0VmVydGV4Tm9ybWFscygpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdpbmRtaWxsLnBvc2l0aW9uLnNldCgtNS41LCAwLCAtNC44KVxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh3aW5kbWlsbClcbiAgICAgIH1cbiAgICApXG4gICAgdGhpcy5sb2FkZXIubG9hZChcbiAgICAgICcuLi8uLi8uLi9hc3NldHMvbW9kZWxzL3dpbmRtaWxsL3dpbmdzNC5qc29uJyxcbiAgICAgICggd2luZ3MgKSA9PiB7XG4gICAgICAgIHRoaXMud2luZ3MgPSB3aW5nc1xuICAgICAgICB0aGlzLndpbmdzLnBvc2l0aW9uLnNldCgtNS44LCAzLjUsIC00LjgpXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMud2luZ3MpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53aW5ncy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh0aGlzLndpbmdzLmNoaWxkcmVuW2ldLmdlb21ldHJ5KSB7XG4gICAgICAgICAgICB0aGlzLndpbmdzLmNoaWxkcmVuW2ldLmdlb21ldHJ5LmNvbXB1dGVGbGF0VmVydGV4Tm9ybWFscygpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgdXBkYXRlIChkZWx0YSwgZWxhcHNlZCwgdCkge1xuICAgIGlmKHRoaXMud2luZ3MpIHRoaXMud2luZ3Mucm90YXRpb24ueCArPSBkZWx0YVxuICB9XG5cbn1cbiJdfQ==
